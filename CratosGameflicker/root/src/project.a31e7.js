window.__require=function e(t,i,o){function n(s,c){if(!i[s]){if(!t[s]){var r=s.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+s+"'")}s=r}var d=i[s]={exports:{}};t[s][0].call(d.exports,function(e){return n(t[s][1][e]||e)},d,d.exports,e,t,i,o)}return i[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<o.length;s++)n(o[s]);return n}({ActivityDialog:[function(e,t,i){"use strict";cc._RF.push(t,"56224sPgcFMv43I1ZvPY4oy","ActivityDialog"),cc.Class({extends:cc.Component,properties:{scroViewNodeArray:[cc.Node],crowdYesterdayApplycount:cc.Label,crowdYesterdayPoolCoins:cc.Label,crowdTodayPoolCoins:cc.Label,crowdApplyLimit:cc.Label,crowdGuaFenTip:cc.Label,crowdCarryTimeTip:cc.Label,crowdLimitTimeTip:cc.Label,crowdTodayCanApplyCount:cc.Label,crowdTodayCanGuaFenCount:cc.Label,crowdTodayPrice:cc.Label,crowdApplyBtn:cc.Button,crowdApplySubNode:cc.Node,crowdApplyDakaLabel:cc.Label,baomingNode:cc.Node,yihanLabel:cc.Label,coinpoolSprite:cc.Sprite,coinpoolFrames:[cc.SpriteFrame],almsRuleLabel:cc.Label},onLoad:function(){var e=app.currParamData();this.lobbyScript=e?e.lobbyScript:null,e&&e.data&&this.updateCrowdData(e.data),this.loadAlmsData()},preLoad:function(e,t){this.loadCrowdData(t)},loadAlmsData:function(e){var t=this;t.almsData=null,app.requestJson({url:"/pipes/alms/almsinfo"},function(i,o){i&&o&&(t.almsData=o.result||o,t.almsData&&(t.almsRuleLabel.string="1.\u8d26\u6237\u91d1\u989d\u5c11\u4e8e"+t.almsData.almslesscoin+"\u5b50\u5f39\u65f6\u53ef\u9886\u53d6"+t.almsData.almsgetcoin+"\u5b50\u5f39 \r\n 2.\u6bcf\u5929\u6700\u9ad8\u53ef\u9886\u53d6"+t.almsData.almscount+"\u6b21\r\n3.VIP6\u53ca\u4ee5\u4e0a\u5c06\u5347\u7ea7\u4e3a\u542f\u822a\u57fa\u91d1\u73a9\u6cd5"),e&&e())})},onAlmsClick:function(e){var t=this;if(t.almsData){if(t.almsData.gotcount>=t.almsData.almscount)return void app.showHintMessage("\u60a8\u4eca\u5929\u9886\u53d6\u6b21\u6570\u5df2\u5230\u8fbe\u4e0a\u9650");if(app.currUser().coins>=t.almsData.almslesscoin)return void app.showHintMessage("\u60a8\u5f53\u524d\u5b50\u5f39\u6570\u8d85\u8fc7"+t.almsData.almslesscoin+", \u4e0d\u80fd\u4e1c\u5c71\u518d\u8d77")}app.requestJson({url:"/pipes/alms/runalms"},function(e,i){e&&i&&(0!=i.retcode&&i.retinfo?app.showHintMessage(i.retinfo):(t.loadAlmsData(),t.lobbyScript&&t.lobbyScript.updateUserInfo&&t.lobbyScript.updateUserInfo()))})},loadCrowdData:function(e){var t=this;app.requestJson({url:"/pipes/crowd/query"},function(i,o){i&&o&&(0!=o.retcode&&o.retinfo?app.showHintMessage(o.retinfo):(t.updateCrowdData(o.result),e&&e()))})},updateCrowdData:function(e){this.crowdData=e,this.crowdYesterdayApplycount.string="\u6628\u65e5\u62a5\u540d\uff1a"+e.yesterdayapplycount+"\u6b21",this.crowdYesterdayPoolCoins.string="\u6628\u65e5\u603b\u5956\u6c60\uff1a"+e.poolrecord.yesterdaypoolcoins,this.crowdTodayPoolCoins.string=e.poolrecord.poolcoins,this.crowdApplyLimit.string=e.poolrecord.applylimit;var t=new Date(1577808e6+e.poolrecord.dakastartmills).toHourMinuteString(),i=new Date(1577808e6+e.poolrecord.dakaendmills).toHourMinuteString();this.crowdCarryTimeTip.string=t+"-"+i;var o=new Date(e.poolrecord.crowdstarttime).toEnMinuteString().replace(":00","\u65f6"),n=new Date(e.poolrecord.crowdendtime).toEnMinuteString().replace("23:59","24\u65f6").replace(":00","\u65f6");this.crowdLimitTimeTip.string=o+" - "+n,this.crowdTodayCanApplyCount.string=e.todayapplycount+"/"+e.poolrecord.applylimit,this.crowdTodayCanGuaFenCount.string=e.todayapplycount+"/"+e.poolrecord.applylimit,this.crowdGuaFenTip.string="\u660e\u665a"+t.replace(":00","\u70b9")+"\u6253\u5361\u53ef\u74dc\u5206\u4eca\u65e5\u5956\u6c60";var a=this.baomingNode.children;a[0].getComponent(cc.Label).string="\u60a8\u4eca\u65e5\u53ef\u62a5\u540d",a[1].getComponent(cc.Label).string=e.todayapplycount+"/"+e.poolrecord.applylimit,a[2].getComponent(cc.Label).string="\u6b21\uff0c\u660e\u65e5\u53ef\u74dc\u5206",a[3].getComponent(cc.Label).string=e.todayapplycount+"/"+e.poolrecord.applylimit,a[4].getComponent(cc.Label).string="\u6b21\u5956\u6c60",this.crowdApplyBtn.node.active=!0,this.crowdApplyBtn.interactable=!0,1==e.poolrecord.crowdstatus?(this.coinpoolSprite.spriteFrame=this.coinpoolFrames[0],this.crowdTodayPrice.string="x"+(e.poolrecord.applystartcoins+(e.todayapplycount||0)*e.poolrecord.applyincrecoins),this.crowdApplySubNode.active=!0,this.crowdApplyDakaLabel.node.active=!1,this.baomingNode.active=!0,this.yihanLabel.node.active=!1):2==e.poolrecord.crowdstatus?(this.coinpoolSprite.spriteFrame=this.coinpoolFrames[1],this.crowdTodayPoolCoins.string=e.poolrecord.yesterdaypoolcoins,this.crowdApplyDakaLabel.string="\u6253 \u5361",e.yesterdayapplycount?(e.dakaed?(this.crowdApplyBtn.interactable=!1,this.crowdApplyDakaLabel.string="\u5df2\u6253\u5361",a[0].getComponent(cc.Label).string="\u60a8\u5df2\u6253\u5361\uff0c",a[1].getComponent(cc.Label).string=i,a[2].getComponent(cc.Label).string="\u540e\u53ef\u74dc\u5206",a[3].getComponent(cc.Label).string=e.yesterdayapplycount,a[4].getComponent(cc.Label).string="\u4efd\u5956\u52b1"):(a[0].getComponent(cc.Label).string="\u60a8\u6628\u5929\u62a5\u540d",a[1].getComponent(cc.Label).string=e.yesterdayapplycount+"/"+e.poolrecord.applylimit,a[2].getComponent(cc.Label).string="\u6b21\uff0c\u4eca\u65e5\u6253\u5361\u540e\u53ef\u74dc\u5206\u5956\u6c60",a[3].getComponent(cc.Label).string=e.yesterdayapplycount+"/"+e.poolrecord.applylimit,a[4].getComponent(cc.Label).string="\u6b21"),this.baomingNode.active=!0,this.yihanLabel.node.active=!1):(this.baomingNode.active=!1,this.yihanLabel.node.active=!0,this.crowdApplyBtn.node.active=!1)):3==e.poolrecord.crowdstatus&&(this.coinpoolSprite.spriteFrame=this.coinpoolFrames[1],this.crowdTodayPoolCoins.string=e.poolrecord.yesterdaypoolcoins,this.crowdApplyBtn.node.active=!1,e.yesterdayapplycount?(this.baomingNode.active=!0,this.yihanLabel.node.active=!1,a[0].getComponent(cc.Label).string="\u60a8\u6628\u5929\u62a5\u540d",a[1].getComponent(cc.Label).string=e.yesterdayapplycount+"/"+e.poolrecord.applylimit,a[2].getComponent(cc.Label).string="\u6b21\uff0c\u4eca\u65e5\u53ef\u74dc\u5206\u5956\u6c60",a[3].getComponent(cc.Label).string=e.yesterdayapplycount+"/"+e.poolrecord.applylimit,a[4].getComponent(cc.Label).string="\u6b21"):(this.crowdGuaFenTip.string="\u7cfb\u7edf\u53d1\u5956\u4e2d\u2026\u2026",this.baomingNode.active=!1,this.yihanLabel.node.active=!0))},onCrowdApplyClick:function(e){var t=this;1!=t.crowdData.poolrecord.crowdstatus&&2!=t.crowdData.poolrecord.crowdstatus||app.requestJson({url:"/pipes/crowd/"+(1==t.crowdData.poolrecord.crowdstatus?"apply":"daka")},function(e,i){e&&i&&(i.success?(app.showHintMessage(1==t.crowdData.poolrecord.crowdstatus?"\u62a5\u540d\u6210\u529f":"\u6253\u5361\u6210\u529f"),t.loadCrowdData(),t.lobbyScript&&t.lobbyScript.updateUserInfo&&t.lobbyScript.updateUserInfo()):app.showHintMessage(i.retinfo.replace("\u91d1\u5e01","\u5b50\u5f39")))})},onCloseClick:function(){app.closeDialog(this),this.lobbyScript&&this.lobbyScript.updateUserInfo&&this.lobbyScript.updateUserInfo()},onSelectClick:function(e,t){this.activeIndex=t;for(var i=this.scroViewNodeArray,o=0;o<i.length;o++){var n=i[o],a=o==parseInt(t)-1;n.active=a}}}),cc._RF.pop()},{}],Application:[function(e,t,i){"use strict";cc._RF.push(t,"a6f2370Z9RPnY/QUIB3x5VD","Application");var o=e("Boot"),n=function(){this.apposid="skywar",this.appname="\u706b\u795e\u6218\u673a",this._appversion="0.0.6",this._apphost="https://skywar.laohu.love",cc.sys.isNative||"undefined"==typeof document||(this._apihost="http://localhost:10510"),o.call(this)};n.prototype.constructor=o,n.prototype=new o;var a=new n;window.app=a,t.exports=a,cc._RF.pop()},{Boot:"Boot"}],Boot:[function(e,t,i){"use strict";cc._RF.push(t,"11f7btKkFFJVZTh6G6+ywUV","Boot");var o=e("Socket"),n=function(){var e=this;this.globalConfigData=null,this.shopGoodsData=null,this._gameCoinStages={},this._localManifest=null,this._iosauditver="",this._appservers=[""],this._appsessionid="",this._appcookieunf=this.getStorageValue("cookie_unf",""),this._user=null,this._skywarGameinfo=null,this._paramData=null,this._socket=new o(this),this._routenet=!0,this._loginWechatCallback=null,this._loginQQCallback=null,this._payCallback=null,this._getLocationCallback=null,this._shareCallback=null,this._removeWebViewCallBack=null,this._createQRCodeCallback=null,this._uploadedTalkCallback=null,this._startPlayTalkCallback=null,this._endPlayTalkCallback=null,this._myShareQRCodeSpriteFrame=null,this._currwaiting=null,this._hintNodePrefab=null,this._gayShader=null,this._lightShader=null,this._clickEffect=null,this._closeEffect=null,this._defBgMusic=null,this._defBgMusicID=null,this._currBgMusic=null,this._currBgMusicID=null,this._faceMenImages=[],this._faceWomenImages=[],this._checkTimer=null,this._gamehiding=!1,this._canappabort=!0,this._logining=!1,this._netsocketalerting=!1,this._socket.setSendOnClosedFunc(function(t){e._netsocketalerting||(e._netsocketalerting=!0,e.openAlertDialog("\u7f51\u7edc\u5df2\u4e2d\u65ad\uff0c\u8bf7\u91cd\u65b0\u767b\u9646!",function(){e._netsocketalerting=!1,e.loadScene("UpgradeScene")}))}),this._socket.addObserver({onGameHide:function(){e._gamehiding=!0},onGameShow:function(){e._gamehiding=!1},onSocketAborted:function(){e._canappabort?e._logining||e._netsocketalerting||(e._netsocketalerting=!0,app.openAlertDialog("\u7f51\u7edc\u5df2\u4e2d\u65ad\uff0c\u8bf7\u91cd\u65b0\u767b\u9646!",function(){e._netsocketalerting=!1,app.loadScene("UpgradeScene")})):e._canappabort=!0},onWSonGameShutdownMessage:function(e){app.openAlertDialog("\u6e38\u620f\u670d\u52a1\u5668\u6b63\u5728\u66f4\u65b0\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5!",function(){app.logout(),app.loadScene("UpgradeScene")})},onWSonHrollAnnounceMessage:function(t){var i=t;if(i&&i.length)for(var o=e._socket._observers,n=0;n<o.length;n++){var a=o[n].hrollAnnounceNode;if(a&&a.getComponent){var s=a.getComponent("MarqueeNode");if(s||(s=a.getComponent("AnnounceNode")),s)for(var c=0;c<i.length;c++){var r=i[c];20==r.type&&(s.addItemData(r),s.startPlay())}}}},onWSonKefuChatMessage:function(e){cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","onWSonKefuChatMessage","(Ljava/lang/String;)V",JSON.stringify(e)):cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod("NativeHelper","onWSonKefuChatMessage:",JSON.stringify(e)):app.showHintMessage("\u672c\u5730\u5728\u7ebf\u5ba2\u670d\u63a5\u53e3\u8c03\u7528\u4e0d\u5f53")}})};n.prototype.logout=function(){this._canappabort=!1,this._socket&&this._socket.close();var e=this;this._routenet?(e._user=null,e._appsessionid="",e._appcookieunf="",e.setStorageValue("cookie_unf","")):this.requestJson("/pipes/user/logout",function(t,i){e._user=null,e._appsessionid="",e._appcookieunf="",e.setStorageValue("cookie_unf","")})},n.prototype.loadRoomCoinStages=function(e,t){var i=this,o=i._gameCoinStages[e];o?t(!0,o):i.requestJson({url:"/pipes/"+e+"/loadRoomCoinStages"},function(o,n){o&&n&&n.success&&(i._gameCoinStages[e]=n.result),t(o,n.result||[])})},n.prototype.isCanShareWXMiniProgram=function(){return!!this._canShareWXMiniProgram},n.prototype.isGameHiding=function(){return this._gamehiding},n.prototype.getAppHost=function(){var e=this._apphost||this._apihost;return e.indexOf("http")>=0?e:"http://"+e},n.prototype.getApiHost=function(){return this._apihost||""},n.prototype.getSocketHost=function(){return(this._apihost||"").replace("http","ws")},n.prototype.getAppName=function(){return this.appname},n.prototype.getVersion=function(){return this._appversion},n.prototype.setVersion=function(e){this._appversion=e||this._appversion||"1.0.0"},n.prototype.getLocalManifest=function(){return this._localManifest},n.prototype.setLocalManifest=function(e){this._localManifest=e},n.prototype.getSessionid=function(){return this._appsessionid},n.prototype.getCookieUNF=function(){return this._appcookieunf},n.prototype.getAppOS=function(){return cc.sys.isNative?cc.sys.os==cc.sys.OS_ANDROID?"android":cc.sys.os==cc.sys.OS_IOS?"ios":"web":"web"},n.prototype.getAppToken=function(){return this.getNativeDeviceUUID()},n.prototype.updateSession=function(e){this._appsessionid=e&&e.sessionid||"",this._appcookieunf=e&&e.unf||"",this.setStorageValue("cookie_unf",this._appcookieunf);var t=this;this._routenet||this._checkTimer||(this._checkTimer=setInterval(function(){t.requestJson("/pipes/user/check")},6e4))},n.prototype.updateIosAuditVer=function(e){this._iosauditver=e},n.prototype.isIosAuditVer=function(){return!!this._iosauditver&&this._iosauditver.indexOf(this.getVersion())>=0},n.prototype.getShareAppUrl=function(){var e=this.currUserid();return this.getAppHost()+"/index.html"+(e?"?uid="+parseInt(e).toString(36):"")},n.prototype.loadShareAppQRCode=function(e){e&&e(this._myShareQRCodeSpriteFrame)},n.prototype.updateUser=function(e){this._user=e,e&&(e.location={}),e&&e.userid&&this.setStorageValue("user_id",""+e.userid)},n.prototype.currUser=function(){return this._user},n.prototype.updateSkywarGameinfo=function(e){this._skywarGameinfo=e},n.prototype.currSkywarGameinfo=function(){return this._skywarGameinfo},n.prototype.currUserid=function(){return this._user?this._user.userid:0},n.prototype.getCurrgame=function(){return this._user?this._user.currgame:null},n.prototype.setCurrgame=function(e){return!!this._user&&(this._user.currgame=e||"",!0)},n.prototype.currParamData=function(){var e=this._paramData;return this._paramData=null,e},n.prototype.setFaceImages=function(e,t){this._faceMenImages=e||[],this._faceWomenImages=t||[];for(var i=[],o=0;o<this._faceMenImages.length;o++){var n=this._faceMenImages[o];(s=new cc.SpriteFrame(n.getTexture())).setOffset(n.getOffset()),s.setRect(n.getRect()),s.setRotated(n.isRotated()),s.setOriginalSize(n.getOriginalSize()),i.push(s)}this._faceMenImages=i;var a=[];for(o=0;o<this._faceWomenImages.length;o++){var s;n=this._faceWomenImages[o];(s=new cc.SpriteFrame(n.getTexture())).setOffset(n.getOffset()),s.setRect(n.getRect()),s.setRotated(n.isRotated()),s.setOriginalSize(n.getOriginalSize()),a.push(s)}this._faceWomenImages=a},n.prototype.getFaceImages=function(e){return 4==e?this._faceWomenImages:this._faceMenImages},n.prototype.openSocket=function(e,t){this._socket.connect(e,t)},n.prototype.closeSocket=function(){this._socket&&!this._socket.isClosed()&&this._socket.close()},n.prototype.checkSocket=function(e){this._socket&&this._socket.isClosed()&&this._socket.reconnect(e)},n.prototype.sendKefuChatMessage=function(e){this.sendSocketMessage({module:"kefu",sendToKefu:{bean:e}})},n.prototype.sendSocketMessage=function(e){try{this._routenet?this._socket.sendWsRouteMessage(e):this._socket.sendMessage(e)}catch(t){this.showHintMessage("\u53d1\u9001\u6d88\u606f\u5931\u8d25: "+e)}},n.prototype.getSocket=function(){return this._socket},n.prototype.removeAllSocketObservers=function(){this._socket&&this._socket.removeAllObservers()},n.prototype.removeSocketObserver=function(e){this._socket&&(e&&e.isLogining&&(this._logining=!1),this._socket.removeObserver(e))},n.prototype.addSocketObserver=function(e){this._socket&&(e&&e.isLogining&&(this._logining=!0),this._socket.addObserver(e))},n.prototype.updateAppServers=function(e){if(e&&e.length){this._appservers=e||[""];for(var t=0;t<this._appservers.length;t++){var i=this._appservers[t].length;i&&"/"==this._appservers[t][i-1]&&(this._appservers[t]=this._appservers[t].substring(0,i-1))}e.length<2?e[0]&&(this._apihost=e[0]):this._apihost=e[Math.round(Math.random()*(e.length-1))%e.length]}},n.prototype.loadBankCardInfo=function(e,t){e?this.httpJson("https://ccdcapi.alipay.com/validateAndCacheCardInfo.json?cardBinCheck=true&cardNo="+e,function(e,i,o){if(e&&i&&i.validated){var n={};n.cardtype=i.cardType,n.cardbanktype=i.bank,n.cardbankname={CDB:"\u56fd\u5bb6\u5f00\u53d1\u94f6\u884c",ICBC:"\u4e2d\u56fd\u5de5\u5546\u94f6\u884c",ABC:"\u4e2d\u56fd\u519c\u4e1a\u94f6\u884c",BOC:"\u4e2d\u56fd\u94f6\u884c",CCB:"\u4e2d\u56fd\u5efa\u8bbe\u94f6\u884c",PSBC:"\u4e2d\u56fd\u90ae\u653f\u50a8\u84c4\u94f6\u884c",COMM:"\u4ea4\u901a\u94f6\u884c",CMB:"\u62db\u5546\u94f6\u884c",SPDB:"\u4e0a\u6d77\u6d66\u4e1c\u53d1\u5c55\u94f6\u884c",CIB:"\u5174\u4e1a\u94f6\u884c",HXBANK:"\u534e\u590f\u94f6\u884c",GDB:"\u5e7f\u4e1c\u53d1\u5c55\u94f6\u884c",CMBC:"\u4e2d\u56fd\u6c11\u751f\u94f6\u884c",CITIC:"\u4e2d\u4fe1\u94f6\u884c",CEB:"\u4e2d\u56fd\u5149\u5927\u94f6\u884c",EGBANK:"\u6052\u4e30\u94f6\u884c",CZBANK:"\u6d59\u5546\u94f6\u884c",BOHAIB:"\u6e24\u6d77\u94f6\u884c",SPABANK:"\u5e73\u5b89\u94f6\u884c",SHRCB:"\u4e0a\u6d77\u519c\u6751\u5546\u4e1a\u94f6\u884c",YXCCB:"\u7389\u6eaa\u5e02\u5546\u4e1a\u94f6\u884c",YDRCB:"\u5c27\u90fd\u519c\u5546\u884c",BJBANK:"\u5317\u4eac\u94f6\u884c",SHBANK:"\u4e0a\u6d77\u94f6\u884c",JSBANK:"\u6c5f\u82cf\u94f6\u884c",HZCB:"\u676d\u5dde\u94f6\u884c",NJCB:"\u5357\u4eac\u94f6\u884c",NBBANK:"\u5b81\u6ce2\u94f6\u884c",HSBANK:"\u5fbd\u5546\u94f6\u884c",CSCB:"\u957f\u6c99\u94f6\u884c",CDCB:"\u6210\u90fd\u94f6\u884c",CQBANK:"\u91cd\u5e86\u94f6\u884c",DLB:"\u5927\u8fde\u94f6\u884c",NCB:"\u5357\u660c\u94f6\u884c",FJHXBC:"\u798f\u5efa\u6d77\u5ce1\u94f6\u884c",HKB:"\u6c49\u53e3\u94f6\u884c",WZCB:"\u6e29\u5dde\u94f6\u884c",QDCCB:"\u9752\u5c9b\u94f6\u884c",TZCB:"\u53f0\u5dde\u94f6\u884c",JXBANK:"\u5609\u5174\u94f6\u884c",CSRCB:"\u5e38\u719f\u519c\u6751\u5546\u4e1a\u94f6\u884c",NHB:"\u5357\u6d77\u519c\u6751\u4fe1\u7528\u8054\u793e",CZRCB:"\u5e38\u5dde\u519c\u6751\u4fe1\u7528\u8054\u793e",H3CB:"\u5185\u8499\u53e4\u94f6\u884c",SXCB:"\u7ecd\u5174\u94f6\u884c",SDEB:"\u987a\u5fb7\u519c\u5546\u94f6\u884c",WJRCB:"\u5434\u6c5f\u519c\u5546\u94f6\u884c",ZBCB:"\u9f50\u5546\u94f6\u884c",GYCB:"\u8d35\u9633\u5e02\u5546\u4e1a\u94f6\u884c",ZYCBANK:"\u9075\u4e49\u5e02\u5546\u4e1a\u94f6\u884c",HZCCB:"\u6e56\u5dde\u5e02\u5546\u4e1a\u94f6\u884c",DAQINGB:"\u9f99\u6c5f\u94f6\u884c",JINCHB:"\u664b\u57ce\u94f6\u884cJCBANK",ZJTLCB:"\u6d59\u6c5f\u6cf0\u9686\u5546\u4e1a\u94f6\u884c",GDRCC:"\u5e7f\u4e1c\u7701\u519c\u6751\u4fe1\u7528\u793e\u8054\u5408\u793e",DRCBCL:"\u4e1c\u839e\u519c\u6751\u5546\u4e1a\u94f6\u884c",MTBANK:"\u6d59\u6c5f\u6c11\u6cf0\u5546\u4e1a\u94f6\u884c",GCB:"\u5e7f\u5dde\u94f6\u884c",LYCB:"\u8fbd\u9633\u5e02\u5546\u4e1a\u94f6\u884c",JSRCU:"\u6c5f\u82cf\u7701\u519c\u6751\u4fe1\u7528\u8054\u5408\u793e",LANGFB:"\u5eca\u574a\u94f6\u884c",CZCB:"\u6d59\u6c5f\u7a20\u5dde\u5546\u4e1a\u94f6\u884c",DYCB:"\u5fb7\u9633\u5546\u4e1a\u94f6\u884c",JZBANK:"\u664b\u4e2d\u5e02\u5546\u4e1a\u94f6\u884c",BOSZ:"\u82cf\u5dde\u94f6\u884c",GLBANK:"\u6842\u6797\u94f6\u884c",URMQCCB:"\u4e4c\u9c81\u6728\u9f50\u5e02\u5546\u4e1a\u94f6\u884c",CDRCB:"\u6210\u90fd\u519c\u5546\u94f6\u884c",ZRCBANK:"\u5f20\u5bb6\u6e2f\u519c\u6751\u5546\u4e1a\u94f6\u884c",BOD:"\u4e1c\u839e\u94f6\u884c",LSBANK:"\u83b1\u5546\u94f6\u884c",BJRCB:"\u5317\u4eac\u519c\u6751\u5546\u4e1a\u94f6\u884c",TRCB:"\u5929\u6d25\u519c\u5546\u94f6\u884c",SRBANK:"\u4e0a\u9976\u94f6\u884c",FDB:"\u5bcc\u6ec7\u94f6\u884c",CRCBANK:"\u91cd\u5e86\u519c\u6751\u5546\u4e1a\u94f6\u884c",ASCB:"\u978d\u5c71\u94f6\u884c",NXBANK:"\u5b81\u590f\u94f6\u884c",BHB:"\u6cb3\u5317\u94f6\u884c",HRXJB:"\u534e\u878d\u6e58\u6c5f\u94f6\u884c",ZGCCB:"\u81ea\u8d21\u5e02\u5546\u4e1a\u94f6\u884c",YNRCC:"\u4e91\u5357\u7701\u519c\u6751\u4fe1\u7528\u793e",JLBANK:"\u5409\u6797\u94f6\u884c",DYCCB:"\u4e1c\u8425\u5e02\u5546\u4e1a\u94f6\u884c",KLB:"\u6606\u4ed1\u94f6\u884c",ORBANK:"\u9102\u5c14\u591a\u65af\u94f6\u884c",XTB:"\u90a2\u53f0\u94f6\u884c",JSB:"\u664b\u5546\u94f6\u884c",TCCB:"\u5929\u6d25\u94f6\u884c",BOYK:"\u8425\u53e3\u94f6\u884c",JLRCU:"\u5409\u6797\u519c\u4fe1",SDRCU:"\u5c71\u4e1c\u519c\u4fe1",XABANK:"\u897f\u5b89\u94f6\u884c",HBRCU:"\u6cb3\u5317\u7701\u519c\u6751\u4fe1\u7528\u793e",NXRCU:"\u5b81\u590f\u9ec4\u6cb3\u519c\u6751\u5546\u4e1a\u94f6\u884c",GZRCU:"\u8d35\u5dde\u7701\u519c\u6751\u4fe1\u7528\u793e",FXCB:"\u961c\u65b0\u94f6\u884c",HBHSBANK:"\u6e56\u5317\u94f6\u884c\u9ec4\u77f3\u5206\u884c",ZJNX:"\u6d59\u6c5f\u7701\u519c\u6751\u4fe1\u7528\u793e\u8054\u5408\u793e",XXBANK:"\u65b0\u4e61\u94f6\u884c",HBYCBANK:"\u6e56\u5317\u94f6\u884c\u5b9c\u660c\u5206\u884c",LSCCB:"\u4e50\u5c71\u5e02\u5546\u4e1a\u94f6\u884c",TCRCB:"\u6c5f\u82cf\u592a\u4ed3\u519c\u6751\u5546\u4e1a\u94f6\u884c",BZMD:"\u9a7b\u9a6c\u5e97\u94f6\u884c",GZB:"\u8d63\u5dde\u94f6\u884c",WRCB:"\u65e0\u9521\u519c\u6751\u5546\u4e1a\u94f6\u884c",BGB:"\u5e7f\u897f\u5317\u90e8\u6e7e\u94f6\u884c",GRCB:"\u5e7f\u5dde\u519c\u5546\u94f6\u884c",JRCB:"\u6c5f\u82cf\u6c5f\u9634\u519c\u6751\u5546\u4e1a\u94f6\u884c",BOP:"\u5e73\u9876\u5c71\u94f6\u884c",TACCB:"\u6cf0\u5b89\u5e02\u5546\u4e1a\u94f6\u884c",CGNB:"\u5357\u5145\u5e02\u5546\u4e1a\u94f6\u884c",CCQTGB:"\u91cd\u5e86\u4e09\u5ce1\u94f6\u884c",XLBANK:"\u4e2d\u5c71\u5c0f\u6984\u6751\u9547\u94f6\u884c",HDBANK:"\u90af\u90f8\u94f6\u884c",KORLABANK:"\u5e93\u5c14\u52d2\u5e02\u5546\u4e1a\u94f6\u884c",BOJZ:"\u9526\u5dde\u94f6\u884c",QLBANK:"\u9f50\u9c81\u94f6\u884c",BOQH:"\u9752\u6d77\u94f6\u884c",YQCCB:"\u9633\u6cc9\u94f6\u884c",SJBANK:"\u76db\u4eac\u94f6\u884c",FSCB:"\u629a\u987a\u94f6\u884c",ZZBANK:"\u90d1\u5dde\u94f6\u884c",SRCB:"\u6df1\u5733\u519c\u6751\u5546\u4e1a\u94f6\u884c",BANKWF:"\u6f4d\u574a\u94f6\u884c",JJBANK:"\u4e5d\u6c5f\u94f6\u884c",JXRCU:"\u6c5f\u897f\u7701\u519c\u6751\u4fe1\u7528",HNRCU:"\u6cb3\u5357\u7701\u519c\u6751\u4fe1\u7528",GSRCU:"\u7518\u8083\u7701\u519c\u6751\u4fe1\u7528",SCRCU:"\u56db\u5ddd\u7701\u519c\u6751\u4fe1\u7528",GXRCU:"\u5e7f\u897f\u7701\u519c\u6751\u4fe1\u7528",SXRCCU:"\u9655\u897f\u4fe1\u5408",WHRCB:"\u6b66\u6c49\u519c\u6751\u5546\u4e1a\u94f6\u884c",YBCCB:"\u5b9c\u5bbe\u5e02\u5546\u4e1a\u94f6\u884c",KSRB:"\u6606\u5c71\u519c\u6751\u5546\u4e1a\u94f6\u884c",SZSBK:"\u77f3\u5634\u5c71\u94f6\u884c",HSBK:"\u8861\u6c34\u94f6\u884c",XYBANK:"\u4fe1\u9633\u94f6\u884c",NBYZ:"\u911e\u5dde\u94f6\u884c",ZJKCCB:"\u5f20\u5bb6\u53e3\u5e02\u5546\u4e1a\u94f6\u884c",XCYH:"\u8bb8\u660c\u94f6\u884c",JNBANK:"\u6d4e\u5b81\u94f6\u884c",CBKF:"\u5f00\u5c01\u5e02\u5546\u4e1a\u94f6\u884c",WHCCB:"\u5a01\u6d77\u5e02\u5546\u4e1a\u94f6\u884c",HBC:"\u6e56\u5317\u94f6\u884c",BOCD:"\u627f\u5fb7\u94f6\u884c",BODD:"\u4e39\u4e1c\u94f6\u884c",JHBANK:"\u91d1\u534e\u94f6\u884c",BOCY:"\u671d\u9633\u94f6\u884c",LSBC:"\u4e34\u5546\u94f6\u884c",BSB:"\u5305\u5546\u94f6\u884c",LZYH:"\u5170\u5dde\u94f6\u884c",BOZK:"\u5468\u53e3\u94f6\u884c",DZBANK:"\u5fb7\u5dde\u94f6\u884c",SCCB:"\u4e09\u95e8\u5ce1\u94f6\u884c",AYCB:"\u5b89\u9633\u94f6\u884c",ARCU:"\u5b89\u5fbd\u7701\u519c\u6751\u4fe1\u7528\u793e",HURCB:"\u6e56\u5317\u7701\u519c\u6751\u4fe1\u7528\u793e",HNRCC:"\u6e56\u5357\u7701\u519c\u6751\u4fe1\u7528\u793e",NYNB:"\u5e7f\u4e1c\u5357\u7ca4\u94f6\u884c",LYBANK:"\u6d1b\u9633\u94f6\u884c",NHQS:"\u519c\u4fe1\u94f6\u6e05\u7b97\u4e2d\u5fc3",CBBQS:"\u57ce\u5e02\u5546\u4e1a\u94f6\u884c\u8d44\u91d1\u6e05\u7b97\u4e2d\u5fc3"}[i.bank||""],t&&t(!0,n)}else t&&t(!1,null)}):t&&t(!1,null)},n.prototype.formatCoins=function(e){return e?""+e/100:"0"},n.prototype.comdifyCoins=function(e){if(!e)return"0";var t=/\d{1,3}(?=(\d{3})+$)/g;return String(e/100).replace(/^(\d+)((\.\d+)?)$/,function(e,i,o){return i.replace(t,"$&,")+o})},n.prototype.longCoins=function(e){return e?parseInt(100*parseFloat(e)):"0"},n.prototype.generateRandom=function(e,t){var i=t-e+1;return Math.floor(Math.random()*i+e)},n.prototype.getGayShader=function(){if(this._gayShader)return this._gayShader;var e=new cc.GLProgram;return e.initWithString("attribute vec4 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying lowp vec4 v_fragmentColor;\nvarying mediump vec2 v_texCoord;\nvoid main()\n{\ngl_Position = CC_PMatrix * a_position;\nv_fragmentColor = a_color;\nv_texCoord = a_texCoord;\n}","precision lowp float;\nvarying vec4 v_fragmentColor;\nvarying vec2 v_texCoord;\nvoid main()\n{\nvec4 c = texture2D(CC_Texture0, v_texCoord);\ngl_FragColor.xyz = vec3(0.2126*c.r + 0.7152*c.g + 0.0722*c.b);\ngl_FragColor.w = c.w ;\n}"),e.addAttribute(cc.macro.ATTRIBUTE_NAME_POSITION,cc.macro.VERTEX_ATTRIB_POSITION),e.addAttribute(cc.macro.ATTRIBUTE_NAME_COLOR,cc.macro.VERTEX_ATTRIB_COLOR),e.addAttribute(cc.macro.ATTRIBUTE_NAME_TEX_COORD,cc.macro.VERTEX_ATTRIB_TEX_COORDS),e.link(),e.updateUniforms(),this._gayShader=e,e},n.prototype.setProgram=function(e,t){if(e&&t){if(e._sgNode&&(e=e._sgNode),cc.sys.isNative){var i=cc.GLProgramState.getOrCreateWithGLProgram(t);e.setGLProgramState(i)}else e.setShaderProgram(t);var o=e.children;if(o)for(var n=0;n<o.length;n++)this.setProgram(o[n],t)}},n.prototype.showHintMessage=function(e,t,i){var o=this,n=cc.winSize;if(i=i||1.35,(t=t||this.currScene()).showHintMsgNum){if("number"==typeof t.showHintMsgNum){if(t.showHintMsgNum>1)return;t.showHintMsgNum++}}else t.showHintMsgNum=1;var a=function(){var a=Math.min(30*e.length+100,600),s=cc.instantiate(o._hintNodePrefab);s.width=a,s.getChildren()[0].width=a,s.setPosition(cc.v2(n.width/2,n.height/2)),s.getChildren()[0].getComponent(cc.Label).string=e,t.addChild(s,cc.macro.MAX_ZINDEX);var c={onDone:function(e){s.destroy(),"number"==typeof t.showHintMsgNum&&t.showHintMsgNum--}};s.runAction(cc.sequence(cc.moveBy(.2,cc.v2(0,25)),cc.delayTime(i),cc.moveBy(.15,cc.v2(0,25)),cc.callFunc(c.onDone,c)))};o._hintNodePrefab?a():cc.loader.loadRes("/platf/HintMessageNode",cc.Prefab,function(e,t){o._hintNodePrefab=t,a()})},n.prototype.loadScene=function(e,t,i){this._paramData=t,i?cc.director.loadScene(e,i):cc.director.loadScene(e)},n.prototype.loadLoginScene=function(e,t){var i=this,o=function(){i._preloadNodeScenesDone=!0,i.loadScene("LoginScene",e,t)},n=i._preloadNodeScenes;if(!i._preloadNodeScenesDone&&n&&n.length)for(var a=n.length,s=0;s<a;s++)cc.director.preloadScene(n[s],function(){},function(e,t){--a<1&&o()});else o()},n.prototype.openShopDialog=function(e,t){this.openDialog("ShopListDialog",e,t)},n.prototype.loadLobbyScene=function(e,t){this.loadScene("LobbyScene",e,t)},n.prototype.currScene=function(){return cc.director.getScene()},n.prototype.loadSceneByWaiting=function(e,t,i){var o=this;o.openDialog("Waiting",null,function(n){o.loadScene(e,t,i)})},n.prototype.loadUserFace=function(e,t,i){if(e&&t){var o=this;if(t.cc_faceSpriteFrame&&t.cc_faceSpriteFrame.isValid)e.spriteFrame=t.cc_faceSpriteFrame;else if(t.face&&(t.face.indexOf("http")>=0||t.face.indexOf(".png")>=0)){var n=t.face;t.face.indexOf("http")<0&&(n=o._apphost+(0===t.face.indexOf("/")?"":"/")+t.face),cc.loader.load({url:n,type:"png"},function(a,s){if(a&&cc.log("\u52a0\u8f7d\u5934\u50cf("+n+")\u5931\u8d25: "+a),s){var c=o.getFaceImages(t.gender);e.spriteFrame=c[0];var r=new cc.SpriteFrame(s);e.spriteFrame=r}else{c=o.getFaceImages(t.gender);var l=(t.userid||t.kefuid||0)%c.length;if(t.face){var d=parseInt(t.face);d&&d>=1&&d<=c.length&&(l=d-1)}r=c[l];e.spriteFrame=r}i&&i(t,r)})}else{var a=o.getFaceImages(t.gender),s=(t.userid||t.kefuid||0)%a.length;if(t.face){var c=parseInt(t.face);c&&c>=1&&c<=a.length&&(s=c-1)}var r=a[s];e.spriteFrame=r,i&&i(t,r)}}},n.prototype.waiting=function(e,t){var i=this;i.openDialog("Waiting",null,function(o){if(e){var n={onDone:function(){i.closeDialog(o,!0)}};o.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(n.onDone,n)))}t&&t(o)})},n.prototype.openDialog=function(e,t,i,o,n,a,s){var c="Waiting"!=e,r=this;cc.loader.loadRes(e.indexOf("/")>0?e:"platf/"+e,function(l,d){var p=cc.instantiate(d),h=cc.winSize,u=cc.v2(h.width/2,h.height/2);p.setPosition(u),r._paramData=t,i&&i(p);var g=function(){o?cc.director.getScene().addChild(p,o):cc.director.getScene().addChild(p),!(c&&!n||a)||void 0!=a&&1!=a||r.playClickEffect(),c&&s&&s.action?(s.action&&s.init(p),p.runAction(s.action)):c&&!n&&(p.setScale(.3),p.opacity=50,p.runAction(cc.spawn(cc.scaleTo(.15,1).easing(cc.easeIn(2)),cc.fadeTo(.15,255).easing(cc.easeIn(2)))))},f=p.getComponent(e.lastIndexOf("/")>0?e.substring(e.lastIndexOf("/")+1):e);f&&f.preLoad?f.preLoad(p,g):g()})},n.prototype.openConfirmDialog=function(e,t,i,o){this.openDialog("ConfirmDialog",{confirmTxt:e,sureFunc:t,cancelFunc:i,closeFunc:o})},n.prototype.openConfirmLeftDialog=function(e,t,i,o){this.openDialog("ConfirmDialog",{style:"left",confirmTxt:e,sureFunc:t,cancelFunc:i,closeFunc:o})},n.prototype.openAlertDialog=function(e,t){this.openDialog("ConfirmDialog",{alert:!0,confirmTxt:e,closeFunc:t},null,5e6)},n.prototype.openAlertLeftDialog=function(e,t){this.openDialog("ConfirmDialog",{alert:!0,style:"left",confirmTxt:e,closeFunc:t},null,5e6)},n.prototype.closeDialog=function(e,t){e&&e.isValid&&(!t&&this._closeEffect&&this.playAudioEffect(this._closeEffect),e.node&&e.node.destroy(),e.destroy())},n.prototype.adaptScreen=function(e){var t=cc.view.getFrameSize(),i=e&&e.node?e.node:e;return!!(i&&i.getComponent&&t.width/t.height>1.789)&&((e=i.getComponent(cc.Canvas))&&(e.fitWidth=!1,e.fitHeight=!0),!0)},n.prototype.initUIResource=function(e){var t=this,i=0;cc.loader.loadRes("/platf/audio/clickbtn",cc.AudioClip,function(o,n){t._clickEffect=n,3==++i&&e&&e()}),cc.loader.loadRes("/platf/audio/closedialog",cc.AudioClip,function(o,n){t._closeEffect=n,3==++i&&e&&e()}),cc.loader.loadRes("/platf/audio/gamebg",cc.AudioClip,function(o,n){t._defBgMusic=n,3==++i&&e&&e()}),cc.loader.loadResDir("/platf/headimg",cc.SpriteFrame,function(e,i){if(!e){var o=[],n=[];i.sort(function(e,t){return e._name>t._name?1:-1});for(var a=0;a<i.length;a++){(i[a]._name.indexOf("women")>=0?n:o).push(i[a])}t._faceMenImages=o,t._faceWomenImages=n}}),t._hintNodePrefab||cc.loader.loadRes("/platf/HintMessageNode",cc.Prefab,function(e,i){t._hintNodePrefab=i})},n.prototype.playClickEffect=function(){if(this._clickEffect)return this.playAudioEffect(this._clickEffect)},n.prototype.isAllowAudioMusic=function(){return 1!=this.getStorageValue("play_audio_bgmusic",2)},n.prototype.playLobbyMusic=function(){this._defBgMusicID&&this._defBgMusicID==this._currBgMusicID||this.playAudioMusic()},n.prototype.playAudioMusic=function(e,t){if(e||(e=this._defBgMusic,t=!0),e&&(this._currBgMusic&&cc.audioEngine.stopMusic(),this._currBgMusic=e,this.isAllowAudioMusic()))return cc.audioEngine.stopAll(),this._currBgMusicID=cc.audioEngine.playMusic(e,t),e==this._defBgMusic&&(this._defBgMusicID=this._currBgMusicID),this._currBgMusicID},n.prototype.resumeAudioMusic=function(){if(this._currBgMusic&&this.isAllowAudioMusic())return cc.audioEngine.stopMusic(),this._currBgMusicID=cc.audioEngine.playMusic(this._currBgMusic,!0),this._currBgMusicID},n.prototype.allowAudioMusic=function(){this.setStorageValue("play_audio_bgmusic",2),cc.audioEngine.stopAll(),this._currBgMusic&&(this._currBgMusicID=cc.audioEngine.playMusic(this._currBgMusic,!0))},n.prototype.stopAudioMusic=function(){this._currBgMusicID&&(cc.audioEngine.stop(this._currBgMusicID),this._currBgMusicID=null),cc.audioEngine.stopAll()},n.prototype.forbidAudioMusic=function(){this.setStorageValue("play_audio_bgmusic",1),cc.audioEngine.stopAll()},n.prototype.isAllowAudioEffect=function(){return 1!=this.getStorageValue("play_audio_effect",2)},n.prototype.playAudioEffect=function(e,t){if(e&&this.isAllowAudioEffect())return cc.audioEngine.playEffect(e,!!t)},n.prototype.stopAudioEffect=function(e){cc.audioEngine.stopEffect(e)},n.prototype.allowAudioEffect=function(){this.setStorageValue("play_audio_effect",2),cc.audioEngine.setEffectsVolume(1)},n.prototype.forbidAudioEffect=function(){this.setStorageValue("play_audio_effect",1)},n.prototype.setStorageValue=function(e,t){cc.sys.localStorage.setItem(this.apposid+":"+e,""+t)},n.prototype.getStorageValue=function(e,t){var i=cc.sys.localStorage.getItem(this.apposid+":"+e);return i||t},n.prototype.getAppAgent=function(){if(!this._appAgent){var e=cc.view.getFrameSize();cc.log("winSize = "+JSON.stringify(cc.winSize)),this._appAgent=this.apposid+"/"+this.getVersion()+"; "+this.getNativeDeviceOS()+" "+Math.ceil(e.width)+"*"+Math.ceil(e.height)+"*"+cc.view.getDevicePixelRatio()+";"}return this._appAgent},n.prototype.http=function(e,t,i,o){var n=this,a=e.method||"GET",s=e.url||("string"==typeof e?e:"");0!=s.indexOf("http")&&(s=this._apihost+s);try{if(e.data){var c=[];for(var r in e.data){var l=e.data[r];"string"==typeof l?l=encodeURIComponent(l):"number"!=typeof l&&(l=encodeURIComponent(JSON.stringify(l))),c.push(r+"="+l)}s+="?"+c.join("&")}var d=cc.loader.getXMLHttpRequest();e.responseType&&(d.responseType=e.responseType),e.timeout&&(d.timeout=e.timeout),"GET"==a?d.open("GET",s,!0):d.open("POST",s),d.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),"undefined"!=typeof document&&(d.setRequestHeader("retcode","0"),d.setRequestHeader("retinfo",""));var p=e.headers;if(p)for(var h in p)p[h]&&d.setRequestHeader(h,p[h]);d.setRequestHeader("App-Agent",this._appAgent),this._appsessionid&&d.setRequestHeader("JSESSIONID",this._appsessionid),i&&(d.ontimeout=function(e){i(e)}),o&&(d.onerror=function(e){o(e)}),d.onreadystatechange=function(){if(4==d.readyState)if(200==d.status){var e=null;try{e=d.getResponseHeader("retcode")}catch(e){}"30020001"==e?(n._checkTimer&&(clearInterval(n._checkTimer),n._checkTimer=null),n.openAlertDialog("\u7528\u6237\u767b\u9646\u72b6\u6001\u5df2\u5931\u6548\uff0c\u8bf7\u91cd\u65b0\u767b\u9646!",function(){app.loadLoginScene()})):t&&t(!0,d)}else t&&t(!1,d)},"GET"==a?d.send():d.send(null)}catch(e){t&&t(!1,e)}},n.prototype.httpJson=function(e,t){this.http(e,function(e,i){if(e){var o=null;try{o=JSON.parse(i.responseText)}catch(e){t&&t(!1,i,i)}o&&t&&t(!0,o,i)}else t&&t(e,i,i)})},n.prototype.httpJsonByWaiting=function(e,t,i){var o=this;o.openDialog("Waiting",null,function(n){o.httpJson(e,function(e,a,s){try{i||o.closeDialog(n,!0),e?t&&t(!0,a,n,s):t&&t(e,s,n,s)}catch(e){o.showHintMessage(s?"\u53d1\u751f\u5f02\u5e38("+s.status+"):"+s.responseText:a+": "+e,null,15),cc.log(e),o.closeDialog(n)}})})},n.prototype.requestJson=function(e,t,i){var o=this;if(this._routenet)return i||"string"!=typeof e&&e.denytimeout||(i=function(){o.showHintMessage("\u4e0e\u670d\u52a1\u5668\u901a\u4fe1\u8d85\u65f6",null,5)}),void this._socket.sendHttpRouteMessage(e,t,i);this.http(e,function(e,i){if(e){var o=null;try{o=JSON.parse(i.responseText)}catch(e){t&&t(!1,i,i)}o&&t&&t(!0,o,i)}else t&&t(e,i,i)})},n.prototype.requestJsonByWaiting=function(e,t,i){var o=this;o.openDialog("Waiting",null,function(n){var a=null;"string"!=typeof e&&e.denytimeout||(a=function(){i||o.closeDialog(n,!0),o.showHintMessage("\u4e0e\u670d\u52a1\u5668\u901a\u4fe1\u8d85\u65f6",null,5)}),o.requestJson(e,function(e,a,s){try{i||o.closeDialog(n,!0),e?t&&t(!0,a,n,s):t&&t(e,s,n,s)}catch(e){o.showHintMessage(s?"\u53d1\u751f\u5f02\u5e38("+s.status+"):"+s.responseText:a+": "+e,null,15),cc.log(e),o.closeDialog(n)}},a)})},n.prototype.loadHandler=function(t){var i=null;if(t=t[0].toUpperCase()+t.substring(1),this._platfModuleHandlers&&((i=this._platfModuleHandlers[t.toLowerCase()])||(i=this._platfModuleHandlers[t])),!i)try{i=window[t+"Handler"]||e(t+"Handler")}catch(e){}if(!i)try{"m"==t[t.length-2]&&"j"==t[t.length-1]&&(i=window.MjHandler||e("MjHandler"))}catch(e){}return i},n.prototype.loadGameModule=function(e){if(e&&e.gameid&&!(e.gameid.length<2)){var t=this;if(!e._waitNode&&!e.direct)return cc.log("loadGameModule\u9700\u8981\u52a0\u8f7dWaiting"),void t.openDialog("Waiting",null,function(i){e._waitNode=i,t.loadGameModule(e)});var i=e._waitNode,o=e.gameid,n="_game_"+o;o=o[0].toUpperCase()+o.substring(1),cc.log("loadGameModule--\u5c1d\u8bd5\u52a0\u8f7d: "+o+"Handler");var a=t.loadHandler(o);if(a&&(!t._lastedGames||t._lastedGames[e.gameid]||"m"==o[o.length-2]&&"j"==o[o.length-1])){cc.log("loadGameModule--"+o+"\u5df2\u7ecf\u52a0\u8f7d\u8fc7\u4e86"),e.prepare&&e.prepare(),t.closeDialog(i,!0);try{(new a).run(e)}catch(i){cc.log("app.loadGameModule: new Handler().run error",i),e.callBackHandlerFailed?e.callBackHandlerFailed():t.loadLobbyScene()}}else if(cc.sys.isNative&&jsb){var s=jsb.fileUtils?jsb.fileUtils.getWritablePath():"/",c=cc.sys.os==cc.sys.OS_ANDROID?"_android":cc.sys.os==cc.sys.OS_IOS?"_ios":"",r=s+"remote-assets"+n,l=e._hintNode,d=e._hintNodeLabel;cc.log("loadGameModule--\u52a0\u8f7d\u4e4b\u524d\u5224\u65adwindow._CCSettings\u662f\u5426\u5b58\u5728 : "+window._CCSettings),window._CCSettings=void 0;try{if(window.require("src/settings"+n+".js"),!window._CCSettings)try{window.require(r+"/src/settings"+n+".js")}catch(e){}}catch(e){cc.error("src/settings"+n+".js \u52a0\u8f7d\u5931\u8d25");try{window.require(r+"/src/settings"+n+".js")}catch(e){cc.error(r+"/src/settings"+n+".js \u52a0\u8f7d\u5931\u8d25")}}if(t._lastedGames&&!t._lastedGames[e.gameid]||!window._CCSettings){cc.log("loadGameModule--\u9700\u8981\u4e0b\u8f7d\u5b89\u88c5"),t._hintNodePrefab||cc.loader.loadRes("/platf/UpdateSubgameNode",cc.Prefab,function(e,i){t._hintNodePrefab=i});var p=!1,h=r+"/project"+n+c+".manifest";if(!jsb.fileUtils.isFileExist(h)){cc.log("\u4e0d\u5b58\u5728\u5b50\u6e38\u620fmanifest\u6587\u4ef6: "+h),p=!0;var u=t.getLocalManifest().getPackageUrl();cc.log("\u672c\u5730\u5927\u5385manifest\u6587\u4ef6: verpath="+u);var g={packageUrl:(u=u.substring(0,u.lastIndexOf("/v")))+n+"/v0.0.0"+n+"/",remoteManifestUrl:u+n+"/project"+n+c+".manifest",remoteVersionUrl:u+n+"/version"+n+c+".manifest",version:"0.0.0",assets:{},searchPaths:[]};jsb.fileUtils.createDirectory(r),jsb.fileUtils.writeStringToFile(JSON.stringify(g),h)}var f=new jsb.AssetsManager(h,r,function(e,t){if(cc.log("\u7248\u672c\u6bd4\u8f83: \u672c\u5730\u7248\u672c: "+e+", \u8fdc\u7a0b\u7248\u672c: "+t),e==t)return 0;for(var i=e.split("."),o=t.split("."),n=0;n<i.length;++n){var a=parseInt(i[n]),s=parseInt(o[n]||0);if(a!=s)return a-s}return o.length>i.length?-1:0}),m=function(i){cc.log("\u6267\u884c ----- updateCb -----");var o=!1,n=!1,a=!1;switch(i.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:cc.log("\u6ca1\u6709\u627e\u5230\u672c\u5730manifest\u6587\u4ef6\uff0c \u8df3\u8fc7\u70ed\u66f4\u65b0\uff01"),n=!0;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:var s=i.getMessage();cc.log("\u5df2\u66f4\u65b0: "+s+" "+i.getDownloadedFiles()+" / "+i.getTotalFiles());var c=parseInt(100*i.getDownloadedFiles()/i.getTotalFiles());c||(c=0),e.uiBarProgress?e.uiBarProgress(l,c):d&&(l.active=!0,d.string="\u66f4\u65b0\u6e38\u620f ("+(c<10?" ":"")+c+" %)");break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:cc.log("\u4e0b\u8f7d\u6216\u89e3\u6790manifest\u6587\u4ef6\u5931\u8d25\uff0c \u8df3\u8fc7\u70ed\u66f4\u65b0\uff01"),n=!0;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:cc.log("\u5df2\u7ecf\u66f4\u65b0\u5230\u6700\u65b0\u7248\u672c\u4e86\uff01"),n=!0,a=!0;break;case jsb.EventAssetsManager.ASSET_UPDATED:cc.log("\u5df2\u7ecf\u66f4\u65b0\u8fc7\uff1a"+i.getEventCode()+", "+i.getMessage()+", "+i.getAssetId());break;case jsb.EventAssetsManager.UPDATE_FINISHED:cc.log("\u5df2\u66f4\u65b0\u5b8c\u6210: "+i.getMessage()),o=!0;break;case jsb.EventAssetsManager.UPDATE_FAILED:cc.log("\u66f4\u65b0UPDATE_FAILED: "+i.getMessage());break;case jsb.EventAssetsManager.ERROR_UPDATING:cc.log("\u66f4\u65b0ERROR_UPDATING: "+i.getMessage());break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:cc.log("\u66f4\u65b0ERROR_DECOMPRESS: "+i.getMessage());break;default:cc.log("\u66f4\u65b0\u5176\u4ed6\u4e8b\u4ef6Code: "+i.getEventCode())}if(n&&(f.setEventCallback(null),cc.log("\u70ed\u66f4\u65b0\u5931\u8d25\uff01")),e._hintNode=l,e._hintNodeLabel=d,a)t.loadGameModule(e);else if(o){t._lastedGames&&(t._lastedGames[e.gameid]=!0),f.setEventCallback(null);var r=f.getLocalManifest().getSearchPaths();cc.log("\u65b0\u52a0\u7684SearchPaths: ");for(var p=0;p<r.length;p++)cc.log("    NewSearchPaths["+p+"]: "+r[p]);var h=[];for(p=0;p<r.length;p++)h.push(r[p]);var u=jsb.fileUtils.getSearchPaths();for(p=0;p<u.length;p++)h.indexOf(u[p])>=0||h.push(u[p]);cc.sys.localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(h)),jsb.fileUtils.setSearchPaths(h),t.loadGameModule(e)}},v=function(){var i=cc.winSize;l=cc.instantiate(e.uiBarNode||t._hintNodePrefab),e.uiBarInit?e.uiBarInit(l,p):(l.setPosition(cc.v2(i.width/2,i.height/2)),d=l.getChildren()[0].getComponent(cc.Label),p?d.string="\u5b89\u88c5\u6e38\u620f\u2026\u2026":l.active=!1,t.currScene().addChild(l,cc.macro.MAX_ZINDEX))};f.setEventCallback(function(i){cc.log("\u6267\u884c ----- checkCb -----");var o=!1,n=!1;switch(i.getEventCode()){case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:return cc.log("\u65e0\u6cd5\u4e0b\u8f7d\u6216\u89e3\u6790\u8fdc\u7a0b\u7248\u672c\u4fe1\u606f"),f.setEventCallback(null),void(e.callBackHandlerFailed&&e.callBackHandlerFailed());case jsb.EventAssetsManager.NEW_VERSION_FOUND:cc.log("\u53d1\u73b0\u6709\u65b0\u7248\u672c\uff0c\u9700\u8981\u70ed\u66f4\u65b0\uff01"),n=!0,f.setEventCallback(m),v(),f.update();break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:cc.log("\u68c0\u6d4b\u5230\u5df2\u7ecf\u662f\u6700\u65b0\u7248\u672c\u4e86\uff01"),o=!0;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:return void cc.log("\u68c0\u6d4b\u8fc7\u7a0b\u4e2d.");default:return void cc.log("\u68c0\u6d4b\u5176\u4ed6\u4e8b\u4ef6Code: "+i.getEventCode())}if(n||f.setEventCallback(null),o)return e._hintNode=l,e._hintNodeLabel=d,t._lastedGames&&(t._lastedGames[e.gameid]=!0),void t.loadGameModule(e)}),f.checkUpdate()}else{cc.log("loadGameModule--\u5df2\u7ecf\u5b89\u88c5\u4e86, \u52a0\u8f7d\u4e86src/settings"+n+".js");var y=window._CCSettings;window._CCSettings=void 0;for(var S=y.scenes||[],b=0;b<S.length;b++)cc.game._sceneInfos.push(S[b]);var N=window._ALL_SETTINGS;if(!N){try{if(window.require("src/settings.js"),!window._CCSettings)try{window.require(s+"src/settings.js")}catch(e){}}catch(e){cc.error("src/settings.js \u52a0\u8f7d\u5931\u8d25");try{window.require(s+"src/settings.js")}catch(e){cc.error(s+"src/settings.js \u52a0\u8f7d\u5931\u8d25")}}N=window._CCSettings,window._ALL_SETTINGS=N}for(var C in y.packedAssets)for(var D=y.packedAssets[C],w=0;w<D.length;++w)"number"==typeof D[w]&&(D[w]=y.uuids[D[w]]);for(var k in y.rawAssets.assets){"number"==typeof(H=(j=y.rawAssets.assets[k])[1])&&(j[1]=y.assetTypes[H])}for(var A in y.subpackages){if(J=y.subpackages[A].uuids)for(var _=0,L=J.length;_<L;_++)"number"==typeof J[_]&&(J[_]=y.uuids[J[_]])}for(var I in y.packedAssets)N.packedAssets[I]=y.packedAssets[I];for(var k in y.rawAssets.assets)N.rawAssets.assets[k]=y.rawAssets.assets[k];for(var A in y.subpackages)N.subpackages[A]=y.subpackages[A];for(var P in y.scenes)N.scenes.push(y.scenes[P]);var B=N;if(!B.debug){var M=B.uuids,T=B.rawAssets,R=B.assetTypes,O=B.rawAssets={};for(var F in T){var E=T[F],x=O[F]={};for(var U in E){var j,H;"number"==typeof(H=(j=E[U])[1])&&(j[1]=R[H]),x[M[U]||U]=j}}for(S=B.scenes,b=0;b<S.length;++b){var G=S[b];"number"==typeof G.uuid&&(G.uuid=M[G.uuid])}var W=B.packedAssets;for(var C in W)for(D=W[C],w=0;w<D.length;++w)"number"==typeof D[w]&&(D[w]=M[D[w]]);var V=B.subpackages;for(var A in V){var J;if(J=V[A].uuids)for(_=0,L=J.length;_<L;_++)"number"==typeof J[_]&&(J[_]=M[J[_]])}}cc.AssetLibrary.init({dynamic:!0,libraryPath:"res/import",rawAssetsBase:"res/raw-",rawAssets:N.rawAssets,packedAssets:N.packedAssets,md5AssetsMap:N.md5AssetsMap,subpackages:N.subpackages});var q="src/project"+n+".js";if(cc.log("loadGameModule--\u51c6\u5907\u52a0\u8f7d: "+q),window.require(q),a=t.loadHandler(o)){e.prepare&&e.prepare(),l&&l.destroy(),e.uiBarDestroy&&e.uiBarDestroy(l),t.closeDialog(i,!0);try{(new a).run(e)}catch(i){e.callBackHandlerFailed?e.callBackHandlerFailed():t.loadLobbyScene()}}else cc.log("loadGameModule--require\u7ed3\u675f\u51c6\u5907load: "+q),cc.loader.load([q],function(n){if(n){if(t.closeDialog(i,!0),cc.log("loadGameModule--"+q+"\u6587\u4ef6\u5c45\u7136\u4e0d\u5b58\u5728\uff0c\u65e0\u6cd5\u52a0\u8f7d\u6e38\u620f"),!e.callBackHandlerFailed)throw new Error(JSON.stringify(n));e.callBackHandlerFailed()}if(cc.log("loadGameModule--\u5df2\u7ecf\u5b89\u88c5\u4e86, \u52a0\u8f7d\u4e86"+q),!(a=t.loadHandler(o))){if(t.closeDialog(i,!0),cc.log("loadGameModule--\u65e0\u6cd5\u52a0\u8f7dHandler"),!e.callBackHandlerFailed)throw new Error("\u65e0\u6cd5\u5b9e\u4f8b\u5316"+o+"Handler");e.callBackHandlerFailed()}e.prepare&&e.prepare(),l&&l.destroy(),e.uiBarDestroy&&e.uiBarDestroy(l),t.closeDialog(i,!0);try{(new a).run(e)}catch(i){e.callBackHandlerFailed?e.callBackHandlerFailed():t.loadLobbyScene()}})}}else a||cc.sys.isNative||e.callBackHandlerFailed&&e.callBackHandlerFailed()}},n.prototype.captureScreen=function(e,t){var i=new cc.Node;e?e.addChild(i):i.parent=cc.director.getScene();var o=i.addComponent(cc.Camera);o.cullingMask=4294967295;var n=new cc.RenderTexture,a=cc.game._renderContext,s=Math.ceil(cc.visibleRect.width),c=Math.ceil(cc.visibleRect.height);n.initWithSize(s,c,a.STENCIL_INDEX8),o.targetTexture=n;var r=[];if(t&&t.length)for(var l=0;l<t.length;l++)t[l].active&&(t[l].active=!1,r.push(t[l]));o.render();for(l=0;l<r.length;l++)r[l].active=!0;for(var d=n.readPixels(),p=new Uint8Array(s*c*4),h=4*s,u=0;u<c;u++){var g=(c-1-u)*s*4,f=u*s*4;for(l=0;l<h;l++)p[f+l]=d[g+l]}return i.removeFromParent(),{data:p,width:s,height:c}},n.prototype.getQueryStringFromURL=function(e,t,i){if(!e)return i;var o=e.indexOf(t+"=");if(o<0&&(o=e.indexOf(t+":")),o<0)return i;var n=e.substring(o+t.length+1);return(o=n.indexOf("&"))<0&&(o=n.indexOf("/")),o<0?n:n.substring(0,o)},n.prototype.callBackLaunchAppByThird=function(e){if(e||(e=app.getNativeLaunchData()),cc.log("\u63a5\u6536\u5230\u542f\u52a8\u53c2\u6570: "+e),!e)return!1;if(0==e.indexOf("http")&&(e="applink://"+(e=(e=(e=e.replace("/open_","/")).substring(e.indexOf("//")+2)).substring(e.indexOf("/")+1))),app.getCurrgame())return app.showHintMessage("\u6b63\u5728\u6e38\u620f\u4e2d\uff0c\u4e0d\u80fd\u8df3\u8f6c"),!1;var t=e.indexOf("//");if(t>0&&(e=e.substring(t+2)),(t=e.indexOf("?"))<0&&(t=e.indexOf("/")),t<1)return!1;var i=e.substring(0,t);return app.loadGameModule({gameid:i,launchurl:e}),!0},n.prototype.setNativeAppInited=function(){cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","setAppInited","()V"):cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("NativeHelper","setAppInited")},n.prototype.setNativeOrientation=function(e){if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","setOrientation","(I)V",e||1):cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("NativeHelper","setOrientation:",e||1),cc.sys.isNative){var t=cc.winSize.width,i=cc.winSize.height;2==e?(cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT),cc.view.setFrameSize(i,t)):(cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE),cc.view.setFrameSize(t,i))}},n.prototype.getNativeLaunchData=function(){try{if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID)return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getLaunchData","()Ljava/lang/String;");if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS)return jsb.reflection.callStaticMethod("NativeHelper","getLaunchData");if(!cc.sys.isNative&&"undefined"!=typeof document){var e=""+window.location.href,t=e.indexOf("?");return t>0&&(e=e.substring(t+1)).indexOf("//")>0?e:""}}catch(e){}return""},n.prototype.isNativeQQAppInstalled=function(){try{if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID)return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","isQQAppInstalled","()Z");if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS)return jsb.reflection.callStaticMethod("NativeHelper","isQQAppInstalled")}catch(e){}return!1},n.prototype.callBackPickPhoto=function(e){this._pickPhotoCallback&&this._pickPhotoCallback(e)},n.prototype.nativeShowPickPhoto=function(e,t,i){if("function"==typeof e?(i=e,e=null):"function"==typeof t&&(i=t,t=null),e||(e=this._apihost+"/pipes/upload/chatfile"),this._appsessionid&&(e+="?JSESSIONID="+this._appsessionid),t||(t=this._apihost+"/dir/chatfile"),this._pickPhotoCallback=i,cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID){var o=jsb&&jsb.fileUtils?jsb.fileUtils.getWritablePath():"/";jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showPickPhoto","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",o,e,t)}else if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS){o=jsb&&jsb.fileUtils?jsb.fileUtils.getWritablePath():"/";jsb.reflection.callStaticMethod("NativeHelper","showPickPhoto:uploadurl:downloadurl",o,e,t)}else this.showHintMessage("\u672c\u5730\u6253\u5f00\u76f8\u518c\u63a5\u53e3\u8c03\u7528\u4e0d\u5f53")},n.prototype.callBackLoginByQQ=function(e,t){this._loginQQCallback&&(this._loginQQCallback(e,t),this._loginQQCallback=null)},n.prototype.nativeLoginByQQ=function(e,t){this._loginQQCallback=t,cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","loginByQQ","(Ljava/lang/String;)V",e.state||"get_user_info"):cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod("NativeHelper","loginByQQ:",e.state||"get_user_info"):this.showHintMessage("\u672c\u5730QQ\u767b\u5f55\u63a5\u53e3\u8c03\u7528\u4e0d\u5f53")},n.prototype.isNativeWXAppInstalled=function(){try{if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID)return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","isWXAppInstalled","()Z");if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS)return jsb.reflection.callStaticMethod("NativeHelper","isWXAppInstalled")}catch(e){}return!1},n.prototype.callBackLoginByWechat=function(e,t){this._loginWechatCallback&&(t&&(t=t.replace(/("|')/g,"")),this._loginWechatCallback(e,t),this._loginWechatCallback=null)},n.prototype.nativeLoginByWechat=function(e,t){this._loginWechatCallback=t,cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","loginByWechat","(Ljava/lang/String;)V",e.state||"1"):cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod("NativeHelper","loginByWechat:",e.state||"1"):this.showHintMessage("\u672c\u5730\u5fae\u4fe1\u767b\u5f55\u63a5\u53e3\u8c03\u7528\u4e0d\u5f53")},n.prototype.callBackPayByIOS=function(e){cc.log("callBackPayByIOS---"+e),this._payCallback&&(this._payCallback(e),this._payCallback=null)},n.prototype.nativePayByIOS=function(e,t){cc.sys.os==cc.sys.OS_IOS&&app.isIosAuditVer()&&(this._payCallback=t,jsb.reflection.callStaticMethod("NativeHelper","payByIOS:goodstype:",""+e.goodsid,""+e.goodstype))},n.prototype.callBackPayByWechat=function(e){cc.log("callBackPayByWechat---"+e),this._payCallback&&(this._payCallback(e),this._payCallback=null)},n.prototype.nativePayByWechat=function(e,t){this._payCallback=t,cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","payByWechat","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",e.appid,e.partnerid,e.prepayid,e.timestamp,e.noncestr,e.packagestr,e.sign):cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("NativeHelper","payByWechat:partnerid:prepayid:timestamp:noncestr:packagestr:sign:",e.appid,e.partnerid,e.prepayid,e.timestamp,e.noncestr,e.packagestr,e.sign)},n.prototype.nativeCaptureScreenFile=function(e,t){var i=this.captureScreen(e,t);if(cc.sys.isNative){var o=jsb.fileUtils.getWritablePath()+"mycapture_screen.png";return jsb.saveImageData(i.data,i.width,i.height,o),o}},n.prototype.callBackShareEvent=function(e,t,i,o){cc.log("callBackShareEvent---type="+e+", kind="+t+", errCode="+i+", errMsg="+o),this._shareCallback&&(this._shareCallback(e,t,i,o),this._shareCallback=null)},n.prototype.nativeShareUrlByWechat=function(e,t){this._shareCallback=t,e.type||(e.type="WXSceneTimeline"),0===e.url.indexOf("/")&&(e.url=this.getAppHost()+e.url),e.url.indexOf("?")>=0?e.url+="&paramjson="+encodeURIComponent(JSON.stringify(e)):e.url+="?paramjson="+encodeURIComponent(JSON.stringify(e)),cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","shareUrlByWechat","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",""+e.type,e.title,e.desc,e.url):cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("NativeHelper","shareUrlByWechat:title:desc:url:",""+e.type,e.title,e.desc,e.url)},n.prototype.nativeShareScreenByWechat=function(e,t){this._shareCallback=t,e||(e={}),cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","shareScreenByWechat","(Ljava/lang/String;)V",e.file||""):cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("NativeHelper","shareScreenByWechat:",e.file||"")},n.prototype.nativeOpenWebView=function(e,t,i){if("function"==typeof t&&(i=t,t=null),t||(t=""),cc.sys.os==cc.sys.OS_IOS&&e&&0==e.indexOf("http")&&e.indexOf("uploadurl=")<0&&t.indexOf("pay:")<0)return this.nativeOpenBrowser(e,t);0==t.indexOf("pay:")&&(t=t.substring("pay:".length)),this._removeWebViewCallBack=i||null,cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","openWebView","(Ljava/lang/String;Ljava/lang/String;)V",e||"",t||""):cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("NativeHelper","openWebView:body:",e||"",t||"")},n.prototype.callBackRemoveWebView=function(){this._removeWebViewCallBack?this._removeWebViewCallBack():this.setNativeOrientation(1)},n.prototype.nativeOpenBrowser=function(e,t){cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","openBrowser","(Ljava/lang/String;Ljava/lang/String;)V",e||"",t||""):cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod("NativeHelper","openBrowser:body:",e||"",t||""):cc.sys.isNative||"undefined"==typeof document||window.open(e)},n.prototype.callBackUploadedTalkFile=function(e,t){cc.log("callBackUploadedTalkFile---code:"+e+", fileID:"+t),this._uploadedTalkCallback&&this._uploadedTalkCallback(e,t)},n.prototype.nativeStartVoiceTalk=function(e){this._uploadedTalkCallback=e;try{cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","startVoiceTalk","()V"):cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod("NativeHelper","startVoiceTalk"):e&&e(-1,"")}catch(e){cc.log("\u8c03\u7528\u3010nativeStartVoiceTalk\u3011\u65b9\u6cd5\u5f02\u5e38: "+e)}},n.prototype.nativeStopVoiceTalk=function(){try{cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","stopVoiceTalk","()V"):cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("NativeHelper","stopVoiceTalk")}catch(e){cc.log("\u8c03\u7528\u3010nativeStopVoiceTalk\u3011\u65b9\u6cd5\u5f02\u5e38: "+e)}},n.prototype.callBackStartPlayTalkFile=function(e,t){cc.log("callBackStartPlayTalkFile---"+t),this._startPlayTalkCallback&&this._startPlayTalkCallback(e,t)},n.prototype.callBackEndPlayTalkFile=function(e){cc.log("callBackEndPlayTalkFile---"+e),this._endPlayTalkCallback&&this._endPlayTalkCallback(e)},n.prototype.nativePlayTalkFile=function(e,t,i){this._startPlayTalkCallback=t,this._endPlayTalkCallback=i;try{cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","playTalkFile","(Ljava/lang/String;)V",e||""):cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("NativeHelper","playTalkFile:",e||"")}catch(e){cc.log("\u8c03\u7528\u3010nativePlayTalkFile\u3011\u65b9\u6cd5\u5f02\u5e38: "+e)}},n.prototype.nativeStopTalkFile=function(){try{cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","stopTalkFile","()V"):cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("NativeHelper","stopTalkFile")}catch(e){cc.log("\u8c03\u7528\u3010nativeStopTalkFile\u3011\u65b9\u6cd5\u5f02\u5e38: "+e)}},n.prototype.copyToClipBoard=function(e){try{if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID)return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","copyToClipBoard","(Ljava/lang/String;)V",e||"");if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS)return jsb.reflection.callStaticMethod("NativeHelper","copyToClipBoard:",e||"")}catch(e){cc.log("\u8c03\u7528\u3010copyToClipBoard\u3011\u65b9\u6cd5\u5f02\u5e38: "+e)}return 0},n.prototype.copyFromClipBoard=function(){try{if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID)return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","copyFromClipBoard","()Ljava/lang/String;");if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS)return jsb.reflection.callStaticMethod("NativeHelper","copyFromClipBoard")}catch(e){cc.log("\u8c03\u7528\u3010copyFromClipBoard\u3011\u65b9\u6cd5\u5f02\u5e38: "+e)}return 0},n.prototype.callBackCreateQRCode=function(e,t){cc.log("callBackCreateQRCode---"+t),this._createQRCodeCallback&&this._createQRCodeCallback(e,t)},n.prototype.nativeCreateQRCode=function(e,t,i,o,n,a,s){"function"==typeof i?(this._createQRCodeCallback=i,i=null):"function"==typeof o?(this._createQRCodeCallback=o,o=null):"function"==typeof n?(this._createQRCodeCallback=n,n=null):"function"==typeof a?(this._createQRCodeCallback=a,a=null):this._createQRCodeCallback=s;try{cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","createQRCode","(Ljava/lang/String;Ljava/lang/String;ILjava/lang/String;ILjava/lang/String;)V",e||"",t||"",i||100,o||"#ff000000",n||1,a||"#ffffffff"):cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod("NativeHelper","createQRCode:url:size:color:logo:bgcolor:",e||"",t||"",i||100,o||"#ff000000",n||1,a||"#ffffffff"):s&&s(-1,"")}catch(e){cc.log("\u8c03\u7528\u3010nativeCreateQRCode\u3011\u65b9\u6cd5\u5f02\u5e38: "+e)}},n.prototype.getNativeDeviceOS=function(){try{if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID){for(var e=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getOSVersion","()Ljava/lang/String;"),t=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getPhoneType","()Ljava/lang/String;"),i=[],o=!0,n=0;n<t.length;n++)o&&(" "==t[n]||"\t"==t[n]||t[n]>="0"&&t[n]<="9")?(i.push("/"),t[n]>="0"&&t[n]<="9"&&i.push(t[n]),o=!1):i.push(t[n]);return"android/"+e+"; "+i.join("").replace(/\s/g,"_")+";"}if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS){for(e=jsb.reflection.callStaticMethod("NativeHelper","getOSVersion"),t=jsb.reflection.callStaticMethod("NativeHelper","getPhoneType").replace(/\s/g,"_"),i=[],o=!0,n=0;n<t.length;n++)o&&t[n]>="0"&&t[n]<="9"?(i.push("/"),i.push(t[n]),o=!1):i.push(t[n]);return"ios/"+e+"; "+i.join("")+";"}}catch(e){cc.log("\u8c03\u7528\u3010getNativeDeviceOS\u3011\u65b9\u6cd5\u5f02\u5e38: "+e)}return"web/1.0; "+cc.sys.browserType+"/"+cc.sys.browserVersion+";"},n.prototype.getNativeNetMode=function(){try{if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID)return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getNetMode","()Ljava/lang/String;");if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS)return jsb.reflection.callStaticMethod("NativeHelper","getNetMode")}catch(e){cc.log("\u8c03\u7528\u3010getNativeNetMode\u3011\u65b9\u6cd5\u5f02\u5e38: "+e)}return cc.sys.isNative?"unknown":"web"},n.prototype.getNativeDeviceUUID=function(){var e=this.getStorageValue("device_uuid");return e||(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),e&&this.setStorageValue("device_uuid",e),e},n.prototype.callBackGetLocation=function(e){this._getLocationCallback&&(this._getLocationCallback(e),this._getLocationCallback=null)},n.prototype.getNativeLocation=function(e){this._getLocationCallback=e;var t=this;try{if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID)jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getLocation","()Ljava/lang/String;");else if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS)jsb.reflection.callStaticMethod("NativeHelper","getLocation");else if(window.wx&&wx.getLocation)wx.getLocation({type:"gcj02",success:function(e){var i=e.latitude,o=e.longitude;try{t.callBackGetLocation({latitude:i,longitude:o,street:""})}catch(e){cc.log("\u8c03\u7528\u3010callBackGetLocation\u3011\u65b9\u6cd5\u5f02\u5e38: "+e)}}});else try{t.callBackGetLocation({})}catch(e){cc.log("\u8c03\u7528\u3010callBackGetLocation\u3011\u65b9\u6cd5\u5f02\u5e38: "+e)}}catch(e){cc.log("\u8c03\u7528\u3010getNativeLocation\u3011\u65b9\u6cd5\u5f02\u5e38: "+e),t.callBackGetLocation({})}},n.prototype.distance=function(e,t,i,o){if(!e&&!t)return-1;if(!i&&!o)return-1;var n=function(e){return e*Math.PI/180},a=n(e),s=n(i),c=a-s,r=n(t)-n(o),l=1275627400*Math.asin(Math.sqrt(Math.pow(Math.sin(c/2),2)+Math.cos(a)*Math.cos(s)*Math.pow(Math.sin(r/2),2)));return Math.round(l)},n.prototype.getRandomColor=function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6)},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}),Date.prototype.format||(Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[i]:("00"+t[i]).substr((""+t[i]).length)));return e},Date.prototype.toString=function(){return this.format("yyyy-MM-dd hh:mm:ss")},Date.prototype.toZhString=function(){return this.format("yyyy\u5e74MM\u6708dd\u65e5 hh:mm:ss")},Date.prototype.toDayString=function(){return this.format("yyyy\u5e74MM\u6708dd\u65e5")},Date.prototype.toSimpleDayString=function(){return this.format("yyyy-MM-dd")},Date.prototype.toSimpleMinuteString=function(){return this.format("MM-dd hh:mm")},Date.prototype.toEnMinuteString=function(){return this.format("yyyy/MM/dd hh:mm")},Date.prototype.toHourMinuteString=function(){return this.format("hh:mm")},Date.prototype.toDistanceString=function(){var e=((new Date).getTime()-this.getTime())/1e3;return e<60?"\u521a\u521a":e<180?"1\u5206\u949f\u524d":e<300?"3\u5206\u949f\u524d":e<600?"5\u5206\u949f\u524d":e<1800?"10\u5206\u949f\u524d":e<3600?"\u534a\u5c0f\u65f6\u524d":e<21600?"1\u5c0f\u65f6\u524d":e<43200?"6\u5c0f\u65f6\u524d":e<86400?"\u534a\u5929\u524d":e<259200?"1\u5929\u524d":e<604800?"3\u5929\u524d":e<2592e3?"7\u5929\u524d":e<5184e3?"30\u5929\u524d":this.toSimpleDayString()}),t.exports=n,cc._RF.pop()},{MjHandler:void 0,Socket:"Socket"}],BossComingDialog:[function(e,t,i){"use strict";cc._RF.push(t,"cb44bMyeRtH9JECHBAfs6sD","BossComingDialog"),cc.Class({extends:cc.Component,properties:{iconSprite:cc.Sprite},onLoad:function(){var e=this,t=app.currParamData();this.iconSprite.spriteFrame=t,this.scheduleOnce(function(){app.closeDialog(e)},2)}}),cc._RF.pop()},{}],BtnSelectNode:[function(e,t,i){"use strict";cc._RF.push(t,"5353fIDK8RKhry8rLNuze+F","BtnSelectNode"),cc.Class({extends:cc.Component,properties:{canNode:cc.Node,cantNode:cc.Node,canTitleLabel:cc.Label,canGoodsCoinsLabel:cc.Label,cantTitleLabel:cc.Label,cantBarLabel:cc.Label,cantBarSprite:cc.Sprite,currRocketsLabel:cc.Label,currMissilesLabel:cc.Label,currNuclearsLabel:cc.Label,awardCanNode:cc.Node,awardCanAwardNameLabel:cc.Label,awardCanCoinsLabel:cc.Label,awardCantNode:cc.Node,awardCantBarLabel:cc.Label,awardCantBarSprite:cc.Sprite},onLoad:function(){this.scaleX=0,this.node.setScale(this.scaleX,1)},loadNextFireLevel:function(){var e=this;app.requestJson("/pipes/skywar/loadNextFireLevel",function(t,i){if(t){e.nextLevel=i.result;var o=e.gameScript;if(o.currUser.diamonds>e.nextLevel.nextLevelNeedDiamond)e.onFireLevelSelect(),app.getStorageValue("game_fireleveltip_seen")||o.playerTipNode.active||(app.setStorageValue("game_fireleveltip_seen",1),o.guideScript.initWithData("game_firelevel"))}})},loadDanTou:function(){var e=this.gameScript,t=e.gameInfo.myAccount.currRockets||0,i=e.gameInfo.myAccount.currMissiles||0,o=e.gameInfo.myAccount.currNuclears||0;this.currRocketsLabel.string=t,this.currMissilesLabel.string=i,this.currNuclearsLabel.string=o},loadWing:function(e){for(var t=e.wingunlocks||0,i=this.node.children,o=0;o<i.length;o++){var n=i[o].getChildByName("lockNode");if(n){var a=!(t>o);n.active=a}}},loadAward:function(){this.initAwardNode()},onFireLevelSelect:function(){var e=this,t=0==this.scaleX?1:0;t&&this.initFireLevelNode(),this.node.runAction(cc.sequence(cc.scaleTo(.1,t,1),cc.callFunc(function(){e.scaleX=t})))},onUseDanTouSelect:function(){var e=this,t=0==this.scaleX?1:0;this.node.runAction(cc.sequence(cc.scaleTo(.1,t,1),cc.callFunc(function(){e.scaleX=t})))},onAwardSelect:function(){var e=this,t=0==this.scaleX?1:0;t&&this.initAwardNode(),this.node.runAction(cc.sequence(cc.scaleTo(.1,t,1),cc.callFunc(function(){e.scaleX=t})))},initFireLevelNode:function(){if(this.gameScript){var e=this.gameScript,t=e.currUser;e.gameInfo;t.diamonds>this.nextLevel.nextLevelNeedDiamond?(this.canTitleLabel.string="\u70b9\u51fb\u5347\u7ea7\u5230LV."+this.nextLevel.nextFireLevel,this.canGoodsCoinsLabel.string=this.nextLevel.nextLevelAwardCoin,this.canNode.active=!0,this.cantNode.active=!1):(this.cantTitleLabel.string="\u5347\u7ea7\u5230LV."+this.nextLevel.nextFireLevel,this.cantBarLabel.string=t.diamonds+"/"+this.nextLevel.nextLevelNeedDiamond,this.cantBarSprite.fillRange=t.diamonds/this.nextLevel.nextLevelNeedDiamond,this.canNode.active=!1,this.cantNode.active=!0)}},initAwardNode:function(){var e=this;if(this.gameScript){var t=this.gameScript,i=(t.currUser,t.gameInfo,!1);return app.requestJson("/pipes/skywar/loadAward",function(t,o){if(t){var n=o.result;e.awardData=n;e.gameScript.currUser;for(var a=n.currawardscore||0,s=n.awardscores||[],c=null,r=s.length-1;r>=0;r--){a>=s[r]&&(i=!0,c=r)}if(i){e.awardCantNode.active=!1;var l="";switch(c){case 0:l="\u666e\u901a";break;case 1:l="\u9752\u94dc";break;case 2:l="\u767d\u94f6";break;case 3:l="\u9ec4\u91d1";break;case 4:l="\u6c34\u6676";break;case 5:l="\u94bb\u77f3"}e.awardCanAwardNameLabel.string=l,e.awardCanCoinsLabel.string=s[c],e.awardCanNode.active=!0,e.canIndex=c}else e.awardCanNode.active=!1,e.awardCantBarLabel.string=a+"/"+s[0]||0,e.awardCantBarSprite.fillRange=s[0]?a/s[0]:0,e.awardCantNode.active=!0,e.canIndex=0}}),i}},onUpgradeFireLevelClick:function(){var e=this;if(this.gameScript){this.gameScript.playerTipNode.active&&(this.gameScript.playerTipNode.active=!1);var t=this.gameScript,i=t.currUser,o=t.gameInfo,n=this,a=this.nextLevel.nextLevelAwardCoin;app.requestJson("/pipes/skywar/upgradeFireLevel",function(e,s){if(e)if(0!=s.retcode&&s.retinfo)app.showHintMessage(s.retinfo);else{var c=s.result;t.playerTipNode.active&&(t.playerTipNode.active=!1),n.nextLevel.nextFireLevel=c.nextFireLevel,n.nextLevel.nextLevelNeedDiamond=c.nextLevelNeedDiamond,n.nextLevel.nextLevelAwardCoin=c.nextLevelAwardCoin,o.myAccount.fireLevel=c.fireLevel,i.coins=c.usercoins,i.coupons=c.usercoupons,i.diamonds=c.userdiamonds;var r=c.goodsitems||[];r.unshift({goodstype:101,goodscount:a}),app.openDialog("game_skywar/SkywarGoodsItemNode",{goodsitems:r}),n.onFireLevelSelect(),t.updateUserNode()}}),app.getStorageValue("game_bloodtip_seen")||this.gameScript.playerTipNode.active||this.scheduleOnce(function(){e.gameScript.bloodCanNode.active?(app.setStorageValue("game_bloodtip_seen",1),e.gameScript.guideScript.initWithData("game_blood")):app.getStorageValue("game_shottip_seen")||(app.setStorageValue("game_shottip_seen",1),e.gameScript.guideScript.initWithData("game_shot"))},1)}},onUseDanTouClick:function(e,t){var i=this;this.onUseDanTouSelect();var o=i.gameScript,n=o.gameInfo.myAccount.currRockets||0,a=o.gameInfo.myAccount.currMissiles||0,s=o.gameInfo.myAccount.currNuclears||0,c=null;"601"==t&&(c=n),"602"==t&&(c=a),"603"==t&&(c=s),c&&app.requestJson("/pipes/skywar/useDantou/"+t,function(e,n){e&&(0!=n.retcode&&n.retinfo?app.showHintMessage(n.retinfo):(cc.log(n),"601"==t&&o.gameInfo.myAccount.currRockets--,"602"==t&&o.gameInfo.myAccount.currMissiles--,"603"==t&&o.gameInfo.myAccount.currNuclears--,i.loadDanTou()))})},onUseWingClick:function(e,t){this.onUseDanTouSelect();var i=this.gameScript,o=parseInt(t),n=i.selfPlayerScript;i.usingWingNode.active=!0,n.onUseWinging(!0,o),app.requestJson("/pipes/skywar/useWing/"+o,function(e,t){if(e)if(0!=t.retcode&&t.retinfo)app.showHintMessage(t.retinfo);else t.result})},onAwardClick:function(){var e=this;this.onAwardSelect();var t=e.gameScript;app.openDialog("game_skywar/GameAwardDialog",{},function(i){var o=i.getComponent("GameAwardDialog");o.gameScript=t,o.parentScript=e,o.initWithData(e.awardData,e.canIndex)},null,!1,!0)}}),cc._RF.pop()},{}],CollFireEffect:[function(e,t,i){"use strict";cc._RF.push(t,"8b463kwZ5BJvIlEVWo2qRCF","CollFireEffect"),cc.Class({extends:cc.Component,properties:{collFireAnim:cc.Animation},playCollFire:function(){var e=this;this.collFireAnim.play(),this.collFireAnim.on("finished",function(){e.collFirePool&&e.collFirePool.put(e.node)},this)}}),cc._RF.pop()},{}],ConfirmDialog:[function(e,t,i){"use strict";cc._RF.push(t,"c9115U5nT9DAaL4wu901ety","ConfirmDialog");var o=e("Application");cc.Class({extends:cc.Component,properties:{title:cc.Label,sureBtnLabel:cc.Label,cancelBtnLabel:cc.Label,confirmLeftTxt:cc.Label,confirmCenterTxt:cc.Label,sureBtn:cc.Button,cancelBtn:cc.Button,alertBtn:cc.Button},onLoad:function(){var e=o.currParamData();if(e.title&&this.title&&(this.title.string=e.title),e.confirmTxt){this.confirmLeftTxt.node.active=!1,this.confirmCenterTxt.node.active=!1;var t="left"==e.style?this.confirmLeftTxt:this.confirmCenterTxt;t.node.active=!0,t.string=e.confirmTxt}e.sureBtnLabel&&this.sureBtnLabel&&(this.sureBtnLabel.string=e.sureBtnLabel),e.cancelBtnLabel&&this.cancelBtnLabel&&(this.cancelBtnLabel.string=e.cancelBtnLabel),this.sureBtn.node.active=!e.alert,this.cancelBtn.node.active=!e.alert,this.alertBtn.node.active=!!e.alert,e.onlyClose&&(this.sureBtn.node.active=!1,this.cancelBtn.node.active=!1,this.alertBtn.node.active=!1),this.sureFunc=e.sureFunc,this.cancelFunc=e.cancelFunc,this.closeFunc=e.closeFunc},onDestroy:function(){},onCloseClicked:function(){this.closeFunc?this.closeFunc():this.cancelFunc&&this.cancelFunc(),o.closeDialog(this)},onSureClicked:function(){var e=!1;this.sureFunc&&(e=this.sureFunc()),e||o.closeDialog(this)},onCancelClicked:function(){var e=!1;this.cancelFunc&&(e=this.cancelFunc()),e||o.closeDialog(this)}}),cc._RF.pop()},{Application:"Application"}],DanTouNode:[function(e,t,i){"use strict";cc._RF.push(t,"6e5b5UK8zJFc6Oa47XAywQ2","DanTouNode"),cc.Class({extends:cc.Component,properties:{},initDanTouNode:function(e){var t=this;if(!this.isDanTouing){this.unscheduleAllCallbacks();var i=cc.winSize;this.node.active=!1,this.node.position=cc.v2(0,-i.height/2-this.node.height/2),this.node.active=!0,this.isDanTouing=!0,this.node.runAction(cc.sequence(cc.moveBy(2.5,cc.v2(0,i.height+this.node.height)),cc.callFunc(function(){t.node.active=!1,t.isDanTouing=!1,t.unscheduleAllCallbacks()})));var o=this.gameScript;if(o){this.schedule(function(){var e=o.getEffectFromPool("PlaneBoomEffect2");if(e){var n=e.getComponent("PlaneBoomEffect");n.boomPool=o.PlaneBoomEffect2;var a=i.width/2-100,s=-a;e.x=Math.floor(Math.random()*(a-s+1)+s);var c=Math.floor(201*Math.random()-100);e.y=t.node.y-135+c;var r=Math.floor(11*Math.random()+20);e.setScale(r/10),e.parent=o.effectParentNode,n.playBoom()}},.15)}}}}),cc._RF.pop()},{}],DcScrollView:[function(e,t,i){"use strict";cc._RF.push(t,"e08e8YUTa1GL6Bgs7bPhYcj","DcScrollView"),cc.Class({extends:cc.Component,properties:{delayTime:.3,maskNode:cc.Node,scrollViewList:[cc.ScrollView]},onLoad:function(){var e=this;this.scheduleOnce(function(){var t=e.maskNode.parent.convertToWorldSpaceAR(cc.v2(e.maskNode.x-e.maskNode.anchorX*e.maskNode.width,e.maskNode.y-e.maskNode.anchorY*e.maskNode.height));e.svBBoxRect=cc.rect(t.x,t.y,e.maskNode.width,e.maskNode.height),e.onScrolling()},this.delayTime)},onScrolling:function(){var e=this;if(this.svBBoxRect)for(var t=0;t<this.scrollViewList.length;t++){var i=this.scrollViewList[t];i.node.active&&i.content.children.forEach(function(t){t.getBoundingBoxToWorld().intersects(e.svBBoxRect)?255!=t.opacity&&(t.opacity=255):0!=t.opacity&&(t.opacity=0)})}},start:function(){}}),cc._RF.pop()},{}],DiamondsBuySkinDialog:[function(e,t,i){"use strict";cc._RF.push(t,"f2841mzRYRNxL4r6JvbeZAZ","DiamondsBuySkinDialog"),cc.Class({extends:cc.Component,properties:{diamondLabel:cc.Label,skinNode:cc.Node},onLoad:function(){var e=app.currParamData();this.skinItemObj=e;var t=app.currUser();this.diamondLabel.string=t.diamonds||0;for(var i=ls.loadGoodsIntro(null,e.skinid),o=0;o<this.skinNode.children.length;o++){var n=this.skinNode.children[o],a=n.getChildByName("title").getComponent(cc.Label),s=cc.find("bottom/title",n).getComponent(cc.Label),c=n.getChildByName("icon").getComponent(cc.Sprite);a.string=i.goodsname+(0==o?"(7\u5929)":"(\u6c38\u4e45)"),c.spriteFrame=i.spriteFrame,s.string=0==o?e.diamond7price:e.diamond0price,0==o&&e.diamond7price<=0&&(n.active=!1),1==o&&e.diamond0price<=0&&(n.active=!1)}},onDetailClick:function(e,t){var i=this;app.openDialog("ShoppingItemDetailNode",null,function(e){var o=e.getComponent("ShoppingItemDetailNode");o.paySkinType="payskin",o.payTime=parseInt(t),o.gameScript=i.gameScript,o.parentScript=i.parentScript,o.closeCallback=i.onCloseClick.bind(i),o.initWithData(i.skinItemObj)},null,!1,!0)},onCloseClick:function(){app.closeDialog(this)}}),cc._RF.pop()},{}],DotCardDialog:[function(e,t,i){"use strict";cc._RF.push(t,"618f9ycpA9K3owfmPROTAYZ","DotCardDialog"),cc.Class({extends:cc.Component,properties:{cardInput:cc.EditBox},onLoad:function(){var e=app.currParamData();this.lobbyScript=e?e.lobbyScript:null,this.cardInput.string=""},onBtnClicked:function(){var e=this,t=e.cardInput.string||"";t&&/\w+/g.test(t)?(cc.log("\u5151\u6362\u7801\uff1a",t),app.requestJsonByWaiting({url:"/pipes/order/usedotcard/"+t,data:{}},function(t,i){t?i.success?(i.result&&i.result.goodsitems&&app.openDialog("GoodsResultDialog",{goodsitems:i.result.goodsitems}),e.onCloseClick()):app.showHintMessage(i.retinfo||"\u5151\u6362\u5931\u8d25\uff01"):app.showHintMessage("\u5151\u6362\u5931\u8d25\uff01")})):app.showHintMessage("\u5151\u6362\u7801\u683c\u5f0f\u4e0d\u6b63\u786e")},onCloseClick:function(){this.lobbyScript&&this.lobbyScript.updateUserInfo&&this.lobbyScript.updateUserInfo(),app.closeDialog(this)}}),cc._RF.pop()},{}],DutyAwardDialog:[function(e,t,i){"use strict";cc._RF.push(t,"1e1682gu+BGQ4KKsMZuT4ng","DutyAwardDialog"),cc.Class({extends:cc.Component,properties:{myloginseriesLabel:cc.Label,runremainLabel:cc.Label,awardBtn:cc.Button,awardNode:cc.Node,baoxiangNode:cc.Node},onLoad:function(){this.AWARDNUM=12,this.EVERANGLE=360/this.AWARDNUM,this.DURATIAME=1,this.ENDANGLE=720,this.ACC=.2,this.MAXSPEED=12,this.awardState=0,this.currSpeed=0,this.currTime=0,this.finaAngle=0,this.baoxiangNode.active=!1;var e=app.currParamData();this.updateUserInfo=e.updateUserInfo,this.toActivityCallback=e?e.toActivityCallback:null},initWithData:function(e){this.awardData=e,this.myloginseriesLabel.string="  "+e.myloginseries+"  ",this.runremainLabel.string="\u5269\u4f59"+e.runremain+"\u6b21";for(var t=e.awards,i=this.awardNode.children,o=0;o<t.length;o++){var n=t[o],a=i[o];if(n&&a){var s=a.getChildByName("icon").getComponent(cc.Sprite),c=a.getChildByName("title").getComponent(cc.Label),r=n,l=ls.loadGoodsIntro(r.goodstype,r.goodsobjid),d=r.goodscount;r.goodscount>=1e4&&r.goodscount%1e4==0?d=parseInt(r.goodscount/1e4)+"\u4e07":1==r.goodscount?(d=l.goodsname,r.goodsexpires&&(d=l.goodsname+"\uff08"+r.goodsexpires/86400+"\u5929\uff09")):r.goodstype>ls.GOODS_TYPE_PACKETS&&(d=l.goodsname+"x"+r.goodscount),c.string=d,s.spriteFrame=l.spriteFrame}}},onAwardClicked:function(){var e=this;this.awardData.runremain<1?app.showHintMessage("\u4eb2\uff01\u4f60\u7684\u62bd\u5956\u6b21\u6570\u4e0d\u8db3\u8bf7\u660e\u5929\u518d\u6765"):(this.awardBtn.interactable=!1,app.requestJson({url:"/pipes/duty/runaward"},function(t,i){if(t&&i)if(0!=i.retcode&&i.retinfo)app.showHintMessage(i.retinfo);else{e.currRecordInfo=i.result,e.awardData.runremain--,e.runremainLabel.string="\u5269\u4f59"+e.awardData.runremain+"\u6b21",e.gameScript.dutyAwardRedPointNode.active=!!e.awardData.runremain;for(var o=e.awardData.awards,n=0;n<o.length;n++)i.result.awardid==o[n].awardid&&(e.finaAngle=-30*n,e.startAward(),e.awardIndex=n+1)}}))},displayAward:function(){var e=this,t=this.awardNode.children;this.awardIndex&&t[this.awardIndex-1].getComponent(cc.Animation).play(),this.scheduleOnce(function(){e.awardIndex&&(t[e.awardIndex-1].getChildByName("select").active=!1),e.currRecordInfo.goodsobjid==ls.PROPID_BAOBOX?(e.baoxiangNode.active=!0,e.baoxiangNode.getComponent(dragonBones.ArmatureDisplay).playAnimation("dakaidonghua"),e.scheduleOnce(function(){e.baoxiangNode.active=!1,app.openDialog("GoodsResultDialog",{goodsresult:e.currRecordInfo,goodsitems:e.currRecordInfo.goodsitems})},1.65)):app.openDialog("GoodsResultDialog",{goodsresult:e.currRecordInfo,goodsitems:e.currRecordInfo.goodsitems})},.67),this.updateUserInfo&&this.updateUserInfo()},startAward:function(){0!==this.awardNode.angle&&(this.awardNode.angle=0),this.awardState=1,this.currSpeed=0,this.currTime=0},onCloseClick:function(){this.awardState||(this.toActivityCallback&&this.toActivityCallback(),app.closeDialog(this))},update:function(e){if(0!==this.awardState)if(1===this.awardState)if(this.currTime+=e,this.awardNode.angle-=this.currSpeed*e*60,this.currSpeed<this.MAXSPEED)this.currSpeed+=this.ACC*e*60;else{if(this.currTime<this.DURATIAME)return;(this.awardNode.angle+this.finaAngle)%360>=-20&&(this.awardNode.angle=this.finaAngle,this.awardState=2)}else if(2===this.awardState){var t=-(this.awardNode.angle-this.finaAngle);this.currSpeed=this.MAXSPEED*((this.ENDANGLE-t)/this.ENDANGLE)+.2,this.awardNode.angle-=this.currSpeed*e*60,this.ENDANGLE-t<=0&&(this.awardState=0,this.awardNode.angle=this.finaAngle,this.displayAward(),this.awardBtn.interactable=!0)}}}),cc._RF.pop()},{}],DutyDialog:[function(e,t,i){"use strict";cc._RF.push(t,"44daftQn4dIXbFp7bQ5rE6v","DutyDialog"),cc.Class({extends:cc.Component,properties:{dutyBtnNode:cc.Node,middleNode:cc.Node},onLoad:function(){var e=app.currParamData();this.updateUserInfo=e.updateUserInfo,this.toAwardCallback=e?e.toAwardCallback:null,this.toActivityCallback=e?e.toActivityCallback:null,this.noAwardToActivity=e?e.noAwardToActivity:null},initWithData:function(e){this.data=e,this.currShanSpriteNode=null,this.initDutyList(e.mydutyseries);var t=this;app.requestJson("/pipes/duty/checktoday",function(i,o){if(i)if(1==o.result)t.dutyBtnNode.active=!1;else{var n=t.middleNode.children[e.mydutyseries];if(n){var a=n.getChildByName("shanSprite"),s=n.getChildByName("title");a.active=!0,s.color=cc.color(90,243,56,255),s.getComponent(cc.LabelOutline).color=cc.color(26,72,6,255),t.currShanSpriteNode=a,t.currTitleNode=s}}});for(var i=this.middleNode.children,o=e.rewards,n=0;n<o.length;n++){var a=o[n],s=i[n],c=(s.getChildByName("title").getComponent(cc.Label),s.getChildByName("tips").getComponent(cc.Label)),r=s.getChildByName("icon").getComponent(cc.Sprite);if(a.goodsitems&&a.goodsitems.length)for(var l=0;l<a.goodsitems.length;l++){var d=a.goodsitems[l],p=ls.loadGoodsIntro(d.goodstype,d.goodsobjid),h=p.goodsname+"x"+d.goodscount;d.goodscount>=1e4&&d.goodscount%1e4==0?h=p.goodsname+"x"+parseInt(d.goodscount/1e4)+"\u4e07":1==d.goodscount&&(h=p.goodsname+"x1",d.goodsexpires&&(h=p.goodsname+"("+d.goodsexpires/86400+"\u5929)")),c.string=h,r.spriteFrame=p.spriteFrame}}},initDutyList:function(e){for(var t=this.middleNode.children,i=0;i<t.length;i++){var o=t[i],n=i<e;o.getChildByName("maskNode").active=n,o.getChildByName("shanSprite").active=!1}},onCloseClick:function(){this.toAwardCallback&&this.toAwardCallback(null,this.toActivityCallback),this.noAwardToActivity&&this.noAwardToActivity(),app.closeDialog(this)},onDutyClick:function(){var e=this;this.dutyBtnNode.active=!1,app.requestJson({url:"/pipes/duty/book"},function(t,i){t&&i&&(0!=i.retcode&&i.retinfo?app.showHintMessage(i.retinfo):(e.initDutyList(i.result.dutyindex),e.currTitleNode.color=cc.color(227,215,184,255),e.currTitleNode.getComponent(cc.LabelOutline).color=cc.Color.BLACK,app.openDialog("GoodsResultDialog",{goodsitems:i.result.goodsitems}),i.result.dutyindex>=7&&(e.gameScript.dutyBtnNode.active=!1),e.gameScript.dutyRedPointNode.active=!1,e.updateUserInfo&&e.updateUserInfo()))})},update:function(e){}}),cc._RF.pop()},{}],EnemyBulletNode:[function(e,t,i){"use strict";cc._RF.push(t,"eed72NmnndLoZD/8xKlGh9U","EnemyBulletNode"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.speed=500,this.disY=this.speed;var e=cc.winSize;this.winHeight=e.height,this.winWidth=e.width},onCollisionEnter:function(e,t){var i=this;if("plane"==e.node.name){var o=e.node.parent.getComponent("SkywarPlane");o&&(this.bulletPool.put(this.node),o.onColling(),o.playerInfo&&o.playerInfo.userid==app.currUserid()&&!o.isDeading&&i.kindid&&app.requestJson("/pipes/skywar/decreBlood/"+i.kindid,function(e,t){if(e)if(0!=t.retcode&&t.retinfo)app.showHintMessage(t.retinfo);else{var o=t.result;o.userid==app.currUserid()&&i.gameScript.initBloodBar(o.blood||0)}}))}},update:function(e){this.moveType&&"xuanwo"==this.moveType&&(this.disY+=200*e,this.node.angle+=200*e),-90!=this.node.angle&&(this.node.x+=Math.cos(this.node.angle*Math.PI/180)*this.disY*e),this.node.y+=Math.sin(this.node.angle*Math.PI/180)*this.disY*e,(this.node.y>this.winHeight/2||this.node.y<-this.winHeight/2||this.node.x>this.winWidth/2||this.node.x<-this.winWidth/2)&&(this.moveType=null,this.node.angle=0,this.disY=500,this.bulletPool.put(this.node))}}),cc._RF.pop()},{}],Enemy:[function(e,t,i){"use strict";cc._RF.push(t,"49899hE+x9GOrIXicSLxWSU","Enemy"),cc.Class({extends:cc.Component,properties:{enemySprit:cc.Sprite,enemySpine:dragonBones.ArmatureDisplay,levelNode:cc.Node},start:function(){var e=this;this.node.on("touchend",function(){e.gameScript&&e.gameScript.selfPlayerScript&&e.gameScript.selfPlayerScript.isShotTrack&&!e.gameScript.selfPlayerScript.isShotRader&&e.config&&e.gameScript.selectTracksNode(e.config.enemyid)},this)},onEnemyColl:function(){var e=this,t=this;if(-3!=this.runTime){this.planeNode&&!this.isLighter&&(this.isLighter=!0,this.planeNode.color=cc.color(153,153,153,255),this.scheduleOnce(function(){e.planeNode.color=cc.color(255,255,255,255),e.isLighter=!1},.15)),this.levelNode.active||(this.levelNode.active=!0),this.levelNode.opacity=255;var i=cc.sequence(cc.delayTime(2),cc.fadeOut(.5),cc.callFunc(function(){t.levelNode.active=!1}));this.levelNode.stopAllActions(),this.levelNode.runAction(i)}},initEnemy:function(e){this.node.setScale(1),this.node.angle=0,this.planeNode=this.enemySprit?this.enemySprit.node:this.enemySpine.node,this.planeNode.color=cc.color(255,255,255,255),this.isLighter=!1;var t=this.enemySprit?this.enemySprit.node:this.enemySpine.node;if(this.config=e,this.moveTrail=this.gameScript.moveTrail[e.lineid],this.moveangle=this.gameScript.moveangle[e.lineid],this.enemyid=parseInt(e.enemyid%1e3),this.levelNode.active=!1,this.levelNode.opacity=255,this.runTime=-1,this.isLeaved=!1,this.lastangle=0,this.moveTrail){var i=e.lifems;this.speed=Math.round(1e4*this.moveTrail.length/i);var o=e.livingms,n=Math.round(this.speed*o/1e4);this.currPointIndex=n;var a=this.moveTrail.length;if(n+1>=a){this.currPointIndex=a-1;var s=this.moveTrail[a-1],c=this.moveangle[a-2];this.enemyid<404&&(t.angle=c),this.node.position=s,this.runTime=i,this.lastangle=c}else{var r=this.moveTrail[n],l=this.moveangle[n];this.enemyid<404&&(t.angle=l),0==o?(this.runTime=-1,this.enterScreen(l,r)):(this.runTime=o,this.node.position=r),this.lastangle=l}}else this.destroyEnemy()},update:function(e){if(!(this.runTime<0||this.isLeaved)){var t=this.enemySprit?this.enemySprit.node:this.enemySpine.node;this.runTime+=1e3*e;var i=Math.round(this.runTime*this.speed/1e4);if(i>=this.moveTrail.length){this.isLeaved=!0;var o=t.angle?t.angle:this.moveangle[this.moveangle.length-1];this.leaveScreen(o,this.node.position)}else{var n=this.moveTrail[i],a=this.moveangle[i];a?a!=this.lastangle&&(this.enemyid<404&&(t.angle=a),this.lastangle=a):a=t.angle,this.node.position=n,this.currPointIndex=i}}},enterScreen:function(e,t){var i=this;e-=90;var o=Math.sin(e/180*Math.PI)*this.node.height/2,n=Math.cos(e/180*Math.PI)*this.node.width/2;this.node.position=cc.v2(t.x-n,t.y-o);var a=Math.round(this.node.height/this.speed*1e3)/100;this.node.runAction(cc.sequence(cc.moveTo(a,t),cc.callFunc(function(){i.node.position=t,i.runTime=0})))},leaveScreen:function(e,t){var i=this;delete this.gameScript.enemyNodeMap[this.config.enemyid];var o=this.gameScript.playerNodeMap;if(o){for(var n in o)if(o.hasOwnProperty(n)){var a=o[n];if(a){var s=a.getComponent("SkywarPlane");s.tracksid==this.config.enemyid&&s.tracks(!1),s.radersid==this.config.enemyid&&s.shotRader(!1)}}this.gameScript.currTracksid&&this.gameScript.currTracksid==this.config.enemyid&&this.gameScript.selectTracksNode(),this.gameScript.currRadersid&&this.gameScript.currRadersid==this.config.enemyid&&this.gameScript.selectRadersNode(),e-=90;var c=Math.sin(e/180*Math.PI)*this.node.height/2,r=Math.cos(e/180*Math.PI)*this.node.width/2,l=cc.v2(t.x+r,t.y+c),d=Math.round(this.node.height/this.speed*1e3)/100;this.node.runAction(cc.sequence(cc.moveTo(d,l),cc.callFunc(function(){i.destroyEnemy()})))}},destroyEnemy:function(){this.moveTrail=[],this.moveangle=[],this.runTime=-3;var e=this.gameScript.playerNodeMap;if(e){for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];if(i){var o=i.getComponent("SkywarPlane");o.tracksid==this.config.enemyid&&o.tracks(!1),o.radersid==this.config.enemyid&&o.shotRader(!1)}}this.node.stopAllActions(),this.unscheduleAllCallbacks(),this.enemyPool.put(this.node)}},shotBullet:function(e,t){var i=this,o=this.gameScript;if(t&&t>100)return e>408&&e<500&&this.enemyTrailBullet1(e,o),void(e>500&&e<600&&this.enemyTrailBullet2(e,o));var n=null;this.gameInfo=app.currSkywarGameinfo(),this.enemyKind=this.gameInfo.enemyKind||[];for(var a=0;a<this.enemyKind.length;a++){var s=this.enemyKind[a];if(s.kindid==e){n=s;break}}if(n){var c=n.shotrate,r=n.shotdelay;if(c){this.schedule(function(){var t=o.getBulletFromPool("EnemyBulletNode"),n=t.getComponent("EnemyBulletNode");n.gameScript=o,n.kindid=e,n.bulletPool=o.EnemyBulletNode,t.angle=-90,t.position=cc.v2(i.node.x,i.node.y-100),t.parent=o.enemyBulletNode},c,9999,r||0)}}},enemyTrailBullet1:function(e,t){var i=this;this.schedule(function(){for(var o=0;o<3;o++){var n=t.getBulletFromPool("EnemyBulletNode"),a=n.getComponent("EnemyBulletNode");a.gameScript=t,a.kindid=e,a.bulletPool=t.EnemyBulletNode,n.angle=-20*o-70,n.position=cc.v2(i.node.x,i.node.y-100),n.parent=t.enemyBulletNode}},1)},enemyTrailBullet2:function(e,t){this.schedule(function(){var i=t.getBulletFromPool("EnemyBulletNode"),o=i.getComponent("EnemyBulletNode");o.gameScript=t,o.kindid=e,o.bulletPool=t.EnemyBulletNode,o.moveType="xuanwo",i.angle=0,i.position=cc.v2(0,0),i.parent=t.enemyBulletNode},.2)}}),cc._RF.pop()},{}],GameAwardDialog:[function(e,t,i){"use strict";cc._RF.push(t,"0ea5f0vlrhLdZ5CW4yuBwTI","GameAwardDialog"),cc.Class({extends:cc.Component,properties:{layoutNode:cc.Node,iconSpriteArray:[cc.Sprite],numLabelArray:[cc.Label],lightNodeArray:[cc.Node],selectNodeArray:[cc.Node],tipsLabel:cc.Label,tipsBar:cc.ProgressBar,awardBtn:cc.Button,toggleArray:[cc.Toggle]},onLoad:function(){for(var e=0;e<this.iconSpriteArray.length;e++){this.iconSpriteArray[e].node.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.8,cc.v2(0,10)).easing(cc.easeOut(2)),cc.moveBy(.8,cc.v2(0,-10)).easing(cc.easeIn(2)))))}this.onSelectClick(null,this.canIndex+1),this.AWARDNUM=6,this.EVERANGLE=360/this.AWARDNUM,this.DURATIAME=2,this.ENDANGLE=720,this.ACC=.2,this.MAXSPEED=8,this.awardState=0,this.currSpeed=0,this.currTime=0,this.finaAngle=0},initWithData:function(e,t){cc.log(e),this.awardData=e,this.canIndex=t},onCloseClick:function(){this.awardState||app.closeDialog(this)},onSelectClick:function(e,t){var i=parseInt(t)-1;this.toggleArray[i].check();var o=this.awardData.awardinfos,n=this.awardData.currawardscore||0,a=this.awardData.awardscores||[],s=this.layoutNode.children;if(this.selectIndex=t,o[i]){var c=o[i];this.awardinfo=c;for(var r=0;r<s.length;r++){var l=c[r],d=this.iconSpriteArray[r],p=this.numLabelArray[r],h=p.node.children[0].getComponent(cc.Label),u=this.lightNodeArray[r],g=this.selectNodeArray[r];if(u.active=!1,g.active=!1,l){var f=ls.loadGoodsIntro(l.goodstype,l.goodsobjid),m=parseInt(l.goodscount/3e3);m=m?m>6?6:m:null;var v=ls.loadGoodsSpriteFrame(l.goodstype,l.goodsobjid,m);d.spriteFrame=v;var y=l.goodscount;l.goodscount>=1e4&&l.goodscount%1e4==0&&(y=parseInt(l.goodscount/1e4)+"\u4e07"),p.string=f.goodsname,h.string="x "+y}}}var S=n>=a[i]?i+1:i;this.tipsLabel.string="\u7d2f\u8ba1\u6ee1\u5956\u6c60\u5f00\u542f"+this.getName(S)+"\u62bd\u5956 "+n+"/"+a[S]||a[i],this.tipsBar.progress=n/(a[S]||a[i]),this.awardBtn.interactable=i==this.canIndex&&n>=a[i],this.awardBtn.node.children[0].getComponent(cc.LabelOutline).enabled=i==this.canIndex&&n>=a[i]},getName:function(e){var t="";switch(e){case 0:t="\u666e\u901a";break;case 1:t="\u9752\u94dc";break;case 2:t="\u767d\u94f6";break;case 3:t="\u9ec4\u91d1";break;case 4:t="\u6c34\u6676";break;case 5:t="\u94bb\u77f3"}return t},onChouJiangClick:function(){var e=this;e.canIndex=-1,e.awardBtn.interactable=!1,app.requestJson({url:"/pipes/skywar/runAward"},function(t,i){if(t&&i)if(0!=i.retcode&&i.retinfo)app.showHintMessage(i.retinfo);else{var o=i.result;e.currRecordInfo=o,e.awardData.currawardscore=o.currawardscore;for(var n=e.awardinfo,a=0;a<n.length;a++)o.awardid==n[a].awardid&&(e.finaAngle=a*e.EVERANGLE,e.startAward(),e.awardIndex=a+1)}})},startAward:function(){this.awardState=1,this.currSpeed=0,this.currTime=0,this.awardAngle=0,this.currChoujiangIndex=0;for(var e=0;e<this.selectNodeArray.length;e++){var t=this.selectNodeArray[e];this.lightNodeArray[e].active=!1,t.active=!1}},displayChoujiangEffect:function(e){this.selectNodeArray[this.currChoujiangIndex].active=!1;var t=parseInt(e%360/this.EVERANGLE),i=t>=6?5:t;this.selectNodeArray[i].active=!0,this.currChoujiangIndex=i},displayAward:function(){var e=this,t=this.layoutNode.children;this.awardIndex&&t[this.awardIndex-1].getComponent(cc.Animation).play();var i=this.gameScript.currUser;this.scheduleOnce(function(){app.openDialog("GoodsResultDialog",{goodsitems:e.currRecordInfo.goodsitems}),i.coins=e.currRecordInfo.usercoins,i.coupons=e.currRecordInfo.usercoupons,i.diamonds=e.currRecordInfo.userdiamonds},.67)},update:function(e){if(0!==this.awardState)if(1===this.awardState)if(this.currTime+=e,this.awardAngle+=this.currSpeed*e*60,this.displayChoujiangEffect(this.awardAngle),this.currSpeed<this.MAXSPEED)this.currSpeed+=this.ACC*e*60;else{if(this.currTime<this.DURATIAME)return;(this.awardAngle-this.finaAngle)%360<=20&&(this.awardAngle=this.finaAngle,this.displayChoujiangEffect(this.awardAngle),this.awardState=2)}else if(2===this.awardState){var t=this.awardAngle-this.finaAngle;this.currSpeed=this.MAXSPEED*((this.ENDANGLE-t)/this.ENDANGLE)+.8,this.awardAngle+=this.currSpeed*e*60,this.displayChoujiangEffect(this.awardAngle),this.ENDANGLE-t<=0&&(this.awardState=0,this.awardAngle=this.finaAngle,this.displayChoujiangEffect(this.awardAngle),this.displayAward())}}}),cc._RF.pop()},{}],GoodsItemNode:[function(e,t,i){"use strict";cc._RF.push(t,"21dffmv7S5Ja69CKe2ChDto","GoodsItemNode"),cc.Class({extends:cc.Component,properties:{tipSprite:cc.Sprite,goodsIcon:cc.Sprite,goodsName:cc.Label,goodsCount:cc.Label,vipNode:cc.Node,vipLabel:cc.Label,bgSprite:cc.Sprite},initWithData:function(e,t,i,o){o&&this.bgSprite&&(this.bgSprite.node.color=o),this.vipNode.active=!1;var n=ls.loadGoodsIntro(e.goodstype,e.goodsobjid);this.goodsIcon.spriteFrame=n.spriteFrame,this.goodsName.string=n.goodsname;var a=e.goodscount;e.goodscount>=1e4&&e.goodscount%1e4==0&&(a=parseInt(e.goodscount/1e4)+"\u4e07"),this.goodsCount.string="x "+a,t&&(this.goodsName.node.active=!1),i?(this.tipSprite.spriteFrame=i,this.tipSprite.node.active=!0):this.tipSprite.node.active=!1}}),cc._RF.pop()},{}],GoodsResultDialog:[function(e,t,i){"use strict";cc._RF.push(t,"43f1aQQKfxD3bgoVTSB0Gzb","GoodsResultDialog"),cc.Class({extends:cc.Component,properties:{bgSprite:cc.Node,spineNode:cc.Node,itemsPanel:cc.Node,goodsItemPrefab:cc.Prefab},onLoad:function(){var e=app.currUser(),t=app.currParamData();if(t){this.type=t.type||"gxhd",this.callback=t.callback;var i=t.goodsitems||[];this.goodsitems=i;var o=t.goodsresult;this.itemsPanel.removeAllChildren();for(var n=0;n<i.length;n++){var a=i[n],s=cc.instantiate(this.goodsItemPrefab),c=s.getComponent("GoodsItemNode");c.initWithData(a,!1,null,cc.color(212,189,148,255)),e.viplevel&&o&&o.factor&&o.factor>1&&(c.vipLabel.string="VIP x"+o.factor,c.vipNode.active=!0),this.itemsPanel.addChild(s)}}},initWithData:function(e){var t=cc.instantiate(this.itemPref),i=t.getComponent("LetterItemNode");i.letterScript=this,i.initWithData(),t.parent=this.scroViewNodeArray[1].content},onCloseClick:function(){app.closeDialog(this),this.callback&&this.callback()},update:function(e){this.bgSprite.angle-=.2*e*240}}),cc._RF.pop()},{}],GuideNode:[function(e,t,i){"use strict";cc._RF.push(t,"f20cfO4VnhM/7jTnoDWnfJd","GuideNode"),cc.Class({extends:cc.Component,properties:{guideLabel:cc.Label,guideMask:cc.Mask,rewardSpine:dragonBones.ArmatureDisplay,guideShouNode:cc.Node,rewardNode:cc.Node,bloodCanNode:cc.Node},initWithData:function(e){var t=this,i=this;if(this.isClicked=!1,this.currData=e,this.guideLabel.node.parent.y=150,this.guideShouNode.active=!1,this.node.active=!0,"lobby_first"==e){this.guideMask.enabled=!1,this.guideLabel.node.parent.active=!0,this.rewardSpine.node.active=!1,this.rewardNode.active=!1;this.updateGuideString("\u957f\u5b98\u60a8\u597d\uff01\u6b22\u8fce\u6765\u5230\u706b\u795e\u6218\u673a\uff01\u7a0d\u540e\u8981\u524d\u5f80\u6218\u573a\u4e86\uff0c\u8bf7\u5148\u9886\u53d6\u60a8\u7684\u519b\u7528\u7269\u8d44\u3002"),this.isClose=!0,this.closeCallback=function(){i.initWithData("lobby_second")}}else if("lobby_second"==e)this.guideMask.enabled=!1,this.guideLabel.node.parent.active=!1,this.rewardSpine.node.active=!0,this.rewardNode.active=!1,this.rewardSpine.playAnimation("b1"),this.isClose=!1,this.isEnd=!1,this.scheduleOnce(function(){t.isEnd=!0},.5),this.closeCallback=function(){this.rewardSpine.node.children[0].active=!1,this.rewardSpine.playAnimation("c1");this.rewardSpine.addEventListener(dragonBones.EventObject.LOOP_COMPLETE,function e(){i.rewardSpine.removeEventListener(dragonBones.EventObject.LOOP_COMPLETE,e,i),i.rewardSpine.playAnimation("d1"),i.scheduleOnce(function(){i.initWithData("lobby_third")},1)},i)};else if("lobby_third"==e)this.guideMask.enabled=!1,this.guideLabel.node.parent.active=!1,this.rewardSpine.node.active=!1,this.rewardNode.active=!0,this.isClose=!0,this.isEnd=!1,this.scheduleOnce(function(){t.isEnd=!0},.5),this.closeCallback=function(){i.initWithData("lobby_fourth")};else if("lobby_fourth"==e){this.guideMask.enabled=!1,this.guideLabel.node.parent.active=!0,this.rewardSpine.node.active=!1,this.rewardNode.active=!1;this.updateGuideString("\u524d\u65b9\u6709\u654c\u4eba\u6765\u88ad\uff01\u672c\u6b21\u5c06\u7531\u6211\u5e26\u9886\u4f60\u719f\u6089\u6218\u573a\uff0c\u5373\u5c06\u51fa\u53d1\u5427!"),this.isClose=!0,this.closeCallback=function(){(new(app.loadHandler("Skywar"))).enterGame(1)}}else if("game_shot"==e){this.guideMask.enabled=!0,this.guideLabel.node.parent.active=!0,this.guideShouNode.active=!0;var o=this.gameScript.selfPlayerScript.node.position;this.guideMask.node.position=cc.v2(o.x,o.y+50),this.guideShouNode.position=cc.v2(o.x,o.y+50);this.updateGuideString("\u957f\u6309\u62d6\u52a8\u98de\u673a\u53d1\u70ae\uff01\n\u53d1\u70ae\u6d88\u8017\u5b50\u5f39\uff0c\u5b50\u5f39\u53ef\u901a\u8fc7\u51fb\u843d\u654c\u673a\u83b7\u5f97"),this.isClose=!1,this.closeCallback=null}else if("game_blood"==e){this.guideMask.enabled=!0,this.guideLabel.node.parent.active=!0,this.gameScript.bloodCanNode.children[2].active=!1,this.guideShouNode.active=!0;var n=this.gameScript.bloodCanNode.convertToWorldSpaceAR(cc.v2()),a=this.node.convertToNodeSpaceAR(n);this.guideMask.node.position=a,this.guideShouNode.position=a;this.updateGuideString("\u70b9\u51fb\u9886\u53d6\u4e0b\u65b9\u8865\u7ed9\u7bb1\uff01\n\u98de\u673a\u4e0d\u88ab\u51fb\u6bc1\uff0c\u5012\u8ba1\u65f6\u7ed3\u675f\u5373\u53ef\u9886\u53d6\u5956\u52b1"),this.isClose=!1,this.closeCallback=null}else if("game_firelevel"==e){this.guideMask.enabled=!0,this.guideLabel.node.parent.active=!0,this.guideShouNode.active=!0,this.guideLabel.node.parent.y+=200;var s=this.bloodCanNode.convertToWorldSpaceAR(cc.v2()),c=this.node.convertToNodeSpaceAR(s);this.guideMask.node.position=cc.v2(c.x-100,c.y),this.guideShouNode.position=cc.v2(c.x-100,c.y);this.updateGuideString("\u70b9\u51fb\u53f3\u4fa7\u706b\u529b\u5347\u7ea7\u6309\u94ae\uff01\n\u63d0\u9ad8\u98de\u673a\u706b\u529b\u7b49\u7ea7\uff0c\u53ef\u589e\u52a0\u51fb\u843d\u654c\u673a\u7684\u5956\u52b1"),this.isClose=!1,this.closeCallback=null}},updateGuideString:function(e){var t=this,i=0;this.isEnd=!1,this.guideLabel.string="",this.unscheduleAllCallbacks(),this.schedule(function(){e[i]&&(t.guideLabel.string+=e[i],++i>=e.length&&(t.isEnd=!0))},.05,e.length-1)},onCloseClick:function(){var e=this;this.isEnd&&(this.isClicked||(this.isClicked=!0,this.isClose&&(this.node.active=!1),this.closeCallback&&this.scheduleOnce(function(){e.closeCallback()},.2)))},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],InfiniteBg2:[function(e,t,i){"use strict";cc._RF.push(t,"4dc7fQ6+gdNdqqKsyD1YH6z","InfiniteBg2"),cc.Class({extends:cc.Component,properties:{bgNode:cc.Node,rollSpeed:30},start:function(){var e=this.bgNode.children,t=cc.winSize,i=t.height,o=t.width;for(var n in e){var a=e[n];a&&(a.width=o,a.height=i,a.position=cc.v2(0,parseInt(n)*i),a.active=!0)}this._width=o,this._height=i,this.bg1Node=e[0],this.bg2Node=e[1],this.sp=i/this.rollSpeed},update:function(e){this.bg1Node.y-=this.sp*e,this.bg2Node.y-=this.sp*e,this.bg1Node.y<=-this._height&&(this.bg1Node.y=this.bg2Node.y+this._height),this.bg2Node.y<=-this._height&&(this.bg2Node.y=this.bg1Node.y+this._height)}}),cc._RF.pop()},{}],KilledRewardCoin:[function(e,t,i){"use strict";cc._RF.push(t,"7fd2bkPczRHm5NEwAX0fGDN","KilledRewardCoin"),cc.Class({extends:cc.Component,properties:{numLabel:cc.Label,coinsNode:cc.Node,yellowFont:cc.Font,whiteFont:cc.Font},playCoinAward:function(e,t){var i=this;if(t){var o=this.userid==app.currUserid()?this.yellowFont:this.whiteFont;this.numLabel.font=o,this.numLabel.string=e,this.numLabel.node.active=!0,this.numLabel.node.opacity=255,this.numLabel.node.position=cc.v2(0,0),this.unscheduleAllCallbacks(),this.numLabel.node.stopAllActions(),this.numLabel.node.runAction(cc.sequence(cc.moveBy(.4,cc.v2(0,100)).easing(cc.easeOut(2)),cc.moveBy(.4,cc.v2(0,-100)).easing(cc.easeIn(2)),cc.spawn(cc.fadeOut(1),cc.sequence(cc.moveBy(.8,cc.v2(0,200)).easing(cc.easeOut(2)),cc.callFunc(function(){i.numLabel.node.active=!1})))));for(var n=this.coinsNode.children,a=0;a<n.length;a++){var s=n[a],c=19;1==a&&(c=62),2==a&&(c=105),s.stopAllActions(),s.position=cc.v2(c,0)}var r=0;this.schedule(function e(){var i=this;2==r&&this.unschedule(e);var o=n[r];o&&(o.runAction(cc.sequence(cc.repeat(cc.sequence(cc.moveBy(.2,cc.v2(0,50)),cc.moveBy(.2,cc.v2(0,-50))),3),cc.callFunc(function(){if(t&&t.active&&t.name){var e=t.convertToWorldSpaceAR(cc.v2()),n=i.coinsNode.convertToNodeSpaceAR(e);o.runAction(cc.moveTo(.5,cc.v2(n.x,n.y+20)).easing(cc.easeOut(1)))}}))),r++)},.1),this.scheduleOnce(function(){i.coinAwardPool&&i.coinAwardPool.put(i.node)},1.9)}}}),cc._RF.pop()},{}],KilledSpecialRewardCoin:[function(e,t,i){"use strict";cc._RF.push(t,"f4a56Q3utNDVK7d03yS5RF/","KilledSpecialRewardCoin"),cc.Class({extends:cc.Component,properties:{angleAnim:cc.Animation,numAnim:cc.Animation,iconSprite:cc.Sprite,iconNode:cc.Node,numLabel:cc.Label,whiteFont:cc.Font,yellowFont:cc.Font},playDiFen:function(e,t){var i=this;t?(this.iconSprite.spriteFrame=t,this.iconNode.active=!0):this.iconNode.active=!1;var o=this.userid==app.currUserid()?this.yellowFont:this.whiteFont;this.numLabel.font=o,this.numLabel.string=e||0,this.node.setScale(.3),this.node.opacity=255,this.angleAnim.play(),this.numAnim.play(),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.3,1.5).easing(cc.easeIn(2)),cc.scaleTo(.1,1).easing(cc.easeOut(2)),cc.delayTime(2),cc.spawn(cc.scaleTo(.2,.1),cc.fadeOut(.3)),cc.callFunc(function(){i.difengPool&&i.difengPool.put(i.node)})))}}),cc._RF.pop()},{}],LetterDetailNode:[function(e,t,i){"use strict";cc._RF.push(t,"131e5Ea6GlD/r+FlgTKcIe8","LetterDetailNode"),cc.Class({extends:cc.Component,properties:{titleLabel:cc.Label,contentLabel:cc.Label,awardNode:cc.Node,tipsNode:cc.Node,contentNode:cc.Node,lqBtn:cc.Button,lqtipLabel:cc.Label},onLoad:function(){},initWithData:function(e){if(this.letterData=e,this.titleLabel.string=e.title,this.contentLabel.string=e.content,this.awardNode.active=!("letter"!=this.letterType||!e.goodsitems),this.tipsNode.active="letter"==this.letterType,this.contentNode.removeAllChildren(),e.goodsitems){for(var t=0;t<e.goodsitems.length;t++){var i=e.goodsitems[t],o=cc.instantiate(this.letterScript.goodsItemPrefab);o.getComponent("GoodsItemNode").initWithData(i,!0,null,cc.color(139,169,192,255)),o.active=!0,o.y=-15,o.parent=this.contentNode}e.status==ls.LETTER_STATUS_UNREAD?(this.lqBtn.interactable=!0,this.lqtipLabel.string="\u9886 \u53d6"):(this.lqBtn.interactable=!1,this.lqtipLabel.string="\u5df2\u9886\u53d6",this.lqBtn.node.getComponent(cc.Sprite).materials[0]=this.lqBtn.grayMaterial)}else"announce"!=this.letterType&&this.letterData.lettertype==ls.LETTER_TYPE_NOTICE&&e.status==ls.LETTER_STATUS_UNREAD&&this.onReadClick(null,!0)},onReadClick:function(e,t){var i=this;app.requestJson({url:"/pipes/letter/read/"+i.letterData.letterid+";"},function(e,o){e&&o&&(0!=o.retcode&&o.retinfo?app.showHintMessage(o.retinfo):(i.letterData.status=ls.LETTER_STATUS_READED,i.letterData&&i.letterData.goodsitems&&app.openDialog("GoodsResultDialog",{goodsitems:i.letterData.goodsitems}),t&&i.letterData&&i.itemScript&&i.itemScript.initWithData(i.letterData),t||i.letterScript.initLetter(),i.letterScript.decrLetterCount(),!t&&i.letterScript.updateUserInfo&&i.letterScript.updateUserInfo()))})},onDelteClick:function(){var e=this;e.letterData.status==ls.LETTER_STATUS_UNREAD&&e.letterData.goodsitems?app.showHintMessage("\u6ca1\u9886\u53d6\u8fc7\u7684\u90ae\u4ef6\u4e0d\u80fd\u5220\u9664"):app.requestJson({url:"/pipes/letter/delete/"+e.letterData.letterid},function(t,i){t&&i&&(0!=i.retcode&&i.retinfo?app.showHintMessage(i.retinfo):(app.showHintMessage("\u5220\u9664\u90ae\u4ef6\u6210\u529f~"),e.letterScript.initLetter()))})}}),cc._RF.pop()},{}],LetterDialog:[function(e,t,i){"use strict";cc._RF.push(t,"f83d6P2MiFAl6TZNqAITixi","LetterDialog"),cc.Class({extends:cc.Component,properties:{scroViewNodeArray:[cc.ScrollView],goodsItemPrefab:cc.Prefab,allNode:cc.Node,detailNode:cc.Node,itemPref:cc.Prefab,letterEmptyNode:cc.Node,letterRedPoint:cc.Node,announceEmptyNode:cc.Node},onLoad:function(){var e=app.currParamData();this.updateUserInfo=e.updateUserInfo||null,this.gameScript=e.gameScript||null,this.initLetter()},decrLetterCount:function(){this.unreadLetterCount--,this.letterRedPoint.active=this.unreadLetterCount>0,this.unreadLetterCount<1&&this.gameScript&&this.gameScript.updateLetterRedPoint&&this.gameScript.updateLetterRedPoint()},initLetter:function(){var e=this;e.letterRedPoint.active=!1,e.unreadLetterCount=0,app.requestJsonByWaiting({url:"/pipes/letter/query"},function(t,i){if(t&&i)if(0!=i.retcode&&i.retinfo)app.showHintMessage(i.retinfo);else{var o=i.result;if(cc.log(o),e.letterData=o,e.scroViewNodeArray[0].content.removeAllChildren(),o.empty)e.detailNode.active=!1,e.letterEmptyNode.active=!0;else{e.letterEmptyNode.active=!1;var n=o.rows||[],a=0,s=0;e.schedule(function(){var t=n[s];if(t){var i=cc.instantiate(e.itemPref),o=i.getComponent("LetterItemNode");o.letterType="letter",o.letterScript=e,o.initWithData(t),t.status==ls.LETTER_STATUS_UNREAD&&a++,i.parent=e.scroViewNodeArray[0].content,++s>=n.length&&(a>0&&(e.letterRedPoint.active=!0),e.unreadLetterCount=a)}},0,n.length-1),e.allNode.active=!0,e.detailNode.active=!1}}}),app.requestJsonByWaiting({url:"/pipes/announces/plains"},function(t,i){if(t&&i)if(0!=i.retcode&&i.retinfo)app.showHintMessage(i.retinfo);else{var o=i.result;if(e.announceData=o,e.scroViewNodeArray[1].content.removeAllChildren(),o.empty)e.announceEmptyNode.active=!0;else{e.announceEmptyNode.active=!1;var n=o.rows||[],a=0;e.schedule(function(){var t=n[a];if(t){var i=cc.instantiate(e.itemPref),o=i.getComponent("LetterItemNode");o.letterType="announce",o.letterScript=e,o.initWithData(t),i.parent=e.scroViewNodeArray[1].content,a++}},0,n.length-1)}}})},onSelectClick:function(e,t){for(var i=this.scroViewNodeArray,o=0;o<i.length;o++){var n=i[o].node,a=o==parseInt(t)-1;n.active=a}},onCloseClick:function(){app.closeDialog(this),this.gameScript&&this.gameScript.updateLetterRedPoint&&this.gameScript.updateLetterRedPoint(),this.updateUserInfo&&this.updateUserInfo()},onCloseDetailClick:function(){this.allNode.active=!0,this.detailNode.active=!1}}),cc._RF.pop()},{}],LetterItemNode:[function(e,t,i){"use strict";cc._RF.push(t,"e884e35f9ZLaokt824ufc99","LetterItemNode"),cc.Class({extends:cc.Component,properties:{titleLabel:cc.Label,timeLabel:cc.Label,tipFrames:[cc.SpriteFrame],readBgFrames:[cc.SpriteFrame],iconFrames:[cc.SpriteFrame],iconSprite:cc.Sprite,tagNode:cc.Node},initWithData:function(e){this.letterData=e,this.tagNode.active=!1,this.titleLabel.string=e.title;var t=e.createtime?new Date(e.createtime):new Date;this.timeLabel.string=t.toZhString(),"announce"!=this.letterType&&this.letterData.status==ls.LETTER_STATUS_UNREAD?this.node.getComponent(cc.Sprite).spriteFrame=this.readBgFrames[0]:(this.node.getComponent(cc.Sprite).spriteFrame=this.readBgFrames[1],this.titleLabel.node.color=cc.color(241,241,241,255),this.timeLabel.node.color=cc.color(241,241,241,255)),"announce"==this.letterType?(this.iconSprite.spriteFrame=this.iconFrames[0],this.tagNode.getChildByName("tips").getComponent(cc.Label).string="\u91cd\u8981",this.tagNode.active=!0):this.letterData.goodsitems?(this.iconSprite.spriteFrame=this.iconFrames[this.letterData.status==ls.LETTER_STATUS_UNREAD?3:4],this.letterData.status==ls.LETTER_STATUS_UNREAD&&(this.tagNode.getChildByName("tips").getComponent(cc.Label).string="\u5956\u52b1",this.tagNode.active=!0)):this.iconSprite.spriteFrame=this.iconFrames[this.letterData.status==ls.LETTER_STATUS_UNREAD?1:2]},onSelfClick:function(){var e=this.letterScript;e.allNode.active=!1;var t=e.detailNode.getComponent("LetterDetailNode");t.itemScript=this,t.letterScript=this.letterScript,t.letterType=this.letterType,t.initWithData(this.letterData),e.detailNode.active=!0}}),cc._RF.pop()},{}],LobbyBulletNode:[function(e,t,i){"use strict";cc._RF.push(t,"ad1b8oREFtHhb/KxRuH9Dtc","LobbyBulletNode"),cc.Class({extends:cc.Component,properties:{bulletSprit:cc.Sprite},onLoad:function(){this.speed=1500,this.disY=this.speed,this.maxY=this.node.parent.convertToNodeSpaceAR(cc.v2(cc.winSize.width/2,cc.winSize.height-250)).y},initBullet:function(e,t){this.bulletPool=e,this.bulletSprit.spriteFrame=t},update:function(e){this.node.y+=this.disY*e,this.node.y>this.maxY&&this.bulletPool.put(this.node)}}),cc._RF.pop()},{}],LobbyScene:[function(e,t,i){"use strict";cc._RF.push(t,"a2330i3c1dLpYwXrP1PrDvd","LobbyScene"),cc.Class({extends:cc.Component,properties:{hrollAnnounceNode:cc.Node,coinsLabel:cc.Label,couponsLabel:cc.Label,vipLevelLabel:cc.Label,usernameLabel:cc.Label,currFaceSprite:cc.Sprite,planePrefabs:[cc.Prefab],planeParentNode:cc.Node,lobbyBannerPageView:cc.PageView,xuanxiangNode:cc.Node,hideNodeArray:[cc.Node],hideSprite:cc.Sprite,bottomBtnAnim:cc.Animation,dutyBtnNode:cc.Node,rankingBtnRedPointNode:cc.Node,missionRedPointNode:cc.Node,dutyAwardRedPointNode:cc.Node,dutyRedPointNode:cc.Node,vipRedPointNode:cc.Node,onceGoodsBtnNode:cc.Node,bulletPref:cc.Prefab,bulletParentNode:cc.Node,letterRedPointNode:cc.Node,guideNode:cc.Node},onLoad:function(){var e=this;this.gameInfo=app.currSkywarGameinfo(),app.addSocketObserver(this),app.playLobbyMusic(),this.updateUserInfo(),this.schedule(function(){var t=e.lobbyBannerPageView.getPages().length,i=e.lobbyBannerPageView.getCurrentPageIndex();++i>=t&&(i=0),e.lobbyBannerPageView.scrollToPage(i,.5)},5);var t=app.currParamData(),i=!!t&&"login"==t.from,o=this,n=new Date,a=n.getFullYear(),s=n.getMonth()+1;s=s<10?"0"+s:s+"";var c=n.getDate();c=c<10?"0"+c:c+"",this.gameInfo&&this.gameInfo.myAccount.zanRankDay;this.updateMissionRedPoint(),this.updateVIPRedPoint(),(this.gameInfo?this.gameInfo.myAccount.onceGoodsDay:null)&&(this.onceGoodsBtnNode.active=!1);var r=!0;this.gameInfo&&this.gameInfo.myAccount.lastDutyDay;((this.gameInfo?this.gameInfo.myAccount.lastDutyIndex:null)>=7&&(this.dutyBtnNode.active=!1),i)?app.getStorageValue("lobby_lobbytip_seen")?app.requestJson({url:"/pipes/duty/awardlist"},function(e,t){if(e&&t)if(0!=t.retcode&&t.retinfo)app.showHintMessage(t.retinfo);else{var i=null;t.result.runremain>0&&(i=o.onAwardClick.bind(o),o.dutyAwardRedPointNode.active=!0),app.requestJson("/pipes/duty/checktoday",function(e,t){e&&(0==t.result?(o.dutyRedPointNode.active=!0,i?o.onDutyClick(null,i):o.onDutyClick(null,"activity")):i?o.onAwardClick(null,o.onActivityClicked.bind(o)):r=!1,r||o.onActivityClicked())})}}):(app.setStorageValue("lobby_lobbytip_seen",1),this.guideNode.getComponent("GuideNode").initWithData("lobby_first")):t&&"game"==t.from&&o.openSelectRoomLevelDialog(function(e){(new(app.loadHandler("Skywar"))).enterGame(e)});this.bulletPool=new cc.NodePool;this.schedule(function(){var t=cc.instantiate(e.bulletPref);e.bulletPool.put(t)},0,19)},updateLetterRedPoint:function(){var e=this;app.requestJson({url:"/pipes/letter/unreadcount"},function(t,i){t&&i&&(0!=i.retcode&&i.retinfo?app.showHintMessage(i.retinfo):e.letterRedPointNode.active=!!i.result)})},updateMissionRedPoint:function(){var e=this;app.requestJson({url:"/pipes/mission/check"},function(t,i){t&&i&&(0!=i.retcode&&i.retinfo?app.showHintMessage(i.retinfo):e.missionRedPointNode.active=!!i.result)})},updateVIPRedPoint:function(){var e=this;app.requestJson({url:"/pipes/vip/checkaward"},function(t,i){t&&i&&(0!=i.retcode&&i.retinfo?app.showHintMessage(i.retinfo):e.vipRedPointNode.active=!!i.result)})},getBulletNode:function(e,t){var i=null;this.bulletPool&&((i=this.bulletPool.size()>0?this.bulletPool.get():cc.instantiate(this.bulletPref)).getComponent("LobbyBulletNode").initBullet(this.bulletPool,e),i.position=cc.v2(0,0),i.parent=t)},initUserInfo:function(){var e=app.currUser();this.coinsLabel.string=e.coins||0,this.couponsLabel.string=e.coupons||0,this.vipLevelLabel.string="VIP"+e.viplevel||0,this.usernameLabel.string=e.username,app.loadUserFace(this.currFaceSprite,e)},refreshPlanePrefabModel:function(e,t){e||(e=this.planeParentNode),e.removeAllChildren(),this.bulletParentNode.removeAllChildren();var i=cc.instantiate(this.planePrefabs[t-ls.DEFAULT_SKINID]),o=i.getComponent("SkywarPlane");o.lobbyScript=this,o.bulletParentNode=this.bulletParentNode,o.showShotting(),e.addChild(i)},updateUserInfo:function(e){var t=this;app.requestJson("/pipes/user/myinfo",function(i,o){i&&o.userid&&(app.updateUser(o),t.initUserInfo(),e&&e())}),app.requestJson({url:"/pipes/skywar/loadMyAccount",data:{bean:{}}},function(e,i){e&&0==i.retcode?(t.gameInfo.myAccount=i.result,app.updateSkywarGameinfo(t.gameInfo),t.onceGoodsBtnNode.active=!t.gameInfo.myAccount.onceGoodsDay,t.refreshPlanePrefabModel(t.planeParentNode,t.gameInfo.myAccount.currSkinid)):i.retinfo&&app.showHintMessage(i.retinfo)}),t.updateLetterRedPoint()},onPlaneSkinClick:function(){this.xuanxiangNode.active&&(this.xuanxiangNode.active=!1);this.hideOrDisplay(!0),app.openDialog("PlaneSkinDialog",{gameScript:this,lobbyHideOrDisplayCallback:this.hideOrDisplay.bind(this),updateUserInfo:this.updateUserInfo.bind(this)})},onXuanXiangClick:function(){var e=this.xuanxiangNode.active;this.xuanxiangNode.active=!e},hideOrDisplay:function(e){for(var t=this.hideNodeArray,i=0;i<t.length;i++){t[i].active=!e}this.hideSprite.enabled=!e;var o=e?"lobbyBottomBtnToDown":"lobbyBottomBtnToUp";this.bottomBtnAnim.play(o)},openSelectRoomLevelDialog:function(e){this.hideOrDisplay(!0),app.openDialog("RomeSelectDialog",{gameScript:this,gameClickCallback:e,lobbyHideOrDisplayCallback:this.hideOrDisplay.bind(this)},null,null,!0,!0)},onGameClick:function(e,t){cc.log("\u70b9\u51fb\u6e38\u620f: "+t),app.loadGameModule({direct:!0,gameid:t,lobby:this})},onDotCardClick:function(e){this.onXuanXiangClick(),app.openDialog("DotCardDialog",{lobbyScript:this})},onOnceGoodsClick:function(e,t){var i=this,o={updateUserInfo:i.updateUserInfo.bind(i)};t&&"function"==typeof t&&(o.toPayDialogCallback=t),app.openDialog("OnceGoodsDialog",o,function(e){var t=e.getComponent("OnceGoodsDialog");t.gameScript=i,t.initWithData(i.gameInfo.goods)},null,!1,!0)},onDutyClick:function(e,t){var i=this;app.requestJson({url:"/pipes/duty/query"},function(o,n){if(o&&n)if(0!=n.retcode&&n.retinfo)app.showHintMessage(n.retinfo);else{var a={updateUserInfo:i.updateUserInfo.bind(i)};t&&"function"==typeof t&&(a.toAwardCallback=t,a.toActivityCallback=i.onActivityClicked.bind(i)),"activity"==t&&(a.noAwardToActivity=i.onActivityClicked.bind(i)),app.openDialog("DutyDialog",a,function(e){var t=e.getComponent("DutyDialog");t.gameScript=i,t.gameInfo=i.gameInfo,t.initWithData(n.result)},null,!1,!!e)}})},onAwardClick:function(e,t){var i=this;app.requestJson({url:"/pipes/duty/awardlist"},function(o,n){if(o&&n)if(0!=n.retcode&&n.retinfo)app.showHintMessage(n.retinfo);else{var a={updateUserInfo:i.updateUserInfo.bind(i)};t&&"function"==typeof t&&(a.toActivityCallback=t),app.openDialog("DutyAwardDialog",a,function(e){var t=e.getComponent("DutyAwardDialog");t.gameScript=i,t.initWithData(n.result)},null,!1,!!e)}})},onRankingClick:function(){var e=this;app.requestJsonByWaiting({url:"/pipes/skywar/queryRank"},function(t,i){if(t&&i)if(0!=i.retcode&&i.retinfo)app.showHintMessage(i.retinfo);else{app.openDialog("RankingDialog",{updateUserInfo:e.updateUserInfo.bind(e)},function(t){var o=t.getComponent("RankingDialog");o.gameScript=e,o.gameInfo=e.gameInfo,o.initWithData(i.result)})}})},onMissionClick:function(){var e=this;app.requestJsonByWaiting({url:"/pipes/mission/records"},function(t,i){if(t&&i)if(0!=i.retcode&&i.retinfo)app.showHintMessage(i.retinfo);else{app.openDialog("MissionDialog",{updateUserInfo:e.updateUserInfo.bind(e)},function(t){var o=t.getComponent("MissionDialog");o.gameScript=e,o.initWithData(i.result)})}})},onWarehouseClick:function(){var e=this;app.openDialog("WarehouseDialog",{updateUserInfo:e.updateUserInfo.bind(e)},function(t){var i=t.getComponent("WarehouseDialog");i.gameScript=e,i.initWithData(e.gameInfo)})},onLetterClick:function(){app.openDialog("LetterDialog",{updateUserInfo:this.updateUserInfo.bind(this),gameScript:this})},onOrderGoodsClick:function(){var e=this,t=function(){e.hideOrDisplay(!0),app.openDialog("OrderGoodsDialog",{lobbyHideOrDisplayCallback:e.hideOrDisplay.bind(e)},function(t){var i=t.getComponent("OrderGoodsDialog");i.gameScript=e,i.initWithData(e.gameInfo.goods)},null,!0,!0)};(this.gameInfo?this.gameInfo.myAccount.onceGoodsDay:null)?t():this.onOnceGoodsClick(null,t)},onShoppingClick:function(){var e=this;e.hideOrDisplay(!0),app.openDialog("ShoppingDialog",{lobbyHideOrDisplayCallback:e.hideOrDisplay.bind(e)},function(t){var i=t.getComponent("ShoppingDialog");i.gameScript=e,i.initWithData(e.gameInfo.goods)},null,!0,!0)},onUserInfoClick:function(){var e=this;e.hideOrDisplay(!0),app.openDialog("UserInfoDialog",{lobbyHideOrDisplayCallback:e.hideOrDisplay.bind(e)},function(t){var i=t.getComponent("UserInfoDialog");i.gameScript=e,i.initWithData()},null,!0,!0)},onSettingClicked:function(){app.openDialog("SettingDialog"),this.onXuanXiangClick()},onActivityClicked:function(e){app.openDialog("ActivityDialog",{lobbyScript:this},null,null,!1,!!e)},onVipInfoClicked:function(){app.openDialog("VipInfoDialog",{gameScript:this,updateUserInfo:this.updateUserInfo.bind(this),updateRedPoint:this.updateVIPRedPoint.bind(this)})}}),cc._RF.pop()},{}],LoginScene:[function(e,t,i){"use strict";cc._RF.push(t,"1441fZyjoxLBZTF5eHODPIJ","LoginScene"),cc.Class({extends:cc.Component,properties:{btnsPanel:cc.Node,guestLoginBtn:cc.Button,accountLoginBtn:cc.Button,wxLoginBtn:cc.Button,loadingLabel:cc.Label},onLoad:function(){app.addSocketObserver(this);var e=this;e.btnsPanel.active=!1,e.loadingLabel.active=!0,app.initUIResource(function(){cc.sys.isNative&&window.jsb&&app.isNativeWXAppInstalled()?e.wxLoginBtn.node.active=!0:(e.wxLoginBtn.node.active=!1,e.btnsPanel.getComponent(cc.Layout).spacingX=80),e.loadingLabel.node.active=!1,e.btnsPanel.active=!0,e.logining_type="",e.reg_agencyid=0,e.reg_status=1,e.launchurl=app.getNativeLaunchData();var t=app.getQueryStringFromURL(e.launchurl,"uid");t&&(e.reg_agencyid=parseInt(t,36)||0),app.getStorageValue("cookie_unf","")&&e.guestLogin(!0)}),app.setNativeAppInited()},onWechatBtn:function(){this.guestLogin(!1)},onGuestLogin:function(){var e=this;app.openConfirmDialog("\u6e38\u5ba2\u8bd5\u73a9\u9650\u65f6\u4e3a1\u5c0f\u65f6",function(){e.guestLogin(!1)})},onAccountLogin:function(){app.openDialog("UserLoginDialog",{loginScript:this})},guestLogin:function(e,t,i){var o=this,n=app.getStorageValue("cookie_unf","");n.indexOf(",")>0&&(n=n.substring(0,n.indexOf(","))),e||app.setStorageValue("login_type","guest"),app.waiting(0,function(a){o.waitingDialog=a,app.openSocket("/ws/wsgame?appagent="+encodeURIComponent(app.getAppAgent())+"&bean="+encodeURIComponent(JSON.stringify({autologin:!!e,agencyid:o.reg_agencyid||0,cookieinfo:e?n:"",account:t||(e?"":app.getNativeDeviceUUID()),password:i?md5.hex_md5(i):"",netmode:app.getNativeNetMode(),appos:app.getAppOS(),apptoken:app.getAppToken()})),function(){o.logining_type=e?"uid":"guest"})})},onWSonLoginFailMessage:function(e){cc.log(e),this.waitingDialog&&(app.closeDialog(this.waitingDialog),this.waitingDialog=null),0==e.recode||app.showHintMessage(e.retinfo)},onWSonUserLoginMessage:function(e){app.updateSession(e.attach),app.updateUser(e.result),app.updateIosAuditVer((e.attach||{}).iosver);var t=this;t.logining_type&&app.setStorageValue("login_type",t.logining_type);var i={};ls.loadConfig(),function(){var e=0,o=function(){if(i.skinInfo&&i.enemyKind&&i.myAccount&&i.goods&&i.vipInfo){if(t.isLoadLobby)return;t.isLoadLobby=!0,app.updateSkywarGameinfo(i),app.loadLobbyScene({from:"login"})}};app.requestJson({url:"/pipes/skywar/querySkinInfo",data:{bean:{}}},function(n,a){if(!n||a.retcode&&0!=a.retcode)return t.waitingDialog&&(app.closeDialog(t.waitingDialog),t.waitingDialog=null),void(a.retinfo&&app.showHintMessage(a.retinfo));i.skinInfo=a.result,5==++e&&o()}),app.requestJson({url:"/pipes/vip/vipinfos",data:{bean:{}}},function(n,a){if(!n||a.retcode&&0!=a.retcode)return t.waitingDialog&&(app.closeDialog(t.waitingDialog),t.waitingDialog=null),void(a.retinfo&&app.showHintMessage(a.retinfo));i.vipInfo=a.result.vips,5==++e&&o()}),app.requestJson({url:"/pipes/skywar/queryEnemyKind",data:{bean:{}}},function(n,a){if(!n||a.retcode&&0!=a.retcode)return t.waitingDialog&&(app.closeDialog(t.waitingDialog),t.waitingDialog=null),void(a.retinfo&&app.showHintMessage(a.retinfo));i.enemyKind=a.result,5==++e&&o()}),app.requestJson({url:"/pipes/skywar/loadMyAccount",data:{bean:{}}},function(n,a){if(!n||a.retcode&&0!=a.retcode)return t.waitingDialog&&(app.closeDialog(t.waitingDialog),t.waitingDialog=null),void(a.retinfo&&app.showHintMessage(a.retinfo));i.myAccount=a.result,5==++e&&o()}),app.requestJson({url:"/pipes/goods/query"},function(n,a){if(!n||a.retcode&&0!=a.retcode)return t.waitingDialog&&(app.closeDialog(t.waitingDialog),t.waitingDialog=null),void(a.retinfo&&app.showHintMessage(a.retinfo));i.goods=a,5==++e&&o()})}()}}),cc._RF.pop()},{}],MD5:[function(e,t,i){"use strict";cc._RF.push(t,"1f609q3qjdGX6zTGSQINz0l","MD5");var o=0,n=8;function a(e){return f(s(g(e),e.length*n))}function s(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var i=1732584193,o=-271733879,n=-1732584194,a=271733878,s=0;s<e.length;s+=16){var c=i,u=o,g=n,f=a;o=p(o=p(o=p(o=p(o=d(o=d(o=d(o=d(o=l(o=l(o=l(o=l(o=r(o=r(o=r(o=r(o,n=r(n,a=r(a,i=r(i,o,n,a,e[s+0],7,-680876936),o,n,e[s+1],12,-389564586),i,o,e[s+2],17,606105819),a,i,e[s+3],22,-1044525330),n=r(n,a=r(a,i=r(i,o,n,a,e[s+4],7,-176418897),o,n,e[s+5],12,1200080426),i,o,e[s+6],17,-1473231341),a,i,e[s+7],22,-45705983),n=r(n,a=r(a,i=r(i,o,n,a,e[s+8],7,1770035416),o,n,e[s+9],12,-1958414417),i,o,e[s+10],17,-42063),a,i,e[s+11],22,-1990404162),n=r(n,a=r(a,i=r(i,o,n,a,e[s+12],7,1804603682),o,n,e[s+13],12,-40341101),i,o,e[s+14],17,-1502002290),a,i,e[s+15],22,1236535329),n=l(n,a=l(a,i=l(i,o,n,a,e[s+1],5,-165796510),o,n,e[s+6],9,-1069501632),i,o,e[s+11],14,643717713),a,i,e[s+0],20,-373897302),n=l(n,a=l(a,i=l(i,o,n,a,e[s+5],5,-701558691),o,n,e[s+10],9,38016083),i,o,e[s+15],14,-660478335),a,i,e[s+4],20,-405537848),n=l(n,a=l(a,i=l(i,o,n,a,e[s+9],5,568446438),o,n,e[s+14],9,-1019803690),i,o,e[s+3],14,-187363961),a,i,e[s+8],20,1163531501),n=l(n,a=l(a,i=l(i,o,n,a,e[s+13],5,-1444681467),o,n,e[s+2],9,-51403784),i,o,e[s+7],14,1735328473),a,i,e[s+12],20,-1926607734),n=d(n,a=d(a,i=d(i,o,n,a,e[s+5],4,-378558),o,n,e[s+8],11,-2022574463),i,o,e[s+11],16,1839030562),a,i,e[s+14],23,-35309556),n=d(n,a=d(a,i=d(i,o,n,a,e[s+1],4,-1530992060),o,n,e[s+4],11,1272893353),i,o,e[s+7],16,-155497632),a,i,e[s+10],23,-1094730640),n=d(n,a=d(a,i=d(i,o,n,a,e[s+13],4,681279174),o,n,e[s+0],11,-358537222),i,o,e[s+3],16,-722521979),a,i,e[s+6],23,76029189),n=d(n,a=d(a,i=d(i,o,n,a,e[s+9],4,-640364487),o,n,e[s+12],11,-421815835),i,o,e[s+15],16,530742520),a,i,e[s+2],23,-995338651),n=p(n,a=p(a,i=p(i,o,n,a,e[s+0],6,-198630844),o,n,e[s+7],10,1126891415),i,o,e[s+14],15,-1416354905),a,i,e[s+5],21,-57434055),n=p(n,a=p(a,i=p(i,o,n,a,e[s+12],6,1700485571),o,n,e[s+3],10,-1894986606),i,o,e[s+10],15,-1051523),a,i,e[s+1],21,-2054922799),n=p(n,a=p(a,i=p(i,o,n,a,e[s+8],6,1873313359),o,n,e[s+15],10,-30611744),i,o,e[s+6],15,-1560198380),a,i,e[s+13],21,1309151649),n=p(n,a=p(a,i=p(i,o,n,a,e[s+4],6,-145523070),o,n,e[s+11],10,-1120210379),i,o,e[s+2],15,718787259),a,i,e[s+9],21,-343485551),i=h(i,c),o=h(o,u),n=h(n,g),a=h(a,f)}return Array(i,o,n,a)}function c(e,t,i,o,n,a){return h(u(h(h(t,e),h(o,a)),n),i)}function r(e,t,i,o,n,a,s){return c(t&i|~t&o,e,t,n,a,s)}function l(e,t,i,o,n,a,s){return c(t&o|i&~o,e,t,n,a,s)}function d(e,t,i,o,n,a,s){return c(t^i^o,e,t,n,a,s)}function p(e,t,i,o,n,a,s){return c(i^(t|~o),e,t,n,a,s)}function h(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function u(e,t){return e<<t|e>>>32-t}function g(e){for(var t=Array(),i=(1<<n)-1,o=0;o<e.length*n;o+=n)t[o>>5]|=(e.charCodeAt(o/n)&i)<<o%32;return t}function f(e){for(var t=o?"0123456789ABCDEF":"0123456789abcdef",i="",n=0;n<4*e.length;n++)i+=t.charAt(e[n>>2]>>n%4*8+4&15)+t.charAt(e[n>>2]>>n%4*8&15);return i}var m=function(){};m.prototype.hex_md5=function(e){return a(e)};var v=new m;window.md5=v,t.exports=v,cc._RF.pop()},{}],MarqueeNode:[function(e,t,i){"use strict";cc._RF.push(t,"d326eZ6v9BFdJUCJx6s7+ad","MarqueeNode"),cc.Class({extends:cc.Component,properties:{screen:cc.Mask,contentContainer:cc.RichText,rollSpeed:120},onLoad:function(){},clearItemData:function(){this.items=[],this.contentContainer.string=""},addItemData:function(e){this.items||(this.items=[]),e.cycles||(e.cycles=1e9),this.items.push(e)},startPlay:function(){this.running||this._play()},_play:function(){if(this.items&&this.items.length){this.running=!0;for(var e=[],t=[],i=0;i<this.items.length;i++)1==this.items[i].cycles?t.push(this.items[i].content):this.items[i].cycles&&(this.items[i].cycles--,t.push(this.items[i].content),e.push(this.items[i]));this.items=e,this.contentContainer.string=t.join("  ");var o=this.screen.node.getPosition(),n=this.contentContainer.node.width,a=this.screen.node.width;this.contentContainer.node.x=o.x+(a+n)/2,this.contentContainer.enabled=!0;var s=cc.callFunc(function(){this._play()},this),c=cc.moveTo(n/1e3*this.rollSpeed,cc.v2(-o.x-(a+n)/2-10),o.y);this.contentContainer.node.runAction(cc.sequence(c,cc.delayTime(.5),s))}else this.running=!1}}),cc._RF.pop()},{}],MissionDialog:[function(e,t,i){"use strict";cc._RF.push(t,"c68faAUtKFAf7HxFOKKpdk0","MissionDialog"),cc.Class({extends:cc.Component,properties:{scroViewNodeArray:[cc.Node],missionItemPref:cc.Prefab,missionsParentNode:[cc.Node],awardsParentNode:[cc.Node],livenessProgress:cc.ProgressBar,livenessLabel:cc.Label,rewardsBgArray:[cc.Sprite],rewardsIconArray:[cc.Sprite],rewardsNumArray:[cc.Label],rewardIconSpriteFrame:[cc.SpriteFrame],redPoint1:cc.Node,redPoint2:cc.Node,onceBtnNode:cc.Node,missionBtnNode:cc.Node,toggleArray:[cc.Toggle],middleNode:cc.Node},onLoad:function(){this.activeIndex&&this.toggleArray[this.activeIndex-1].check()},initWithData:function(e){var t=this;this.missionData=e;var i=e.daymissions||[],o=e.rewards||[];o.length||(o=[30,60,90,120,150]);var n=e.oncemissions||[];this.awardsParentNode[0].removeAllChildren(),this.missionsParentNode[0].removeAllChildren();var a=0,s=!1;if(i&&i.length){a=2;var c=0;this.schedule(function(){var e=i[c];if(e){var o=cc.instantiate(t.missionItemPref),n=o.getComponent("MissionItemNode");n.missionType="day",n.parentScript=t,n.updateUserInfo=t.gameScript.updateUserInfo.bind(t.gameScript),n.updateRedPoint=t.gameScript.updateMissionRedPoint.bind(t.gameScript),n.initWithData(e),o.parent=t.awardsParentNode[0],e.missionstatus==ls.LIVENESS_STATUS_REACH&&(s=!0),++c>=i.length&&(t.redPoint2.active=s)}},0,i.length-1)}var r=!1;if(n&&n.length){a=1;var l=0;this.schedule(function(){var e=n[l];if(e){var i=cc.instantiate(t.missionItemPref),o=i.getComponent("MissionItemNode");o.missionType="once",o.parentScript=t,o.updateUserInfo=t.gameScript.updateUserInfo.bind(t.gameScript),o.updateRedPoint=t.gameScript.updateMissionRedPoint.bind(t.gameScript),o.initWithData(e),i.parent=t.missionsParentNode[0],e.missionstatus==ls.LIVENESS_STATUS_REACH&&(r=!0),++l>=n.length&&(t.redPoint1.active=r)}},0,n.length-1)}n.length||(this.scroViewNodeArray[0].active=!1,this.scroViewNodeArray[1].active=!0,this.onceBtnNode.active=!1,this.missionBtnNode.active=!1,this.middleNode.y=-10);var d=o[o.length-1].reachliveness||1,p=e.userliveness;this.livenessLabel.string=p,this.livenessProgress.progress=p/d;for(var h=0;h<o.length;h++){var u=o[h],g=this.rewardsBgArray[h],f=this.rewardsIconArray[h],m=this.rewardsNumArray[h];if(u&&f&&m){var v=0;u.livenessstatus==ls.LIVENESS_STATUS_REACH&&(v=1),u.livenessstatus==ls.LIVENESS_STATUS_FINISH&&(v=2),g.enabled=1==v,f.spriteFrame=this.rewardIconSpriteFrame[v],m.string=u.reachliveness||0}}a&&!this.activeIndex&&this.onSelectClick(null,a)},onSelectClick:function(e,t){var i=this;this.activeIndex=t;for(var o=this.scroViewNodeArray,n=0;n<o.length;n++){var a=o[n],s=n==parseInt(t)-1;a.active=s}this.scheduleOnce(function(){i.node.getComponent("DcScrollView").onScrolling()},.1)},onLivenessrewardClick:function(e,t){var i=this,o=parseInt(t),n=this.missionData.rewards[o-1].reachliveness;if(!(this.missionData.userliveness<n||this.missionData.rewards[o-1].livenessstatus!=ls.LIVENESS_STATUS_REACH)){var a=this.missionData.rewards[o-1].livenessrecordid;app.requestJson({url:"/pipes/mission/livenessreward/"+a},function(e,t){e&&t&&(0!=t.retcode&&t.retinfo?app.showHintMessage(t.retinfo):(app.openDialog("GoodsResultDialog",{goodsitems:t.result.goodsitems}),i.gameScript.updateUserInfo&&i.gameScript.updateUserInfo(),i.gameScript.updateMissionRedPoint&&i.gameScript.updateMissionRedPoint(),app.requestJsonByWaiting({url:"/pipes/mission/records"},function(e,t){e&&t&&i.initWithData(t.result)})))})}},onCloseClick:function(){app.closeDialog(this)},update:function(e){if(2==this.activeIndex)for(var t=0;t<this.rewardsBgArray.length;t++){var i=this.rewardsBgArray[t];if(i.enabled){var o=.4*e*240;i.node.angle-=o,this.rewardsIconArray[t].node.angle+=o}}}}),cc._RF.pop()},{}],MissionItemNode:[function(e,t,i){"use strict";cc._RF.push(t,"9f828OMctFKWq+K3HpXLDo9","MissionItemNode"),cc.Class({extends:cc.Component,properties:{nameLabel:cc.Label,iconSprite:cc.Sprite,barSprite:cc.Sprite,barLabel:cc.Label,lqBtn:cc.Button,qwBtn:cc.Button,statuLabel:cc.Label,icon1Sprite:cc.Sprite,name1Label:cc.Label,icon2Sprite:cc.Sprite,num1Label:cc.Label,num2Label:cc.Label},onLoad:function(){},initWithData:function(e){this.missionData=e,this.nameLabel.string=e.missiontitle,this.barLabel.string=e.currcount+"/"+e.reachcount,this.barSprite.fillRange=e.currcount/e.reachcount||0,e.missionstatus==ls.LIVENESS_STATUS_REACH&&(this.qwBtn.node.active=!1),e.missionstatus==ls.LIVENESS_STATUS_FINISH&&(this.qwBtn.interactable=!1,this.qwBtn.node.getComponent(cc.Sprite).materials[0]=this.qwBtn.grayMaterial,this.statuLabel.materials[0]=this.qwBtn.grayMaterial,this.statuLabel.string="\u5df2\u9886\u53d6",this.lqBtn.node.active=!1),e.missionstatus==ls.LIVENESS_STATUS_DOING&&(this.lqBtn.node.active=!1);var t=e.goodsitems;1==t.length&&(this.num2Label.node.active=!1,this.icon2Sprite.node.active=!1);for(var i=0;i<t.length;i++){var o=t[i];0==i&&(o.goodstype==ls.GOODS_TYPE_COIN?(this.name1Label.node.active=!1,this.icon1Sprite.node.active=!0):(this.icon1Sprite.node.active=!1,this.name1Label.node.active=!0)),(0==i?this.num1Label:this.num2Label).string="x"+o.goodscount}},onReachClick:function(){var e=this;app.requestJson({url:"/pipes/mission/reach"+e.missionType+"/"+e.missionData.missionrecordid},function(t,i){t&&i&&(0!=i.retcode&&i.retinfo?app.showHintMessage(i.retinfo):(app.openDialog("GoodsResultDialog",{goodsitems:i.result.goodsitems}),app.requestJsonByWaiting({url:"/pipes/mission/records"},function(t,i){t&&i&&(e.updateUserInfo&&e.updateUserInfo(),e.updateRedPoint&&e.updateRedPoint(),e.parentScript.initWithData(i.result))})))})}}),cc._RF.pop()},{}],OnceGoodsDialog:[function(e,t,i){"use strict";cc._RF.push(t,"5f4d5d91K9EsbMQ1Hntw9MA","OnceGoodsDialog"),cc.Class({extends:cc.Component,properties:{priceLabel:cc.Label,goodsIconArray:[cc.Sprite],goodsNameArray:[cc.Label],goodsCountArray:[cc.Label]},onLoad:function(){var e=app.currParamData();this.toPayDialogCallback=e?e.toPayDialogCallback:null},initWithData:function(e){var t=e.rmbonces||[];this.rmbonces=t,cc.log("\u9996\u5145:",t);for(var i=0;i<t.length;i++){var o=t[i].goodsitems;if(o&&o.length)for(var n=0;n<o.length;n++){var a=o[n],s=ls.loadGoodsIntro(a.goodstype,a.goodsobjid),c="x"+a.goodscount;a.goodscount>=1e4&&a.goodscount%1e4==0&&(c="x"+parseInt(a.goodscount/1e4)+"\u4e07"),this.goodsNameArray[n].string=s.goodsname,this.goodsCountArray[n].string=c,this.goodsIconArray[n].spriteFrame=s.spriteFrame}}},onBuyClicked:function(){var e=this,t=e.rmbonces[0];app.openDialog("PayDialog",{gameScript:e.gameScript,goods:t,preokFunc:function(){app.closeDialog(e),e.gameScript.updateUserInfo()}},null,0,null,!0,{init:function(e){e.setPosition(cc.v2(cc.winSize.width/2,-250))},action:cc.moveTo(.3,cc.v2(cc.winSize.width/2,250))})},onCloseClick:function(){this.toPayDialogCallback&&this.toPayDialogCallback(),app.closeDialog(this)}}),cc._RF.pop()},{}],OrderGoodsDialog:[function(e,t,i){"use strict";cc._RF.push(t,"0c05fEt8r5Iv6yyANmqC+kc","OrderGoodsDialog"),cc.Class({extends:cc.Component,properties:{scroViewNodeArray:[cc.Node],coinsLabel:cc.Label,couponsLabel:cc.Label,diamondLabel:cc.Label,itemPref:cc.Prefab,cardNodeArray:[cc.Node],packetNodeArray:[cc.Node]},onLoad:function(){var e=cc.winSize;this.node.height=e.height,this.node.width=e.width,this.node.y=-e.height/2,this.node.runAction(cc.moveTo(.2,cc.v2(e.width/2,e.height/2)));var t=app.currParamData();this.lobbyHideOrDisplayCallback=t.lobbyHideOrDisplayCallback||null;var i=app.currUser();this.coinsLabel.string=i.coins||0,this.couponsLabel.string=i.coupons||0,this.diamondLabel.string=i.diamonds||0},updateCurrUser:function(){var e=app.currUser();this.coinsLabel.string=e.coins||0,this.couponsLabel.string=e.coupons||0,this.diamondLabel.string=e.diamonds||0},initWithData:function(e){var t=this,i=e.rmbcoins||[],o=e.rmbdiamonds||[],n=e.rmbcards||[],a=e.rmbpackets||[];cc.log("\u8d2d\u4e70\u5b50\u5f39:",i),cc.log("\u8d2d\u4e70\u7ed3\u6676:",o),cc.log("\u5361:",n),cc.log("\u6bcf\u65e5\u6d3b\u52a8",a);for(var s=0;s<n.length;s++){var c=n[s];this.cardNodeArray[s]&&this.initCardsNode(this.cardNodeArray[s],c)}for(var r=0;r<a.length;r++){var l=a[r];this.packetNodeArray[r]&&this.initPacketsNode(this.packetNodeArray[r],l)}this.scroViewNodeArray[1].getComponent(cc.ScrollView).content.removeAllChildren();var d=0;this.schedule(function(){var e=i[d];if(e){var o=cc.instantiate(t.itemPref),n=o.getComponent("ShoppingItemNode");n.gameScript=t.gameScript,n.payScript=t,n.iconSprite.node.active=!1,n.payType="rmb",n.initWithData(e,d+1),o.parent=t.scroViewNodeArray[1].getComponent(cc.ScrollView).content,d++}},0,i.length-1),this.scroViewNodeArray[2].getComponent(cc.ScrollView).content.removeAllChildren();var p=0;this.schedule(function(){var e=o[p];if(e){var i=cc.instantiate(t.itemPref),n=i.getComponent("ShoppingItemNode");n.gameScript=t.gameScript,n.payScript=t,n.iconSprite.node.active=!1,n.payType="rmb",n.initWithData(e,p+1),i.parent=t.scroViewNodeArray[2].getComponent(cc.ScrollView).content,p++}},0,o.length-1)},initCardsNode:function(e,t){var i=cc.find("payBtn/t1",e).getComponent(cc.Label),o=cc.find("tipsNode2/goodsLabel",e).getComponent(cc.Label),n=(cc.find("tipsNode1/coinLabel",e).getComponent(cc.Label),e.getChildByName("payBtn"));n.goodsid=t.goodsid,n.goods=t;t.giftendtime,t.showflag;if(i.string="\uffe5 "+t.price/100,t.goodsitems&&t.goodsitems.length){for(var a="",s=0;s<t.goodsitems.length;s++){var c=t.goodsitems[s],r="";switch(c.goodstype){case ls.GOODS_TYPE_COIN:r="\u5b50\u5f39",r=c.goodscount+r;break;case ls.GOODS_TYPE_DIAMOND:r="+\u7ed3\u6676x",r+=c.goodscount;break;case ls.GOODS_TYPE_COUPON:r="+\u5956\u5238x",r+=c.goodscount}a+=r}o.string=a}},onBuyClicked:function(e){var t=this,i=e.target.goods||null;i&&app.openDialog("PayDialog",{gameScript:t.gameScript,goods:i,goodsname:e.target.goodsname,preokFunc:function(){t.gameScript.updateUserInfo(t.updateCurrUser.bind(t))}},null,0,null,!0,{init:function(e){e.setPosition(cc.v2(cc.winSize.width/2,-250))},action:cc.moveTo(.3,cc.v2(cc.winSize.width/2,250))})},initPacketsNode:function(e,t){var i=cc.find("payBtn/t1",e).getComponent(cc.Label),o=cc.find("coin/numLabel",e).getComponent(cc.Label),n=cc.find("coin/icon",e).getComponent(cc.Sprite),a=[o,cc.find("coupon/numLabel",e).getComponent(cc.Label)],s=[n,cc.find("coupon/icon",e).getComponent(cc.Sprite)],c=e.getChildByName("payBtn");c.goodsid=t.goodsid,c.goods=t;t.giftendtime,t.showflag;if(i.string="\uffe5 "+t.price/100,t.goodsitems&&t.goodsitems.length)for(var r=0;r<t.goodsitems.length;r++){var l=t.goodsitems[r],d=ls.loadGoodsIntro(l.goodstype,l.goodsobjid);s[r].spriteFrame=d.spriteFrame;var p="x"+l.goodscount;l.goodscount>=1e4&&l.goodscount%1e4==0&&(p="x"+parseInt(l.goodscount/1e4)+"\u4e07"),a[r].string=p}},onSelectClick:function(e,t){for(var i=this.scroViewNodeArray,o=0;o<i.length;o++){var n=i[o],a=o==parseInt(t)-1;n.active=a}},onPagRecordClick:function(){var e=this;app.openDialog("ShopPayRecordDialog",null,function(t){var i=t.getComponent("ShopPayRecordDialog");i.parentScript=e,i.initWithData("pay")})},onCloseClick:function(){var e=this,t=this,i=cc.winSize;this.node.runAction(cc.moveTo(.2,cc.v2(i.width/2,-i.height/2))),this.scheduleOnce(function(){app.closeDialog(t),e.lobbyHideOrDisplayCallback&&e.lobbyHideOrDisplayCallback(!1)},.2)}}),cc._RF.pop()},{}],PayDialog:[function(e,t,i){"use strict";cc._RF.push(t,"024235uX8NHH71HOcVAbGeQ","PayDialog");var o=e("Application");cc.Class({extends:cc.Component,properties:{goodsNameLabel:cc.Label,priceLabel:cc.Label,scrollContent:cc.Node,selectFrames:[cc.SpriteFrame],iconFrames:[cc.SpriteFrame]},preLoad:function(e,t){var i=o.currUser(),n=o.currParamData();if(this._config=n,!n.notrmb)return i.shenfenname2?i.age<8?(o.openAlertDialog("\u60a8\u672a\u6ee18\u5468\u5c81\uff0c\u4e0d\u80fd\u8fdb\u884c\u5145\u503c\uff01"),void e.destroy()):void(i.age<18?o.requestJson({url:"/pipes/order/checkage",data:{price:n.goods.price*(n.goodscount||1)}},function(i,n){return i?n.success?void t():(o.openAlertDialog(n.retinfo||"\u53d1\u9001\u8bf7\u6c42\u652f\u4ed8\u5931\u8d25"),void e.destroy()):(o.openAlertDialog("\u8bf7\u6c42\u652f\u4ed8\u5f02\u5e38"),void e.destroy())}):t()):(o.openConfirmDialog("\u60a8\u6ca1\u6709\u5b9e\u540d\u767b\u8bb0\uff0c\u4e0d\u80fd\u8fdb\u884c\u5145\u503c\uff0c\u662f\u5426\u73b0\u5728\u5b9e\u540d\u767b\u8bb0?",function(){o.openDialog("UserShenfenDialog",{gameScript:n.gameScript})}),void e.destroy());t()},onLoad:function(){var e=this._config||o.currParamData();if(this.goods=e.goods,this.goodscount=e.goodscount||0,this.preokFunc=e.preokFunc,this.closeFunc=e.closeFunc,e.notrmb)return this.node.active=!1,void this.onPayClicked();this.scrollContent.children[0].active=!1;var t=e.goodsname;if(!t){if(!(t=this.goods.goodsname)){var i=ls.loadGoodsIntro(this.goods.goodstype,this.goods.goodsobjid);i&&(t=i.goodsname)}t=(t||"\u5546\u54c1")+"x"+(this.goodscount||1)}this.goodsNameLabel.string=t||"",this.priceLabel.string="\uffe5"+parseInt(this.goods.price*(this.goodscount||1)/100),cc.log("\u8d2d\u4e70\u5546\u54c1\u4fe1\u606f\uff1a",this.goods);var n=JSON.parse(ls.getConfig("payAllSubTypes","{}")),a=ls.getConfig("paySubTypes","").split(";");cc.log("paySubTypes = "+ls.getConfig("paySubTypes",""));for(var s=["iewxpay","xxx","iealipay","xxx","iebankpay","ieysfpay","xxx","xxx"],c=[],r=0;r<a.length;r++)if(a[r]&&n[a[r]]){(p=cc.instantiate(this.scrollContent.children[0])).subpaytype=a[r];for(var l=-1,d=0;d<s.length;d++)if(s[d]==a[r]){l=d;break}l>-1&&(p.iconframeIndex=l,c.push(p))}this.scrollContent.removeAllChildren();for(r=0;r<c.length;r++){var p=c[r];cc.log("\u52a0\u8f7dpaysubtype: "+p.subpaytype+"\uff0ciconframeIndex: "+p.iconframeIndex),p.getChildByName("iconsprite").getComponent(cc.Sprite).spriteFrame=this.iconFrames[p.iconframeIndex],p.getChildByName("label").getComponent(cc.Label).string=n[p.subpaytype],p.getChildByName("currsprite").getComponent(cc.Sprite).spriteFrame=this.selectFrames[0==r?1:0],p.active=!0,this.scrollContent.addChild(p),0==r&&(this.currItemNodeIndex=0)}},onDestroy:function(){},onCloseClicked:function(){this.closeFunc&&this.closeFunc(),o.closeDialog(this)},onSelectItem:function(e){for(var t=e.target,i=this.scrollContent.children,o=0;o<i.length;o++){var n=i[o];t==n?(this.currItemNodeIndex=o,n.getChildByName("currsprite").getComponent(cc.Sprite).spriteFrame=this.selectFrames[1]):n.getChildByName("currsprite").getComponent(cc.Sprite).spriteFrame=this.selectFrames[0]}},onPayClicked:function(){var e=this,t=e.goods,i={payway:cc.sys.isNative?10:20,goodsid:t.goodsid},n=this.scrollContent.children[this.currItemNodeIndex];n&&(i.subpaytype=n.subpaytype),e.goodscount&&(i.goodscount=e.goodscount),cc.log("\u5145\u503c\u4fe1\u606f\uff1a",i),o.requestJsonByWaiting({url:"/pipes/order/prepay",data:{bean:i}},function(t,i){t?i.success?i.result.content&&cc.sys.isNative&&window.jsb?o.nativeOpenWebView(i.result.content,"pay:"+(i.result.body||""),function(){o.openAlertDialog("\u5b8c\u6210\u652f\u4ed8\u540e\u70b9\u786e\u5b9a!",function(){o.closeDialog(e),e.preokFunc&&e.preokFunc()})}):i.result.goodsitems?(o.closeDialog(e),e.preokFunc&&e.preokFunc(),o.openDialog("GoodsResultDialog",{goodsitems:i.result.goodsitems})):(o.closeDialog(e),e.preokFunc&&e.preokFunc()):o.showHintMessage(i.retinfo||"\u53d1\u9001\u8bf7\u6c42\u652f\u4ed8\u5931\u8d25"):o.showHintMessage("\u8bf7\u6c42\u652f\u4ed8\u5f02\u5e38")})}}),cc._RF.pop()},{Application:"Application"}],PlaneBoomEffect:[function(e,t,i){"use strict";cc._RF.push(t,"3e3a4yw/7lKYomiiqKNPFYB","PlaneBoomEffect"),cc.Class({extends:cc.Component,properties:{boomAnim:cc.Animation},playBoom:function(){var e=this;this.boomAnim.play(),this.boomAnim.on("finished",function(){e.boomPool&&e.boomPool.put(e.node)},this)}}),cc._RF.pop()},{}],PlaneSkinDialog:[function(e,t,i){"use strict";cc._RF.push(t,"ffc9fDXYVVD4qMppPUqWPbg","PlaneSkinDialog"),cc.Class({extends:cc.Component,properties:{scrollPanel:cc.ScrollView,skinItemPrefab:cc.Prefab,planeParentNode:cc.Node,duihuanbtn:cc.Sprite,ssrSprite:cc.Sprite,ssrSpriteFrames:[cc.SpriteFrame],nameLable:cc.Label,tejiLable:cc.Label,descLable:cc.Label,iconSprite:cc.Sprite,coinsLabel:cc.Label,couponsLabel:cc.Label,diamondLabel:cc.Label,buyBtn:cc.Button,useBtn:cc.Button,pageNode:cc.Node,planePageView:cc.PageView,coinNumLabel:cc.Label,useLabel:cc.Label},onLoad:function(){var e=cc.winSize;this.node.height=e.height,this.node.width=e.width,this.node.y=-e.height/2,this.node.runAction(cc.moveTo(.2,cc.v2(e.width/2,e.height/2)));var t=app.currParamData(),i=t.gameScript;this.gameInfo=i.gameInfo,this.planePrefabs=i.planePrefabs,this.updateUserInfo=t.updateUserInfo||null,this.lobbyHideOrDisplayCallback=t.lobbyHideOrDisplayCallback||null,this.gameScript=i,this.initWithData(i.gameInfo),this.updateCurrUser()},onDestroy:function(){},updateCurrUser:function(){var e=app.currUser();this.coinsLabel.string=e.coins||0,this.couponsLabel.string=e.coupons||0,this.diamondLabel.string=e.diamonds||0,this.currUser=e},initWithData:function(e){var t=this,i=e.myAccount.currSkinid||ls.DEFAULT_SKINID;this._currSkinid=i;var o=this;o.scrollPanel.content.removeAllChildren();var n=e.skinInfo||[],a=null;this.pageNode.width=cc.winSize.width,o.currPageIndex=0;for(var s=0;s<n.length;s++){cc.instantiate(o.pageNode).parent=o.planeParentNode}var c=0;this.schedule(function(){var s=n[c];if(s){var r=cc.instantiate(t.skinItemPrefab),l=r.getComponent("PlaneSkinItem");l.pageIndex=c,l.initWithData(o,s,e.myAccount),o.scrollPanel.content.addChild(r),s.skinid==i&&(a=l,o.currPageIndex=c,o.useLabel.string="\u4f7f\u7528\u4e2d",o.useBtn.interactable=!1,a.onSelect(null,!0),cc.log("\u9ed8\u8ba4\u9009\u4e2d: ",o.currPageIndex));var d=o.planeParentNode.children[c],p=cc.instantiate(o.planePrefabs[s.skinid-ls.DEFAULT_SKINID]),h=p.getComponent("SkywarPlane");h.lobbyScript=t.gameScript,h.showShotting(),p.parent=d,c++}},0,n.length-1)},onUseBtnClick:function(){for(var e=this,t=this.gameInfo.skinInfo||[],i=this.scrollPanel.content.children,o=0;o<t.length;o++){if(t[o].skinid==this._currSkinid)i[o].getComponent("PlaneSkinItem").updateTipsNode(!1,!1)}var n=i[this.currPageIndex].getComponent("PlaneSkinItem");n.skinSuo=!1,e.duihuanbtn.node.active=!1,n.updateTipsNode(!1,!0),this._currSkinid=t[this.currPageIndex].skinid,this.initBtnState(!1,t[this.currPageIndex]),app.requestJson("/pipes/skywar/updateSkin/"+this._currSkinid,function(t,i){t&&(i&&i.retinfo&&0!=i.retcode&&app.showHintMessage(i.retinfo),e.gameScript&&e.gameScript.updateUserInfo())})},onCoinBuyClick:function(){var e=this,t=(this.gameInfo.skinInfo||[])[this.currPageIndex];t&&(this.currUser.coins<t.coin0price?app.showHintMessage("\u5b50\u5f39\u4e0d\u8db3"):app.requestJson({url:"/pipes/skywar/paySkin",data:{bean:{buytype:ls.GOODS_BUY_COIN,skinid:t.skinid,expires:0}}},function(t,i){t&&(i&&i.retinfo&&0!=i.retcode&&app.showHintMessage(i.retinfo),e.onUseBtnClick(),e.gameScript&&e.gameScript.updateUserInfo(e.updateCurrUser.bind(e)))}))},onDiamondBuyClick:function(){var e=(this.gameInfo.skinInfo||[])[this.currPageIndex];if(e){var t=this;app.openDialog("DiamondsBuySkinDialog",e,function(e){var i=e.getComponent("DiamondsBuySkinDialog");i.gameScript=t.gameScript,i.parentScript=t},null,!1,!0)}},initBtnState:function(e,t){var i=!!e;this.buyBtn.node.active=i,this.useBtn.node.active=!i,i&&(this.coinNumLabel.string=t.coin0price||0),t.skinid==this._currSkinid?(this.useLabel.string="\u4f7f\u7528\u4e2d",this.useBtn.interactable=!1):(this.useLabel.string="\u4f7f\u7528",this.useBtn.interactable=!0)},selectSkinItem:function(e,t){var i=this,o=e.skinItemObj;cc.log("selectSkinItem: ",o.skinid);for(var n=i.scrollPanel.content.children,a=0;a<n.length;a++){var s=n[a].getComponent("PlaneSkinItem");s.skinSuo&&(s.maskNode.active=!0);var c=o.skinid==s.skinItemObj.skinid;s.bgSprite.node.color=c?cc.color(255,232,127,255):cc.color(230,212,180,255),c&&(s.maskNode.active=!1)}var r=ls.loadGoodsIntro(o.skinid);i.nameLable.string=o.skinname||"",i.iconSprite.string=o.skinname||"",i.tejiLable.string=r.goodsremark||"\u65e0",i.descLable.string=r.goodsdesc||"",(r.goodsdesc||"").indexOf("\u9650\u5b9a")>=0?i.ssrSprite.spriteFrame=i.ssrSpriteFrames[4]:o.incfrenzyseconds>0?i.ssrSprite.spriteFrame=i.ssrSpriteFrames[3]:o.inctrackseconds>0?i.ssrSprite.spriteFrame=i.ssrSpriteFrames[2]:o.diamond0price>0||o.diamond7price>0?i.ssrSprite.spriteFrame=i.ssrSpriteFrames[1]:i.ssrSprite.spriteFrame=i.ssrSpriteFrames[0],i.duihuanbtn.node.active=e.skinSuo&&(o.diamond0price>0||o.diamond7price>0),i.iconSprite.spriteFrame=ls.loadGoodsSpriteFrame(o.skinid),i.currPageIndex=e.pageIndex||0,i.scheduleOnce(function(){i.planePageView.scrollToPage(i.currPageIndex,.1)},.01),cc.log("\u9009\u4e2dself.currPageIndex: "+i.currPageIndex)},onPageView:function(e,t){var i=this.planePageView.getCurrentPageIndex();this.currPageIndex=i||0;var o=this.scrollPanel.content.children[this.currPageIndex].getComponent("PlaneSkinItem");o.skinItemObj;o.onSelect(null,!0);var n=100*i;this.scrollPanel.scrollToOffset(cc.v2(n,0),.1)},onCloseClick:function(){var e=this,t=this,i=cc.winSize;this.node.runAction(cc.moveTo(.2,cc.v2(i.width/2,-i.height/2))),this.scheduleOnce(function(){app.closeDialog(t),e.lobbyHideOrDisplayCallback&&e.lobbyHideOrDisplayCallback(!1)},.2)},onWarehouseClick:function(){var e=this;app.openDialog("WarehouseDialog",{updateUserInfo:e.gameScript.updateUserInfo.bind(e.gameScript)},function(t){var i=t.getComponent("WarehouseDialog");i.gameScript=e.gameScript,i.initWithData(e.gameInfo)})}}),cc._RF.pop()},{}],PlaneSkinItem:[function(e,t,i){"use strict";cc._RF.push(t,"307caJyw9BLwLexn7pOx8sf","PlaneSkinItem"),cc.Class({extends:cc.Component,properties:{tipSprite:cc.Sprite,tipZhanFrame:cc.SpriteFrame,tipSuoFrame:cc.SpriteFrame,maskNode:cc.Node,norBgSpriteFrame:cc.SpriteFrame,actBgSpriteFrame:cc.SpriteFrame,bgSprite:cc.Sprite,planeSprite:cc.Sprite},updateTipsNode:function(e,t){e?(this.tipSprite.spriteFrame=this.tipSuoFrame,this.tipSprite.node.active=!0):t?(this.tipSprite.spriteFrame=this.tipZhanFrame,this.tipSprite.node.active=!0):this.tipSprite.node.active=!1},initWithData:function(e,t,i){if(this.parentScript=e,this.skinItemObj=t,i.currSkinid==t.skinid)this.tipSprite.spriteFrame=this.tipZhanFrame,this.tipSprite.node.active=!0;else if(t.skinid==ls.DEFAULT_SKINID)this.tipSprite.node.active=!1;else{for(var o=!1,n=i.skinRecords||[],a=0;a<n.length;a++)if(n[a].skinid==t.skinid){o=!0;break}o?this.tipSprite.node.active=!1:(this.tipSprite.spriteFrame=this.tipSuoFrame,this.skinSuo=!0,this.maskNode.active=!0,this.tipSprite.node.active=!0)}this.planeSprite.spriteFrame=ls.loadGoodsSpriteFrame(t.skinid)},onSelect:function(e,t){this.parentScript.selectSkinItem(this,t),this.parentScript.initBtnState(this.skinSuo,this.skinItemObj)}}),cc._RF.pop()},{}],RaderNode:[function(e,t,i){"use strict";cc._RF.push(t,"f0caaSYSgZPHr86EzfYUMyu","RaderNode"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onCollisionEnter:function(e,t){var i=this,o=this.gameScript,n=this.parentScript;if(o&&n&&"EnemyBulletNode"==e.node.name&&n.isShotRader&&!n.isDeading&&!this.isMovingBy&&n.playerInfo){var a=e.node,s=(n.planeNode,200-Math.abs(a.x-n.node.x)+20);if(s=a.x>=n.node.x?-s:s,Math.abs(n.node.x+s)>cc.winSize.width/2){var c=400-Math.abs(s);s=s>=0?-c:c}this.isMovingBy=!0,n.node.runAction(cc.sequence(cc.moveBy(.3,cc.v2(s,0)),cc.callFunc(function(){i.isMovingBy=!1})))}}}),cc._RF.pop()},{}],RankingDialog:[function(e,t,i){"use strict";cc._RF.push(t,"b5563rB9ONDWb0dTZC9/0pa","RankingDialog"),cc.Class({extends:cc.Component,properties:{couponsScroView:cc.ScrollView,nuclearsScroView:cc.ScrollView,itemPref:cc.Prefab,zanBtnNode:cc.Node},onLoad:function(){var e=app.currParamData();this.updateUserInfo=e.updateUserInfo},initWithData:function(e){var t=this,i=e.coupons,o=e.nuclears,n=0;this.schedule(function(){var e=i[n];if(e){var o=cc.instantiate(t.itemPref);o.getComponent("RankingItemNode").initWithData(e,"coupon"),o.parent=t.couponsScroView.content,n++}},0,i.length-1);var a=0;this.schedule(function(){var e=o[a];if(e){var i=cc.instantiate(t.itemPref);i.getComponent("RankingItemNode").initWithData(e,"nuclear"),i.parent=t.nuclearsScroView.content,t.node.getComponent("DcScrollView").onScrolling(),a++}},0,o.length-1),this.couponsScroView.node.active=!1,this.nuclearsScroView.node.active=!0;var s=this.gameInfo?this.gameInfo.myAccount.zanRankDay:null;if(s){var c=new Date,r=c.getFullYear(),l=c.getMonth()+1;l=l<10?"0"+l:l+"";var d=c.getDate(),p=""+r+l+(d=d<10?"0"+d:d+"");p==s&&(this.zanBtnNode.active=!1),this.zanRankDay=p}},onSelectClick:function(e,t){var i=this;switch(t){case"nuclears":this.couponsScroView.node.active=!1,this.nuclearsScroView.node.active=!0;break;case"coupons":this.nuclearsScroView.node.active=!1,this.couponsScroView.node.active=!0}this.scheduleOnce(function(){i.node.getComponent("DcScrollView").onScrolling()},.1)},onCloseClick:function(){app.closeDialog(this)},onZanClick:function(e){var t=this;this.zanBtnNode.active=!1,app.requestJson({url:"/pipes/skywar/zanRank"},function(e,i){e&&i&&(0!=i.retcode&&i.retinfo?app.showHintMessage(i.retinfo):(t.gameScript.rankingBtnRedPointNode.active=!1,app.openDialog("GoodsResultDialog",{goodsitems:i.result.goodsitems}),t.updateUserInfo&&t.updateUserInfo()))})}}),cc._RF.pop()},{}],RankingItemNode:[function(e,t,i){"use strict";cc._RF.push(t,"7effdMViTtA8rZXJSF97xwL","RankingItemNode"),cc.Class({extends:cc.Component,properties:{qsNodeArray:[cc.Node],rankingIndex:cc.Label,userHeading:cc.Sprite,userName:cc.Label,userQianMing:cc.Label,nuclearNode:cc.Node,couponNode:cc.Node,numLabel:cc.Label},onLoad:function(){},initWithData:function(e,t){var i=e.player;this.userName.string=i.username,app.loadUserFace(this.userHeading,i),"nuclear"==t&&(this.nuclearNode.active=!0,this.couponNode.active=!1),"coupon"==t&&(this.nuclearNode.active=!1,this.couponNode.active=!0,this.userQianMing.node.active=!1,this.userName.node.y=0),this.numLabel.string=e.rankvalue>=1e6?parseInt(e.rankvalue/1e4)+"\u4e07":e.rankvalue;var o=e.rankindex;if(o<4){for(var n=0;n<this.qsNodeArray.length;n++){var a=n==o-1;this.qsNodeArray[n].active=a}this.rankingIndex.node.parent.active=!1}else{for(var s=0;s<this.qsNodeArray.length;s++){this.qsNodeArray[s].active=!1}this.rankingIndex.string=o,this.rankingIndex.node.parent.active=!0}}}),cc._RF.pop()},{}],RomeSelectDialog:[function(e,t,i){"use strict";cc._RF.push(t,"c7e25jQ9udJRIZ4xgh0b1IF","RomeSelectDialog"),cc.Class({extends:cc.Component,properties:{animList:[cc.Animation],mask2Node:cc.Node,mask3Node:cc.Node,mask4Node:cc.Node},onLoad:function(){var e=this,t=cc.winSize;this.node.height=t.height,this.node.width=t.width,this.node.y=-t.height/2,this.node.runAction(cc.moveTo(.2,cc.v2(t.width/2,t.height/2))),this.scheduleOnce(function(){for(var t=0;t<e.animList.length;t++){e.animList[t].play()}},.2);var i=app.currParamData();this.gameScript=i.gameScript;var o=this.gameScript.gameInfo.myAccount.fireLevel;this.mask2Node.active=o<100,this.mask3Node.active=o<100,this.mask4Node.active=o<1e3,this.gameClickCallback=i.gameClickCallback||null,this.lobbyHideOrDisplayCallback=i.lobbyHideOrDisplayCallback||null},onJQQDClick:function(){app.showHintMessage("\u656c\u8bf7\u671f\u5f85\uff01")},onHelpBtnClick:function(){app.openAlertLeftDialog("1.VIP3\u5df2\u4ee5\u4e0a\u73a9\u5bb6\u53ef\u5f00\u542f\u201c\u5355\u4eba\u6a21\u5f0f\u201d, \u5f00\u5173\u5f00\u542f\u540e\u9009\u62e9\u4efb\u610f\u6218\u573a,\u5747\u53ef\u8fdb\u5165\u5355\u4eba\u6218\u573a.\n2.\u5355\u4eba\u6218\u573a\u7684\u6e38\u620f\u73a9\u6cd5\u4e0e\u516c\u5f00\u6218\u573a\u76f8\u540c, \u4ec5\u5176\u4ed6\u73a9\u5bb6\u65e0\u6cd5\u8fdb\u5165\u623f\u95f4.")},onGameClick:function(e,t){var i=this,o=parseInt(t),n=app.currUser(),a=this.gameScript.gameInfo.myAccount.fireLevel;(2==o||3==o)&&a<100?app.openAlertDialog("\u98de\u673a\u7b49\u7ea7\u8fbe\u5230Lv.100\u624d\u80fd\u8fdb\u5165\u6b64\u623f\u95f4\u3002"):(2==o||3==o)&&n.coins<1e5?app.openAlertDialog("\u5b50\u5f39\u6570\u91cf\u8d85\u8fc710\u4e07\u624d\u80fd\u8fdb\u5165\u6b64\u623f\u95f4,\u662f\u5426\u524d\u5f80\u5145\u503c\uff1f",function(){i.gameScript.onOrderGoodsClick()}):4==o&&a<1e3?app.openAlertDialog("\u98de\u673a\u7b49\u7ea7\u8fbe\u5230Lv.1000\u624d\u80fd\u8fdb\u5165\u6b64\u623f\u95f4\u3002"):4==o&&n.coins<5e5?app.openAlertDialog("\u5b50\u5f39\u6570\u91cf\u8d85\u8fc750\u4e07\u624d\u80fd\u8fdb\u5165\u6b64\u623f\u95f4,\u662f\u5426\u524d\u5f80\u5145\u503c\uff1f",function(){i.gameScript.onOrderGoodsClick()}):5==o&&n.coins<5e5?app.openAlertDialog("\u5b50\u5f39\u6570\u91cf\u8d85\u8fc750\u4e07\u624d\u80fd\u8fdb\u5165\u6b64\u623f\u95f4,\u662f\u5426\u524d\u5f80\u5145\u503c\uff1f",function(){i.gameScript.onOrderGoodsClick()}):5==o&&n.viplevel<2?app.openConfirmDialog("VIP2\u7528\u6237\u53ef\u8fdb\u5165,\u662f\u5426\u524d\u5f80\u5f00\u901aVIP\uff1f",function(){i.gameScript.onVipInfoClicked()}):this.gameClickCallback&&this.gameClickCallback(o)},onCloseClick:function(){var e=this,t=this,i=cc.winSize;this.node.runAction(cc.moveTo(.2,cc.v2(i.width/2,-i.height/2))),this.scheduleOnce(function(){app.closeDialog(t),e.lobbyHideOrDisplayCallback&&e.lobbyHideOrDisplayCallback(!1)},.2)},onSportClick:function(){app.openDialog("SportSelectDialog",{parentScript:this},null,null,!0,!0)}}),cc._RF.pop()},{}],RuleEmptyItemNode:[function(e,t,i){"use strict";cc._RF.push(t,"3dc99Zy+CFNIbkCWHQwLWYa","RuleEmptyItemNode"),cc.Class({extends:cc.Component,properties:{nameLabel:cc.Label,contentLabel:cc.Label,iconSprite:cc.Sprite,bgSprite:cc.Sprite},initWithData:function(e){if(this.data=e,this.nameLabel.string=e.kindname||"",e.kindtype>=6)this.contentLabel.string="\u7279\u6b8a",this.bgSprite.spriteFrame=this.bgSpriteFrameArray[0];else{this.contentLabel.string=e.kindcoin+"\u500d";var t=5==e.kindtype?1:2;this.bgSprite.spriteFrame=this.bgSpriteFrameArray[t]}this.iconSprite.spriteFrame=this.iconSpriteFrame},onSeletcClick:function(){this.parentScript.displayEnemyContent(this.data)}}),cc._RF.pop()},{}],SettingDialog:[function(e,t,i){"use strict";cc._RF.push(t,"b9aa1aP2ABAF6gHO0ayfGwe","SettingDialog");var o=e("Application");cc.Class({extends:cc.Component,properties:{kaiguanFrames:{default:[],type:cc.SpriteFrame},versionLabel:cc.Label,musicBtn:cc.Button,effectBtn:cc.Button},onLoad:function(){this.versionLabel.string="v"+o.getVersion(),this.musicBtn.getComponent(cc.Sprite).spriteFrame=this.kaiguanFrames[o.isAllowAudioMusic()?0:1],this.effectBtn.getComponent(cc.Sprite).spriteFrame=this.kaiguanFrames[o.isAllowAudioEffect()?0:1]},onDestroy:function(){},onCloseClicked:function(){o.closeDialog(this)},onMusicClicked:function(){o.isAllowAudioMusic()?(this.musicBtn.getComponent(cc.Sprite).spriteFrame=this.kaiguanFrames[1],o.forbidAudioMusic()):(this.musicBtn.getComponent(cc.Sprite).spriteFrame=this.kaiguanFrames[0],o.allowAudioMusic())},onEffectClicked:function(){o.isAllowAudioEffect()?(this.effectBtn.getComponent(cc.Sprite).spriteFrame=this.kaiguanFrames[1],o.forbidAudioEffect()):(this.effectBtn.getComponent(cc.Sprite).spriteFrame=this.kaiguanFrames[0],o.allowAudioEffect())},onHelpClicked:function(){o.openDialog("HelpDialog"),o.closeDialog(this,!0)},onKefuClicked:function(){o.openDialog("KefuDialog"),o.closeDialog(this,!0)},onLogoutClicked:function(){o.logout(),o.loadLoginScene()}}),cc._RF.pop()},{Application:"Application"}],ShopPayRecordDialog:[function(e,t,i){"use strict";cc._RF.push(t,"b06d2m0mHZHxIf+En4/duux","ShopPayRecordDialog"),cc.Class({extends:cc.Component,properties:{titleLabel:cc.Label},onLoad:function(){},initWithData:function(e,t){"shop"==e&&(this.titleLabel.string="\u5546\u57ce\u8bb0\u5f55")},onCloseClick:function(){app.closeDialog(this)}}),cc._RF.pop()},{}],ShoppingDialog:[function(e,t,i){"use strict";cc._RF.push(t,"12fb9jq4bxK86C4oABPwaPj","ShoppingDialog"),cc.Class({extends:cc.Component,properties:{coinbuyScroView:cc.ScrollView,couponbuyScroView:cc.ScrollView,itemPref:cc.Prefab,titleIconSpriteFrameArray:[cc.SpriteFrame],coinsLabel:cc.Label,couponsLabel:cc.Label,diamondLabel:cc.Label,recordBtn:cc.Node},onLoad:function(){var e=this,t=cc.winSize;this.node.height=t.height,this.node.width=t.width,this.node.y=-t.height/2,this.node.runAction(cc.moveTo(.2,cc.v2(t.width/2,t.height/2)));var i=app.currParamData();this.lobbyHideOrDisplayCallback=i.lobbyHideOrDisplayCallback||null;var o=app.currUser();this.coinsLabel.string=o.coins||0,this.couponsLabel.string=o.coupons||0,this.diamondLabel.string=o.diamonds||0,this.scheduleOnce(function(){var t=e.coinbuyScroView.node.parent.convertToWorldSpaceAR(cc.v2(e.coinbuyScroView.node.x-e.coinbuyScroView.node.anchorX*e.coinbuyScroView.node.width,e.coinbuyScroView.node.y-e.coinbuyScroView.node.anchorY*e.coinbuyScroView.node.height));e.svBBoxRect=cc.rect(t.x,t.y,e.coinbuyScroView.node.width,e.coinbuyScroView.node.height),e.onScrolling()},.3)},start:function(){},onScrolling:function(){var e=this;this.coinbuyScroView.node.active&&this.coinbuyScroView.content.children.forEach(function(t){t.getBoundingBoxToWorld().intersects(e.svBBoxRect)?255!=t.opacity&&(t.opacity=255):0!=t.opacity&&(t.opacity=0)}),this.couponbuyScroView.node.active&&this.couponbuyScroView.content.children.forEach(function(t){t.getBoundingBoxToWorld().intersects(e.svBBoxRect)?255!=t.opacity&&(t.opacity=255):0!=t.opacity&&(t.opacity=0)})},updateCurrUser:function(){var e=app.currUser();this.coinsLabel.string=e.coins||0,this.couponsLabel.string=e.coupons||0,this.diamondLabel.string=e.diamonds||0},initWithData:function(e){var t=this;this.shoppingData=e;var i=e.coinbuy||[],o=e.couponbuy||[];cc.log("\u5956\u5238\u5546\u57ce:",o),cc.log("\u5b50\u5f39\u5546\u57ce:",i),this.coinbuyScroView.content.removeAllChildren(),this.couponbuyScroView.content.removeAllChildren();var n=0;this.schedule(function(){var e=i[n];if(e){var o=cc.instantiate(t.itemPref),a=o.getComponent("ShoppingItemNode");a.gameScript=t.gameScript,a.shopScript=t,a.iconSpriteFrame=t.titleIconSpriteFrameArray[1],a.payType="coin",a.selfBtn.interactable=!0,a.initWithData(e),o.parent=t.coinbuyScroView.content,n++}},0,i.length-1);var a=0;this.schedule(function(){var e=o[a];if(e){var i=cc.instantiate(t.itemPref),n=i.getComponent("ShoppingItemNode");n.gameScript=t.gameScript,n.shopScript=t,n.iconSpriteFrame=t.titleIconSpriteFrameArray[0],n.payType="coupon",n.selfBtn.interactable=!0,n.initWithData(e),i.parent=t.couponbuyScroView.content,a++}},0,o.length-1)},onSelectClick:function(e,t){switch(t){case"coinbuy":this.couponbuyScroView.node.active=!1,this.coinbuyScroView.node.active=!0,this.coinbuyScroView.content.getComponent(cc.Layout).updateLayout(),this.contentNode=this.coinbuyScroView.content.children,this.recordBtn.active=!1,this.onScrolling();break;case"couponbuy":this.coinbuyScroView.node.active=!1,this.couponbuyScroView.node.active=!0,this.contentNode=this.couponbuyScroView.content.children,this.recordBtn.active=!0,this.onScrolling()}},onShopRecordClick:function(){var e=this;app.openDialog("ShopPayRecordDialog",null,function(t){var i=t.getComponent("ShopPayRecordDialog");i.parentScript=e,i.initWithData("shop")})},onCloseClick:function(){var e=this,t=this,i=cc.winSize;this.node.runAction(cc.moveTo(.2,cc.v2(i.width/2,-i.height/2))),this.scheduleOnce(function(){app.closeDialog(t),e.lobbyHideOrDisplayCallback&&e.lobbyHideOrDisplayCallback(!1)},.2)}}),cc._RF.pop()},{}],ShoppingItemDetailNode:[function(e,t,i){"use strict";cc._RF.push(t,"b52c2QzaJ9Eu5FxpBvvcGeY","ShoppingItemDetailNode"),cc.Class({extends:cc.Component,properties:{subBtn:cc.Button,addBtn:cc.Button,goodsNumLabel:cc.Label,numNode:cc.Node,bTipsNode:cc.Node,priceNameLabel:cc.Label,goodsNameLabel:cc.Label,iconSprite:cc.Sprite,goodsIconSprite:cc.Sprite,priceLabel:cc.Label,detailLabel:cc.Label,payName:cc.Label,payOutLine:cc.LabelOutline,payBtn:cc.Button},onLoad:function(){this.goodsNum=1,this.subBtn.interactable=!1},initWithData:function(e){var t=app.currUser(),i=t.coins||0,o=t.coupons||0,n=t.diamonds||0;this.currNumber=0;var a=e.payType;if("payskin"==this.paySkinType){this.skinItemObj=e,this.numNode.active=!1,this.bTipsNode.active=!0,this.priceNameLabel.string="\u4ef7\u683c\uff1a",this.payName.string="\u786e\u8ba4\u5151\u6362",this.currNumber=n;var s=ls.loadGoodsIntro(null,e.skinid);return this.goodsNameLabel.string=s.goodsname+(1==this.payTime?"(7\u5929)":"(\u6c38\u4e45)"),this.iconSprite.spriteFrame=ls.loadGoodsSpriteFrame(ls.GOODS_TYPE_DIAMOND),this.goodsIconSprite.spriteFrame=s.spriteFrame,this.priceLabel.string=1==this.payTime?e.diamond7price:e.diamond0price,this.detailLabel.string=s.goodsdesc,this.price=1==this.payTime?e.diamond7price:e.diamond0price,void(this.currNumber<this.price&&(this.payBtn.interactable=!1,this.payOutLine.enabled=!1))}"coin"==a&&(this.numNode.active=!0,this.bTipsNode.active=!1,this.priceNameLabel.string="\u603b\u4ef7\uff1a",this.payName.string="\u786e\u8ba4\u8d2d\u4e70",this.currNumber=i),"coupon"==a&&(this.numNode.active=!1,this.bTipsNode.active=!0,this.priceNameLabel.string="\u4ef7\u683c\uff1a",this.payName.string="\u5151\u6362",this.currNumber=o),this.goodsNameLabel.string=e.name,this.iconSprite.spriteFrame=e.icon,this.goodsIconSprite.spriteFrame=e.goodsicon||ls.loadGoodsSpriteFrame(e.goodstype,e.goodsobjid),this.priceLabel.string=e.price,this.detailLabel.string=e.detail,this.price=e.price,this.currNumber<e.price&&(this.payBtn.interactable=!1,this.payOutLine.enabled=!1)},onBuyClicked:function(e){var t=this;if("payskin"!=this.paySkinType){if(this.goodsdata.goodsid||null){var i=1;"coin"==this.payType&&(i=t.goodsNum),app.openDialog("PayDialog",{gameScript:t.gameScript,goods:t.goodsdata,goodscount:i,notrmb:!0,preokFunc:function(){var e=t.shopScript?t.shopScript.updateCurrUser.bind(t.shopScript):null;t.gameScript.updateUserInfo(e),t.onCloseClick()}},null,0,null,!0,{init:function(e){e.setPosition(cc.v2(cc.winSize.width/2,-250))},action:cc.moveTo(.3,cc.v2(cc.winSize.width/2,250))})}}else app.requestJson({url:"/pipes/skywar/paySkin",data:{bean:{buytype:ls.GOODS_BUY_DIAMOND,skinid:t.skinItemObj.skinid,expires:t.payTime}}},function(e,i){e&&(i&&i.retinfo&&0!=i.retcode&&app.showHintMessage(i.retinfo),t.gameScript&&t.gameScript.updateUserInfo(t.parentScript.updateCurrUser.bind(t.parentScript)),t.onCloseClick(),t.closeCallback&&t.closeCallback())})},onSubBtnClick:function(){1!=this.goodsNum?(this.goodsNum--,1==this.goodsNum&&this.subBtn.interactable&&(this.subBtn.interactable=!1),this.goodsNumLabel.string=this.goodsNum,this.currNumber>=this.price*this.goodsNum&&(this.payBtn.interactable=!0,this.payOutLine.enabled=!0),this.priceLabel.string=this.price*this.goodsNum):this.subBtn.interactable&&(this.subBtn.interactable=!1)},onAddBtnClick:function(){this.subBtn.interactable||(this.subBtn.interactable=!0),this.goodsNum++,this.goodsNumLabel.string=this.goodsNum,this.currNumber<this.price*this.goodsNum&&(this.payBtn.interactable=!1,this.payOutLine.enabled=!1),this.priceLabel.string=this.price*this.goodsNum},onCloseClick:function(){app.closeDialog(this)}}),cc._RF.pop()},{}],ShoppingItemNode:[function(e,t,i){"use strict";cc._RF.push(t,"bddcaCk2RpG6pYP975fXUJs","ShoppingItemNode"),cc.Class({extends:cc.Component,properties:{priceLabel:cc.Label,iconSprite:cc.Sprite,goodsName:cc.Label,goodsIcon:cc.Sprite,giftendtimeNode:cc.Node,flagHotNode:cc.Node,selfBtn:cc.Button},initWithData:function(e,t){if(this.goodsdata=e,"rmb"==this.payType){this.priceLabel.string=e.price/100+"\u5143",this.priceLabel.node.x=0;var i=ls.loadGoodsIntro(e.goodstype,e.goodsobjid),o=this.genGoodsName(i,e,t);this.goodsName.string=o,this.goodsIcon.spriteFrame=ls.loadGoodsSpriteFrame(e.goodstype,e.goodsobjid,e.goodscount,t);var n=!!e.giftendtime,a=!!e.showflag;return this.giftendtimeNode.active=n,void(this.flagHotNode.active=a)}if(this.iconSprite.spriteFrame=this.iconSpriteFrame,this.priceLabel.string=e.price,this.detailObj={},this.detailObj.payType=this.payType,this.detailObj.price=e.price,this.detailObj.icon=this.iconSpriteFrame,e.goodsitems&&e.goodsitems.length)for(var s=0;s<e.goodsitems.length;s++){var c=e.goodsitems[s],r=ls.loadGoodsIntro(c.goodstype,c.goodsobjid),l=this.genGoodsName(r,c,t);this.goodsName.string=l,this.goodsIcon.spriteFrame=ls.loadGoodsSpriteFrame(c.goodstype,c.goodsobjid,c.goodscount,t),this.detailObj.goodsicon=ls.loadGoodsSpriteFrame(c.goodstype,c.goodsobjid,c.goodscount),this.detailObj.name=l+(c.goodsexpires?"\uff08"+c.goodsexpires/86400+"\u5929\uff09":""),this.detailObj.detail="\u7b80\u4ecb\uff1a"+r.goodsdesc+(c.goodsexpires?"\uff08\u6709\u6548\u671f"+c.goodsexpires/86400+"\u5929\uff09":"")}else{var d=ls.loadGoodsIntro(e.goodstype,e.goodsobjid),p=this.genGoodsName(d,e,t);this.goodsName.string=p,this.goodsIcon.spriteFrame=ls.loadGoodsSpriteFrame(e.goodstype,e.goodsobjid,e.goodscount,t),this.detailObj.goodsicon=ls.loadGoodsSpriteFrame(e.goodstype,e.goodsobjid,e.goodscount),this.detailObj.name=p,this.detailObj.detail="\u7b80\u4ecb\uff1a"+p}var h=!!e.giftendtime,u=!!e.showflag;this.giftendtimeNode.active=h,this.flagHotNode.active=u},genGoodsName:function(e,t,i){var o=e.goodsname;return t.goodscount>1&&(o=t.goodstype==ls.GOODS_TYPE_TELCARD||t.goodstype==ls.GOODS_TYPE_JDCARD?t.goodscount/100+"\u5143"+o:!i&&t.goodscount>=1e4&&t.goodscount%1e4==0?t.goodscount/1e4+"\u4e07"+o:t.goodscount+o),o},onDetailClick:function(){var e=this;if("rmb"!=this.payType){app.openDialog("ShoppingItemDetailNode",null,function(t){var i=t.getComponent("ShoppingItemDetailNode");i.gameScript=e.gameScript,i.shopScript=e.shopScript,i.payType=e.payType,i.goodsdata=e.goodsdata,i.initWithData(e.detailObj)},null,!1,!0)}else{var t=this;if(!(t.goodsdata.goodsid||null))return;app.openDialog("PayDialog",{gameScript:t.gameScript,goods:t.goodsdata,goodsname:t.goodsName.string,preokFunc:function(){var e=t.payScript?t.payScript.updateCurrUser.bind(t.payScript):null;t.gameScript.updateUserInfo(e)}},null,0,null,!0,{init:function(e){e.setPosition(cc.v2(cc.winSize.width/2,-250))},action:cc.moveTo(.3,cc.v2(cc.winSize.width/2,250))})}}}),cc._RF.pop()},{}],SkywarBulletNode:[function(e,t,i){"use strict";cc._RF.push(t,"11b9eebvD1KMZhOEN0ppSMG","SkywarBulletNode"),cc.Class({extends:cc.Component,properties:{bulletSprite:cc.Sprite},onLoad:function(){var e=cc.winSize;this.winHeight=e.height,this.winWidth=e.width},initWithData:function(e){this.bulletUserid=e,this.node.angle=0,this.disY=1500,this.tracksAngleSpeed=1.5,this.isShotTrack=!1,this.tracksid=null,this.tracksNode=null,this.bulletMoveAngle=0},tracks:function(e,t){this.isShotTrack=!0,this.tracksid=e,this.tracksNode=t},onCollisionEnter:function(e,t){"player"==this.node.group&&"enemy"==e.node.group&&this.onEnemyColl(e)},displayCollFire:function(e){var t=this.gameScript.getEffectFromPool("CollFireEffect");if(t){var i=t.getComponent("CollFireEffect");i.collFirePool=this.gameScript.CollFireEffect,i.playCollFire(),t.position=e,t.parent=this.gameScript.effectParentNode}},onEnemyColl:function(e){if(e.node.parent){var t=e.node.parent.getComponent("Enemy");if(t)if(this.isShotTrack){if(t.config.enemyid==this.tracksid&&(this.bulletPool.put(this.node),this.displayCollFire(this.node.position),t.onEnemyColl(),this.bulletUserid==app.currUserid())){var i=[t.config.enemyid],o=parseInt(1e4*this.node.x)/1e4,n=parseInt(1e4*(this.node.y+50))/1e4;app.sendSocketMessage({module:"game_skywar",killEnemy:{bean:{pointx:o,pointy:n,enemyids:i}}})}}else if(this.bulletPool.put(this.node),this.displayCollFire(this.node.position),t.onEnemyColl(),this.bulletUserid==app.currUserid()){var a=[t.config.enemyid],s=parseInt(1e4*this.node.x)/1e4,c=parseInt(1e4*(this.node.y+50))/1e4;app.sendSocketMessage({module:"game_skywar",killEnemy:{bean:{pointx:s,pointy:c,enemyids:a}}})}}},update:function(e){if(this.isShotTrack){if(this.node.y<this.tracksNode.y-400)this.node.y+=this.disY*e,this.bulletMoveAngle=0;else{var t=cc.v2(this.tracksNode.x,this.node.y);this.bulletMoveAngle+=60*this.tracksAngleSpeed*e;var i=this.node.x-t.x,o=this.tracksNode.y-t.y,n=cc.v2(t.x+i*Math.cos((this.bulletMoveAngle+1.5)/180*Math.PI),t.y+o*Math.sin((this.bulletMoveAngle+1.5)/180*Math.PI)),a=cc.v2(t.x+i*Math.cos(this.bulletMoveAngle/180*Math.PI),t.y+o*Math.sin(this.bulletMoveAngle/180*Math.PI)),s=n.sub(a),c=Math.round(cc.misc.radiansToDegrees(Math.atan2(s.y,s.x)))+270;this.node.angle=c,this.node.position=a}return(this.node.y>this.winHeight/2||this.node.y<-this.winHeight/2||this.node.x>this.winWidth/2||this.node.x<-this.winWidth/2)&&this.bulletPool.put(this.node),(this.tracksNode.y>this.winHeight/2||this.tracksNode.y<-this.winHeight/2||this.tracksNode.x>this.winWidth/2||this.tracksNode.x<-this.winWidth/2)&&this.bulletPool.put(this.node),void(this.tracksNode.parent||this.bulletPool.put(this.node))}this.node.y+=this.disY*e,(this.node.y>this.winHeight/2||this.node.y<-this.winHeight/2||this.node.x>this.winWidth/2||this.node.x<-this.winWidth/2)&&this.bulletPool.put(this.node)}}),cc._RF.pop()},{}],SkywarGoodsItemNode:[function(e,t,i){"use strict";cc._RF.push(t,"0f32dQ3UzpAg5lZrEfp1Kn6","SkywarGoodsItemNode"),cc.Class({extends:cc.Component,properties:{resNode:cc.Node,goodsItemNode:cc.Node},onLoad:function(){var e=this,t=app.currParamData();this.type=t.type||"",this.callback=t.callback;var i=t.goodsitems||[];this.goodsitems=i,this.resNode.removeAllChildren();for(var o=0;o<i.length;o++){var n=i[o],a=cc.instantiate(this.goodsItemNode);this.initItemNode(n,a,o),a.parent=this.resNode}var s=this.resNode.children,c=0;this.unscheduleAllCallbacks();this.schedule(function t(){c==s.length-1&&(e.unschedule(t),e.scheduleOnce(function(){app.closeDialog(e)},1.3));var i=s[c];i&&(i.active=!0,i.stopAllActions(),i.runAction(cc.sequence(cc.moveBy(.1,cc.v2(-100,0)).easing(cc.easeOut(2)),cc.delayTime(1),cc.spawn(cc.moveBy(.2,cc.v2(0,100)).easing(cc.easeOut(2)),cc.fadeOut(.2))))),c++},.2)},initItemNode:function(e,t,i){var o=ls.loadGoodsIntro(e.goodstype,e.goodsobjid),n=cc.find("bg2/icon",t).getComponent(cc.Sprite),a=cc.find("bg1/content",t).getComponent(cc.Label);n.spriteFrame=o.spriteFrame;var s=e.goodscount;e.goodscount>=1e4&&e.goodscount%1e4==0&&(s=parseInt(e.goodscount/1e4)+"\u4e07"),a.string=o.goodsname+" x"+s,t.active=!1,t.x=100,t.y=250-150*i}}),cc._RF.pop()},{}],SkywarHandler:[function(e,t,i){"use strict";cc._RF.push(t,"58f2dCfeTpMhIFYwY+VdCbr","SkywarHandler");var o=cc.Class({extends:cc.Component,properties:{gameversion:"0.0.1"},run:function(e){cc.log("game config: "+e);var t=app.currUser();cc.log("my userinfo: "+t);var i=this;if("skywar"==t.currgame)i.enterGame(0);else if(e&&e.lobby&&e.lobby.openSelectRoomLevelDialog){e.lobby.openSelectRoomLevelDialog(function(e){i.enterGame(e)})}},enterGame:function(e){app.requestJson({url:"/pipes/skywar/enterGame",data:{bean:{roomlevel:e}}},function(t,i){t&&0==i.retcode?app.openDialog("game_skywar/SkywarLoadDialog",{roomlevel:e},null,null,!0,!1):i.retinfo&&app.openAlertDialog(i.retinfo)})}});t.exports=o,cc._RF.pop()},{}],SkywarLoadDialog:[function(e,t,i){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cc._RF.push(t,"5fe40orV+ZOdocPGIpkrX8c","SkywarLoadDialog"),cc.Class({extends:cc.Component,properties:{hintLabe:cc.Label,loadingLabe:cc.Label,loadingProgress:cc.ProgressBar,loadingNode1:cc.Node,loadingNode2:cc.Node,loadingNode3:cc.Node,loadingNode4:cc.Node},onLoad:function(){var e=["\u654c\u673a\u7684\u7b49\u7ea7\u8d8a\u9ad8\uff0c\u51fb\u843d\u65f6\u83b7\u5f97\u7684\u5b50\u5f39\u6570\u91cf\u8d8a\u591a","\u6536\u96c6\u80fd\u6e90\u7ed3\u6676\u53ef\u4ee5\u63d0\u5347\u98de\u673a\u6b66\u5668\u706b\u529b","\u4f7f\u7528\u5de1\u822a\u6280\u80fd\u53ef\u4ee5\u8ba9\u98de\u673a\u8fdb\u5165\u81ea\u52a8\u9a7e\u9a76\u72b6\u6001","\u51fb\u843dBoss\u654c\u673a\u80fd\u83b7\u5f97\u6d77\u91cf\u5b50\u5f39","\u4f7f\u7528\u8ffd\u8e2a\u6280\u80fd\u53ef\u4ee5\u5bf9\u6307\u5b9a\u654c\u673a\u8fdb\u884c\u653b\u51fb"];this.hintLabe.string="\u5c0f\u8d34\u58eb: "+e[(new Date).getTime()%e.length];var t=this,i=app.currParamData().roomlevel,o=function(e,i,o){if(0!=i&&t.loadingLabe){var n=parseInt(100*e/i);if(n<1)return;t.currProgress||(t.currProgress=n),t.currProgress&&n>=t.currProgress&&(t.loadingLabe.string=n+"%",t.currProgress=n,t.loadingProgress.progress=e/i)}};cc.loader.loadResDir("game_skywar/config",function(e,n){e&&(cc.log("load game_skywar config err = "+e),app.closeDialog(t));for(var a=[],s=0;s<n.length;s++)a.push(n[s].json);for(var c={},r=0;r<a.length;r++)for(var l in a[r])t.generateEnemyLine(c,l,a[r][l]);var d=t.caculateangle(c);cc.director.preloadScene("SkywarTableScene",o,function(){t.loadingNode1.runAction(cc.fadeOut(.3)),t.loadingLabe.node.runAction(cc.fadeOut(.3)),t.scheduleOnce(function(){t.loadingNode3.runAction(cc.scaleTo(.2,.3)),t.loadingNode4.runAction(cc.scaleTo(.2,.3)),t.loadingNode2.runAction(cc.spawn(cc.scaleTo(.2,2),cc.fadeOut(.4))),t.scheduleOnce(function(){var e={moveTrail:c,moveangle:d,roomlevel:i};app.loadScene("SkywarTableScene",e),t.scheduleOnce(function(){app.closeDialog(t)},.2)},.2)},.2)})})},generateEnemyLine:function(e,t,i){var o=i.points,n=o.length,a=i.turns;t=parseInt(t);var s=this.objDeepCopy(o);if(e[t]=s,a&&a.indexOf("1")>=0){for(var c=this.objDeepCopy(o),r=0;r<n;r++)c[r].x=-1*c[r].x;e[t+1]=c}if(a&&a.indexOf("2")>=0){for(var l=this.objDeepCopy(o),d=0;d<n;d++)l[d].y=-1*l[d].y;e[t+2]=l}if(a&&a.indexOf("3")>=0){for(var p=this.objDeepCopy(o),h=0;h<n;h++)p[h].x=-1*p[h].x,p[h].y=-1*p[h].y;e[t+3]=p}if(a&&a.indexOf("4")>=0){var u=this.objDeepCopy(o);u.reverse(),e[t+4]=u}if(a&&a.indexOf("5")>=0){var g=this.objDeepCopy(o);g.reverse();for(var f=0;f<n;f++)g[f].x=-1*g[f].x;e[t+5]=g}if(a&&a.indexOf("6")>=0){var m=this.objDeepCopy(o);m.reverse();for(var v=0;v<n;v++)m[v].y=-1*m[v].y;e[t+6]=m}if(a&&a.indexOf("7")>=0){var y=this.objDeepCopy(o);y.reverse();for(var S=0;S<n;S++)y[S].x=-1*y[S].x,y[S].y=-1*y[S].y;e[t+7]=y}},objDeepCopy:function(e){var t=e instanceof Array?[]:{};for(var i in e)t[i]="object"===o(e[i])?this.objDeepCopy(e[i]):e[i];return t},caculateangle:function(e){var t={};for(var i in e){t[i]=[];for(var o=e[i].length,n=0;n<o&&!(n>=o-1);n++){var a=0,s=cc.v2(e[i][n+1].x,e[i][n+1].y),c=cc.v2(e[i][n].x,e[i][n].y);if(s.y==c.y)a=s.x>=c.x?90:270;else if(s.x==c.x)a=s.y>=c.y?180:0;else{var r=s.sub(c);a=Math.round(cc.misc.radiansToDegrees(Math.atan2(r.y,r.x)))+90}t[i][n]=a}}return t}}),cc._RF.pop()},{}],SkywarPlane:[function(e,t,i){"use strict";cc._RF.push(t,"af950DGVT1JfYoztopxtd7b","SkywarPlane"),cc.Class({extends:cc.Component,properties:{bulletNode:cc.Node,bulletNode2:cc.Node,planeNode:cc.Node,tipsNode:cc.Node,wingNode:cc.Node,wingBulletSprite:cc.Sprite,radarNode:cc.Node},showShotting:function(){var e=this,t=this;this.isKuangBao=!1,this.defaultSpriFram=this.bulletNode.getComponent(cc.Sprite).spriteFrame,this.kuangbaoSpriFram=this.bulletNode2.getComponent(cc.Sprite).spriteFrame,this.planeSpine=this.planeNode.getComponent(sp.Skeleton),this.schedule(this.getBulletNode,.25),this.schedule(function(){e.isKuangBao=!e.isKuangBao,e.isKuangBao?(e.planeSpine.setAnimation(0,"rage",!0),t.unschedule(e.getBulletNode),t.schedule(t.getBulletNode,.125)):(e.planeSpine.setAnimation(0,"idle",!0),t.unschedule(e.getBulletNode),t.schedule(t.getBulletNode,.25))},5)},getBulletNode:function(){var e=this.lobbyScript,t=this.isKuangBao?this.kuangbaoSpriFram:this.defaultSpriFram;e.getBulletNode(t,this.bulletParentNode||this.bulletNode)},onLoad:function(){var e=this;this.playerInfo&&(this.scheduleOnce(function(){e.tipsNode.active&&(e.tipsNode.active=!1)},5),this.raderScript=this.radarNode.getComponent("RaderNode"),this.raderScript.parentScript=this,this.raderScript.gameScript=this.gameScript)},initWithData:function(e){var t=this;if(e){this.playerInfo=e,this.isShotAuto=!1;var i=app.currUserid();if(this.coinsLabel=null,e.userid==i)this.tipsNode.active=!0,this.coinsLabel=this.gameScript.myselfCoinsLabel,this.playerInfo=this.gameScript.currUser;else{this.gameScript.player1CoinsLabel.string||this.coinsLabel||(this.coinsLabel=this.gameScript.player1CoinsLabel),this.gameScript.player2CoinsLabel.string||this.coinsLabel||(this.coinsLabel=this.gameScript.player2CoinsLabel);var o=this.coinsLabel.node.parent.parent.getChildByName("enemyNode"),n=this.coinsLabel.node.parent.getChildByName("headimgNode").getComponent(cc.Sprite);app.loadUserFace(n,e),o.active=!1,this.coinsLabel.node.parent.active=!0}this.coinsLabel.string=e.coins,this.isDeading=!0,this.scheduleOnce(function(){t.isDeading=!1},2)}},onColling:function(){var e=this;this.isDeading||this.planeNode&&!this.isLighter&&(this.isLighter=!0,this.planeNode.color=cc.color(255,25.5,25.5,255),this.scheduleOnce(function(){e.planeNode.color=cc.color(255,255,255,255),e.isLighter=!1},.15))},playerLeave:function(){var e=this;if(this.playerInfo.userid!=app.currUserid()){var t=this.coinsLabel.node.parent.parent.getChildByName("enemyNode");this.coinsLabel.string="",this.coinsLabel.node.parent.active=!1,t.active=!0,this.isDeading=!0,this.node.runAction(cc.sequence(cc.moveTo(1,cc.v2(this.node.x,-cc.winSize.height/2)),cc.callFunc(function(){e.node.destroy()})))}},deadAndReStart:function(){var e=this,t=(this.gameScript,this.node.position);this.node.y=-cc.winSize.height/2,this.isDeading=!0,this.node.active=!0,this.node.runAction(cc.sequence(cc.moveTo(2,t),cc.repeat(cc.sequence(cc.fadeTo(.2,100),cc.fadeTo(.2,255)),3))),this.scheduleOnce(function(){e.isDeading=!1},3.2)},onShotting:function(){if(this.playerInfo&&!this.isShotJiGuang&&!this.isDeading)return!!this.canShot()&&(this.playerInfo.coins-=this.shotLevel,this.coinsLabel.string=this.playerInfo.coins,!0)},canShot:function(){if(this.playerInfo)return this.playerInfo.coins-this.shotLevel>=0},shotAuto:function(e,t){if(this.playerInfo)if(this.isShotAuto=e,e){if(!this.canShot())return void(this.gameScript.autoShotNode.active=!1);this.tipsNode.active&&(this.tipsNode.active=!1),this.autoShotCallback(),this.schedule(this.autoShotCallback,t||.2)}else this.unschedule(this.autoShotCallback)},autoShotCallback:function(){this.playerInfo&&(this.isDeading||this.isShotJiGuang||this.isShotFrenzy||this.isShotTrack||this.isShotRader||(this.canShot()?this.gameScript.autoShotCallback(this.playerInfo.userid):(this.unschedule(this.autoShotCallback),this.gameScript.autoShotNode.active=!1,app.requestJson({url:"/pipes/skywar/shotAuto/20",data:{bean:{}}},function(e,t){e&&t.success||t.retinfo&&app.showHintMessage(t.retinfo)}))))},shotFrenzy:function(e,t,i){if(this.playerInfo){var o=this;this.isShotFrenzy=e;var n=this.planeNode.getComponent(sp.Skeleton);this.isShotFrenzy?(this.tipsNode.active&&(this.tipsNode.active=!1),n.setAnimation(0,"rage",!0),o.frenzyShotCallback(),o.schedule(o.frenzyShotCallback,i||.125),o.scheduleOnce(function(){o.shotFrenzy(!1)},t||30)):(o.unschedule(o.frenzyShotCallback),n.setAnimation(0,"idle",!0))}},frenzyShotCallback:function(){this.playerInfo&&(this.isDeading||this.isShotJiGuang||this.isShotTrack||this.isShotRader||(this.canShot()?this.gameScript.autoShotCallback(this.playerInfo.userid):this.unschedule(this.frenzyShotCallback)))},tracks:function(e,t,i,o){if(this.playerInfo){if(this.isShotTrack=e,this.isShotTrack){this.tipsNode.active&&(this.tipsNode.active=!1),this.tracksNode=i,this.tracksid=t,this.tracksCallback();var n=this.isShotFrenzy?.125:.2;this.schedule(this.tracksCallback,n),this.trackIconNode=this.gameScript.getEffectFromPool("TrackIconNode"),this.trackIconNode.active=!0,this.trackIconNode.position=cc.v2(),this.trackIconNode.parent=i}else this.unschedule(this.tracksCallback),this.trackIconNode&&(this.gameScript.TrackIconNode.put(this.trackIconNode),this.trackIconNode=null)}},tracksCallback:function(){this.playerInfo&&(this.isDeading||this.isShotJiGuang||this.isShotRader||(this.canShot()?this.gameScript.tracksCallback(this.playerInfo.userid,this.tracksid,this.tracksNode):this.tracks(!1)))},cancelTracks:function(e){var t=this;cc.log(this.playerInfo.username+"\u5f00\u59cb\u8ffd\u8e2a\u5c04\u51fb..."),this.scheduleOnce(function(){t.tracks(!1),cc.log(t.playerInfo.username+"\u505c\u6b62\u8ffd\u8e2a\u5c04\u51fb...")},e)},shotRader:function(e,t,i,o){if(this.playerInfo){if(this.isShotRader=e,this.isShotRader){this.tipsNode.active&&(this.tipsNode.active=!1),this.radersNode=i,this.radersid=t,this.radersCallback();var n=this.isShotFrenzy?.125:.2;this.schedule(this.radersCallback,n),this.raderIconNode=this.gameScript.getEffectFromPool("TrackIconNode"),this.raderIconNode.active=!0,this.raderIconNode.position=cc.v2(),this.raderIconNode.parent=i,this.radarNode.active=!0}else this.unschedule(this.radersCallback),this.raderIconNode&&(this.gameScript.TrackIconNode.put(this.raderIconNode),this.raderIconNode=null),this.radarNode.active=!1}},radersCallback:function(){this.playerInfo&&(this.isDeading||this.isShotJiGuang||(this.canShot()?this.gameScript.tracksCallback(this.playerInfo.userid,this.radersid,this.radersNode):this.shotRader(!1)))},shotJiGuangPao:function(e){var t=this;this.isShotJiGuang=e;var i=this.gameScript;if(this.isShotJiGuang){if(this.jiGuangPaoNode)return;var o=i.getEffectFromPool("Special804Node"),n=o.getComponent("Special804Node");o.position=cc.v2(5,-10),o.parent=this.bulletNode,n.initJiGuangPao(this.playerInfo.userid),this.jiGuangPaoNode=o,this.jiGuangPaoScript=n,cc.log(this.playerInfo.username,"\u5f00\u542f\u6fc0\u5149\u70ae...")}else if(this.jiGuangPaoNode&&this.jiGuangPaoScript){this.jiGuangPaoScript.closeJiGuangPao(function(){cc.log(t.playerInfo.username,"\u5173\u95ed\u6fc0\u5149\u70ae..."),i.Special801Node.put(t.jiGuangPaoNode),t.jiGuangPaoNode=null,t.jiGuangPaoScript=null})}},onUseWinging:function(e,t){if(this.playerInfo){this.isUseWing=e;var i=this.wingNode.children;if(this.isUseWing){this.wingArray=[];for(var o=0;o<t;o++){var n=i[o];n.active=!0,this.wingArray.push(n)}}else{this.wingArray=[];for(var a=0;a<i.length;a++){i[a].active=!1}}}}}),cc._RF.pop()},{}],SkywarRuleDialog:[function(e,t,i){"use strict";cc._RF.push(t,"c4a769h2SFOdq8iPBdpXj2E","SkywarRuleDialog"),cc.Class({extends:cc.Component,properties:{scroViewNodeArray:[cc.Node],emptySprite:cc.Sprite,emptyItemPref:cc.Prefab,enemyContentNode:cc.Node,enemyAtlas:cc.SpriteAtlas,bgSpriteFrameArray:[cc.SpriteFrame],topNameLable:cc.Label,topContentLable:cc.Label,topIconSprite:cc.Sprite,ruleLabel:cc.Label,enemyItemsView:cc.ScrollView},onLoad:function(){var e=app.currParamData();this.gameScript=e.gameScript,this.emptySprite.node.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.8,cc.v2(0,10)).easing(cc.easeOut(2)),cc.moveBy(.8,cc.v2(0,-10)).easing(cc.easeIn(2))))),this.gameInfo=app.currSkywarGameinfo(),this.initWithData()},initWithData:function(){var t=this,i=this.gameScript.roomlevel,o=this.gameInfo.enemyKind||[];this.enemyContentNode.removeAllChildren();var n=!1,a=0;this.schedule(function(){var e=o[a];if(e){for(var s=e.roomlevels||[],c=0;c<s.length;c++){if(s[c]==i){var r=cc.instantiate(t.emptyItemPref),l=r.getComponent("RuleEmptyItemNode");l.parentScript=t,l.bgSpriteFrameArray=t.bgSpriteFrameArray,l.iconSpriteFrame=t.getSpriteFrame(e.kindid),l.initWithData(e),r.parent=t.enemyContentNode,n||(n=!0,l.onSeletcClick());break}}t.svBBoxRect&&t.onScrolling(),a++}},0,o.length-1),this.ruleLabel.string=e("i18n_zh").skywarRule;var s=this.enemyItemsView.node.parent.convertToWorldSpaceAR(cc.v2(this.enemyItemsView.node.x-this.enemyItemsView.node.anchorX*this.enemyItemsView.node.width,this.enemyItemsView.node.y-this.enemyItemsView.node.anchorY*this.enemyItemsView.node.height));this.svBBoxRect=cc.rect(s.x,s.y,this.enemyItemsView.node.width,this.enemyItemsView.node.height),this.scheduleOnce(function(){t.onScrolling()},.3)},onScrolling:function(){var e=this;this.scroViewNodeArray[0].active&&this.enemyItemsView.content.children.forEach(function(t){t.getBoundingBoxToWorld().intersects(e.svBBoxRect)?255!=t.opacity&&(t.opacity=255):0!=t.opacity&&(t.opacity=0)})},getSpriteFrame:function(e){var t=this.enemyAtlas,i="";if(e<300&&(i="tujian_100"+(e-200)),e<400&&e>300&&(i="tujian_10"+(e-294<10?"0"+(e-294):e-294)),e<500&&e>400&&(i="tujian_10"+(e-388)),e<600&&e>500)switch(e){case 501:i="tujian_3008";break;case 502:i="tujian_3001";break;case 503:i="tujian_3002";break;case 504:i="tujian_3003";break;case 505:i="tujian_3004";break;case 506:i="tujian_3005";break;case 507:i="tujian_3006"}if(e<800&&e>600)switch(e){case 601:i="tujian_4001";break;case 602:i="tujian_4002";break;case 603:i="tujian_4004";break;case 604:i="tujian_4005"}if(e>800)switch(e){case 801:i="tujian_2001";break;case 802:i="tujian_2002";break;case 803:i="tujian_2003";break;case 804:i="tujian_2014";break;case 805:i="tujian_2004";break;case 806:i="tujian_2006";break;case 807:i="tujian_2008";break;case 808:i="tujian_2010";break;case 809:i="tujian_2005";break;case 810:i="tujian_5002";break;case 811:i="tujian_5003";break;case 812:i="tujian_5001";break;case 813:i="tujian_2009";break;case 814:i="tujian_2011"}if(i)return t.getSpriteFrame(i)},displayEnemyContent:function(e){this.topNameLable.string=e.kindname,this.topContentLable.string=e.kinddesc,this.topIconSprite.spriteFrame=this.getSpriteFrame(e.kindid)},onCloseClick:function(){app.closeDialog(this)},onSelectClick:function(e,t){for(var i=this.scroViewNodeArray,o=0;o<i.length;o++){var n=i[o],a=o==parseInt(t)-1;n.active=a}}}),cc._RF.pop()},{i18n_zh:"i18n_zh"}],SkywarTableScene:[function(e,t,i){"use strict";cc._RF.push(t,"40683oC6h9M7al/sDNOGWfE","SkywarTableScene"),cc.Class({extends:cc.Component,properties:{touchBgNode:cc.Node,cloudNodes:cc.Node,bg1Sprite:cc.Sprite,bg2Sprite:cc.Sprite,bgSpriteFrames:[cc.SpriteFrame],startPosNode:cc.Node,playerPlaneNode:cc.Node,playerBulletNode:cc.Node,enemyPlaneNode:cc.Node,enemyBulletNode:cc.Node,effectParentNode:cc.Node,effectParent2Node:cc.Node,maskNode:cc.Node,middleNode:cc.Node,bottomNode:cc.Node,bulletPref:cc.Prefab,wingBulletPref:cc.Prefab,enemyBulletPref:cc.Prefab,enemyPrefArray:[cc.Prefab],playerPrefArray:[cc.Prefab],boomPref:cc.Prefab,heDanBoomPref:cc.Prefab,collFirePref:cc.Prefab,difengPref:cc.Prefab,coinAwardPref:cc.Prefab,sepcialButEffectPref:cc.Prefab,transmitPref:cc.Prefab,tracksIconPref:cc.Prefab,specialAwardPref:cc.Prefab,specialAward2Pref:cc.Prefab,special801Pref:cc.Prefab,special802Pref:cc.Prefab,special803Pref:cc.Prefab,special804Pref:cc.Prefab,special805Pref:cc.Prefab,special806Pref:cc.Prefab,special807Pref:cc.Prefab,special809Pref:cc.Prefab,special810Pref:cc.Prefab,xuanxiangNode:cc.Node,missionRedPointNode:cc.Node,awardSelectNode:cc.Node,huoLiShengJiSelectNode:cc.Node,danTouSelectNode:cc.Node,danTouNode:cc.Node,wingSelectNode:cc.Node,usingWingNode:cc.Node,autoShotNode:cc.Node,myselfCoinsLabel:cc.Label,player1CoinsLabel:cc.Label,player2CoinsLabel:cc.Label,couponsLabel:cc.Label,shotLevelLabel:cc.Label,currFrenzysLabel:cc.Label,currTracksLabel:cc.Label,currTransmitsLabel:cc.Label,currRadarsLabel:cc.Label,frenzyBtn:cc.Button,trackBtn:cc.Button,transmitBtn:cc.Button,raderBtn:cc.Button,bloodCanNode:cc.Node,bloodCantNode:cc.Node,bloodCantTitleLabel:cc.Label,bloodLabel:cc.Label,bloodSprite:cc.Sprite,playerTipNode:cc.Node,jiNengTipNode:cc.Node,rengWuTipNode:cc.Node,toolGuideNode:cc.Node,bossComingAtlas:cc.SpriteAtlas,enemyAtlas:cc.SpriteAtlas,pokerAtlas:cc.SpriteAtlas,cardtypeAtlas:cc.SpriteAtlas,couponIconSpriteFrame:cc.SpriteFrame,diamondIconSpriteFrame:cc.SpriteFrame},onDestroy:function(){app.setCurrgame(null),app.removeSocketObserver(this)},onLoad:function(){app.addSocketObserver(this),app.setCurrgame("skywar"),cc.director.getCollisionManager().enabled=!0,this.boomScale={201:1,202:1,203:1,204:1,205:1,206:1,301:1,302:1,303:1.1,304:1.1,305:1.1,306:1.1,401:1.2,402:1.2,403:1.2,404:1.2,405:1.6,406:2,407:2,408:2,409:2,410:2.1,411:2.2,501:3,502:3,503:3,504:3,505:3,506:3,507:3,601:1.1,602:1.1,603:1.1,604:1.1,801:1.5,802:1.1,803:1.1,804:1.5,805:1.5,806:1.1,807:2,808:2,809:1.5,810:2,811:2,812:3,813:1.1,814:2},this.selfPlayerShotRate=.2,cc.sys.localStorage.removeItem("skywar:game_fireleveltip_seen"),this.guideScript=this.playerTipNode.getComponent("GuideNode"),this.guideScript.gameScript=this,this.initTable(),this.touchBgNode.on("touchstart",this.touchStartCallback,this),this.touchBgNode.on("touchmove",this.touchMoveCallback,this),this.touchBgNode.on("touchend",this.touchEndCallback,this)},touchStartCallback:function(e){if(!(this.roomlevel>100)){var t=app.currUserid(),i=this.playerNodeMap[t];i&&(this.selfPlayerNode||(this.selfPlayerNode=i),this.selfPlayerScript.isShotAuto||this.selfPlayerScript.isShotTrack||this.selfPlayerScript.isShotFrenzy||this.selfPlayerScript.isShotJiGuang||this.selfPlayerScript.isShotRader||this.selfPlayerScript.isDeading||(this.selfPlayerScript.tipsNode.active&&(this.selfPlayerScript.tipsNode.active=!1),this.shotBullet(),this.schedule(this.shotBullet,this.selfPlayerShotRate||.2)))}},touchMoveCallback:function(e){this.playerTipNode.active&&(this.playerTipNode.active=!1);var t=app.currUserid(),i=this.playerNodeMap[t];if(i&&!this.selfPlayerScript.isDeading){var o=this.roomlevel>100?0:240,n=e.touch.getDelta();if(n.x||n.y){var a=cc.winSize.width,s=cc.winSize.height;i.x+n.x>=-a/2&&i.x+n.x<=a/2&&(i.x+=1.3*n.x),i.y+n.y>=-(s/2-o)&&i.y+n.y<=s/2-500&&(i.y+=1.3*n.y),this.updatePlayerPoint(i.position)}}},updatePlayerPoint:function(e){var t="/pipes/skywar/updatePoint";t+="/x:"+parseInt(1e4*e.x)/1e4+("/y:"+parseInt(1e4*e.y)/1e4),app.requestJson({url:t,data:{bean:{}}},function(e,t){e&&t.success||t.retinfo&&app.showHintMessage(t.retinfo)})},touchEndCallback:function(e){this.selfPlayerScript.isShotAuto||this.unschedule(this.shotBullet)},shotBullet:function(){if(!this.selfPlayerScript.isShotJiGuang&&this.selfPlayerScript.onShotting()){var e=this.selfPlayerScript.bulletNode.getComponent(cc.Sprite).spriteFrame,t=this.getBulletFromPool(),i=t.getComponent("SkywarBulletNode");if(i.bulletSprite.spriteFrame=e,i.gameScript=this,i.bulletPool=this.SkywarBulletNode,i.initWithData(app.currUserid()),t.position=this.selfPlayerNode.position,t.parent=this.playerBulletNode,this.selfPlayerScript.isUseWing&&this.selfPlayerScript.wingArray&&this.selfPlayerScript.wingArray.length)for(var o=this.selfPlayerScript.wingArray,n=0;n<o.length;n++){this.selfPlayerScript.onShotting();var a=o[n],s=this.getBulletFromPool("WingBulletNode"),c=s.getComponent("SkywarBulletNode");c.gameScript=this,c.bulletPool=this.WingBulletNode,c.initWithData(app.currUserid()),s.position=this.playerBulletNode.convertToNodeSpaceAR(a.convertToWorldSpaceAR(cc.v2())),s.parent=this.playerBulletNode}app.requestJson({url:"/pipes/skywar/shotBullet",data:{bean:{}}},function(e,t){e&&t.success||t.retinfo&&app.showHintMessage(t.retinfo)})}},initTable:function(){var e=this;this.prefabMap={},this.initEnemyPool(this.prefabMap),this.initPlayerPref(this.prefabMap),this.initBulletPool(this.prefabMap),this.initEffectPool(this.prefabMap);var t=app.currParamData();this.moveTrail=t.moveTrail,this.moveangle=t.moveangle,this.playerNodeMap={},this.enemyNodeMap={},this.gameInfo=app.currSkywarGameinfo(),cc.log("\u6e38\u620f\u914d\u7f6e\u4fe1\u606f\uff1a",this.gameInfo),this.currUser=app.currUser(),cc.log("\u5f53\u524d\u73a9\u5bb6\u4fe1\u606f\uff1a",this.currUser);var i=t.roomlevel;if(this.roomlevel=i||1,i>100)this.middleNode.active=!1,this.bottomNode.active=!1;else{for(var o=0;o<this.cloudNodes.children.length;o++){var n=this.cloudNodes.children[o];n&&(n.active=o==this.roomlevel-1)}this.bg1Sprite.spriteFrame=this.bgSpriteFrames[2*(this.roomlevel-1)],this.bg2Sprite.spriteFrame=this.bgSpriteFrames[2*(this.roomlevel-1)+1]}app.requestJson({url:"/pipes/skywar/joinTable",data:{bean:{roomlevel:i}}},function(t,i){if(t&&i)if(0!=i.retcode&&i.retinfo)app.showHintMessage(i.retinfo);else{var o=i.result;cc.log("table\u4fe1\u606f\uff1a",o),e.tableData=o,e.huoLiShengJiSelectScript=e.huoLiShengJiSelectNode.getComponent("BtnSelectNode"),e.huoLiShengJiSelectScript.gameScript=e,e.huoLiShengJiSelectScript.loadNextFireLevel(),e.danTouSelectScript=e.danTouSelectNode.getComponent("BtnSelectNode"),e.danTouSelectScript.gameScript=e,e.danTouSelectScript.loadDanTou(),e.wingSelectScript=e.wingSelectNode.getComponent("BtnSelectNode"),e.wingSelectScript.gameScript=e,e.awardSelectScript=e.awardSelectNode.getComponent("BtnSelectNode"),e.awardSelectScript.gameScript=e,e.awardSelectScript.loadAward();var n=o.players;e.shotLevels=o.shotLevels[parseInt(o.roomlevel)-1]||[];for(var a=0;a<n.length;a++){var s=n[a];if(s){var c=s.userid,r=s.skinid,l=cc.v2(s.pointx,s.pointy),d="player"+r+"Pref",p=e.prefabMap[d],h=cc.instantiate(p),u=h.getComponent("SkywarPlane");if(u.gameScript=e,u.shotLevel=s.shotlevel,u.initWithData(s),l.x||l.y)h.position=e.startPosNode.children[a].position,h.parent=e.playerPlaneNode;else{var g=e.startPosNode.children[a].position;h.x=g.x,h.y=-cc.winSize.height/2,h.parent=e.playerPlaneNode,h.runAction(cc.moveTo(2,g))}if(e.playerNodeMap[c]=h,c==app.currUserid()){e.selfPlayerScript=u,e.shotLevelLabel.string=s.shotlevel;for(var f=0;f<e.shotLevels.length;f++){e.shotLevels[f]==s.shotlevel&&(e.shotLevelsIndex=f)}}s.shotauto&&u.shotAuto(!0)}}app.requestJson("/pipes/skywar/loadBlood",function(t,i){t&&(0!=i.retcode&&i.retinfo?app.showHintMessage(i.retinfo):(e.initBloodAward(i.result),e.wingSelectScript.loadWing(i.result)))}),e.scheduleOnce(function(){var t=app.currUserid(),i=e.playerNodeMap[t];i&&e.updatePlayerPoint(i.position),app.getStorageValue("game_shottip_seen")||e.playerTipNode.active||(app.setStorageValue("game_shottip_seen",1),e.guideScript.initWithData("game_shot"))},2),app.getStorageValue("game_tooltip_seen")||(app.setStorageValue("game_tooltip_seen",1),e.toolGuideNode.active=!0)}}),this.myAccount=this.gameInfo.myAccount,this.updateUserNode()},initObjectPool:function(e,t,i){this[e]=new cc.NodePool;for(var o=0;o<t;++o){var n=cc.instantiate(i);this[e].put(n)}},initEnemyPool:function(e){for(var t=this.enemyPrefArray,i=0;i<t.length;i++){var o=t[i];if(o){var n=i<21?30:2,a=o.name,s="enemy"+a.substr(a.length-3,3)+"Pool";this.initObjectPool(s,n,o),e["enemy"+a.substr(a.length-3,3)+"Pref"]=o}}},initPlayerPref:function(e){for(var t=this.playerPrefArray,i=0;i<t.length;i++){var o=t[i],n=o.name;e["player"+n.substr(n.length-3,3)+"Pref"]=o}},initBulletPool:function(e){var t=this.bulletPref,i=100,o=t.name;this.initObjectPool(o,i,t),e[o]=t,i=50,o=(t=this.enemyBulletPref).name,this.initObjectPool(o,i,t),e[o]=t,i=50,o=(t=this.wingBulletPref).name,this.initObjectPool(o,i,t),e[o]=t},initEffectPool:function(e){var t=this.boomPref,i=20,o=t.name;this.initObjectPool(o,i,t),e[o]=t,i=20,o=(t=this.heDanBoomPref).name,this.initObjectPool(o,i,t),e[o]=t,i=50,o=(t=this.collFirePref).name,this.initObjectPool(o,i,t),e[o]=t,i=10,o=(t=this.difengPref).name,this.initObjectPool(o,i,t),e[o]=t,i=10,o=(t=this.coinAwardPref).name,this.initObjectPool(o,i,t),e[o]=t,i=10,o=(t=this.specialAwardPref).name,this.initObjectPool(o,i,t),e[o]=t,i=5,o=(t=this.specialAward2Pref).name,this.initObjectPool(o,i,t),e[o]=t,i=5,o=(t=this.sepcialButEffectPref).name,this.initObjectPool(o,i,t),e[o]=t,i=5,o=(t=this.transmitPref).name,this.initObjectPool(o,i,t),e[o]=t,i=5,o=(t=this.tracksIconPref).name,this.initObjectPool(o,i,t),e[o]=t,i=3,o=(t=this.special801Pref).name,this.initObjectPool(o,i,t),e[o]=t,i=3,o=(t=this.special802Pref).name,this.initObjectPool(o,i,t),e[o]=t,i=3,o=(t=this.special803Pref).name,this.initObjectPool(o,i,t),e[o]=t,i=3,o=(t=this.special804Pref).name,this.initObjectPool(o,i,t),e[o]=t,i=3,o=(t=this.special805Pref).name,this.initObjectPool(o,i,t),e[o]=t,i=3,o=(t=this.special806Pref).name,this.initObjectPool(o,i,t),e[o]=t,i=3,o=(t=this.special807Pref).name,this.initObjectPool(o,i,t),e[o]=t,i=3,o=(t=this.special809Pref).name,this.initObjectPool(o,i,t),e[o]=t,i=3,o=(t=this.special810Pref).name,this.initObjectPool(o,i,t),e[o]=t},getNodeFromPool:function(e){var t=null,i=e+"Pool",o=e+"Pref";return this[i].size()>0?t=this[i].get():(t=cc.instantiate(this.prefabMap[o]))||cc.error("\u6ca1\u6709\u627e\u5230 "+o+" \u7684\u9884\u5236\u4ef6"),t},getBulletFromPool:function(e){var t=e||"SkywarBulletNode",i=e||"SkywarBulletNode";return this[t].size()>0?this[t].get():cc.instantiate(this.prefabMap[i])},getEffectFromPool:function(e){var t=e,i=e;return this[t].size()>0?this[t].get():cc.instantiate(this.prefabMap[i])},updateUserGameInfo:function(e){for(var t=this,i=e.goodsitems||[],o=function(e){switch(e.goodsobjid?e.goodsobjid:e.goodstype){case ls.GOODS_TYPE_COIN:t.currUser.coins+=e.goodscount||0;break;case ls.GOODS_TYPE_DIAMOND:t.currUser.diamonds+=e.goodscount||0;break;case ls.GOODS_TYPE_COUPON:t.currUser.coupons+=e.goodscount||0;break;case ls.PROPID_ROCKET:t.gameInfo.myAccount.currRockets+=e.goodscount||0;break;case ls.PROPID_MISSILE:t.gameInfo.myAccount.currMissiles+=e.goodscount||0;break;case ls.PROPID_NUCLEAR:t.gameInfo.myAccount.currNuclears+=e.goodscount||0;break;case ls.PROPID_RADAR:t.gameInfo.myAccount.currRadars+=e.goodscount||0;break;case ls.PROPID_WING:break;case ls.PROPID_FRENZY:t.gameInfo.myAccount.currFrenzys+=e.goodscount||0;break;case ls.PROPID_TRACK:t.gameInfo.myAccount.currTracks+=e.goodscount||0;break;case ls.PROPID_TRANSMIT:t.gameInfo.myAccount.currTransmits+=e.goodscount||0}},n=0;n<i.length;n++){o(i[n])}this.updateUserNode()},updateUserNode:function(){this.myselfCoinsLabel.string=this.currUser.coins,this.couponsLabel.string=this.currUser.coupons,this.currFrenzysLabel.string=this.gameInfo.myAccount.currFrenzys||0,this.currTracksLabel.string=this.gameInfo.myAccount.currTracks||0,this.currTransmitsLabel.string=this.gameInfo.myAccount.currTransmits||0,this.currRadarsLabel.string=this.gameInfo.myAccount.currRadars||0},initBloodAward:function(e){this.unschedule(this.bloodAwardCallback);var t=this,i=e.cdseconds||e.cdbloodseconds||0,o=e.blood||0;if(i){this.bloodCanNode.active=!1;var n=i;this.bloodCantTitleLabel.string=n+"\u79d2\u540e\u53ef\u9886\u5956",this.bloodCantNode.active=!0;var a=function e(){n||(t.unschedule(e),t.bloodCantNode.active=!1,t.bloodCanNode.active=!0,t.bloodCanNode.children[2].active=!0,app.getStorageValue("game_bloodtip_seen")||t.playerTipNode.active||(app.setStorageValue("game_bloodtip_seen",1),t.guideScript.initWithData("game_blood")));n>=1&&(n--,t.bloodCantTitleLabel.string=n+"\u79d2\u540e\u53ef\u9886\u5956")};this.bloodAwardCallback=a,this.schedule(a,1)}else{this.bloodCanNode.active=!0,this.bloodCantNode.active=!1,this.bloodCanNode.children[2].active=!0,app.getStorageValue("game_bloodtip_seen")||this.playerTipNode.active||(app.setStorageValue("game_bloodtip_seen",1),this.guideScript.initWithData("game_blood"))}this.initBloodBar(o)},initBloodBar:function(e){this.bloodLabel.string=e,this.bloodSprite.fillRange=e/100},onBloodGiveClick:function(){var e=this;this.playerTipNode.active&&(this.playerTipNode.active=!1);var t=this;app.requestJson("/pipes/skywar/giveBlood",function(e,i){if(e)if(0!=i.retcode&&i.retinfo)app.showHintMessage(i.retinfo);else{var o=i.result;t.initBloodAward(o);var n=o.goodsitems;n&&app.openDialog("game_skywar/SkywarGoodsItemNode",{goodsitems:n}),t.updateUserGameInfo(o)}}),this.shotGuided||(this.shotGuided=app.getStorageValue("game_shottip_seen")),this.shotGuided||this.scheduleOnce(function(){app.setStorageValue("game_shottip_seen",1),e.guideScript.initWithData("game_shot")},1)},onWSonPlayerUseDantouMessage:function(e){var t=e.result;this.initDanTouNode(t.userid)},initDanTouNode:function(e){var t=this.danTouNode.getComponent("DanTouNode");t.gameScript=this,t.initDanTouNode(e)},onWSonPlayerShotBulletMessage:function(e){var t=e.result,i=this.playerNodeMap[t.userid];if(i){var o=i.getComponent("SkywarPlane");o.onShotting();var n=(o.isShotFrenzy?o.bulletNode2:o.bulletNode).getComponent(cc.Sprite).spriteFrame,a=this.getBulletFromPool(),s=a.getComponent("SkywarBulletNode");if(s.bulletSprite.spriteFrame=n,s.gameScript=this,s.bulletPool=this.SkywarBulletNode,s.initWithData(t.userid),a.position=i.position,a.parent=this.playerBulletNode,o.isUseWing&&o.wingArray&&o.wingArray.length)for(var c=o.wingArray,r=0;r<c.length;r++){o.onShotting();var l=c[r],d=this.getBulletFromPool("WingBulletNode"),p=d.getComponent("SkywarBulletNode");p.gameScript=this,p.bulletPool=this.WingBulletNode,p.initWithData(t.userid),d.position=this.playerBulletNode.convertToNodeSpaceAR(l.convertToWorldSpaceAR(cc.v2())),d.parent=this.playerBulletNode}}},onShotAutoClick:function(){var e=this.autoShotNode.active;this.autoShotNode.active=!e;var t="";e?(this.selfPlayerScript.shotAuto(!1),t="/pipes/skywar/shotAuto/20"):(this.selfPlayerScript.shotAuto(!0),t="/pipes/skywar/shotAuto/10"),app.requestJson({url:t,data:{bean:{}}},function(e,t){e&&t.success||t.retinfo&&app.showHintMessage(t.retinfo)})},onWSonPlayerShotAutoMessage:function(e){var t=e.result,i=this.playerNodeMap[t.userid].getComponent("SkywarPlane");t.auto?i.shotAuto(!0):i.shotAuto(!1)},autoShotCallback:function(e){this.onWSonPlayerShotBulletMessage({result:{userid:e}})},onShotFrenzyClick:function(){if(this.jiNengTipNode.active&&(this.jiNengTipNode.active=!1),this.toolGuideNode.active&&(this.toolGuideNode.active=!1),this.myAccount.currFrenzys){var e=this;app.requestJson({url:"/pipes/skywar/shotFrenzy",data:{bean:{}}},function(t,i){t&&i.success?(e.myAccount.currFrenzys--,e.currFrenzysLabel.string=e.myAccount.currFrenzys||0,e.unschedule(e.shotBullet),e.onWSonPlayerShotFrenzyMessage({result:{userid:app.currUserid(),shotfrenzyremains:30}})):i.retinfo&&app.showHintMessage(i.retinfo)})}},onWSonPlayerShotFrenzyMessage:function(e){var t=this,i=e.result,o=this.playerNodeMap[i.userid];if(o){var n=o.getComponent("SkywarPlane");if(i.userid==app.currUserid()){this.frenzyBtn.interactable=!1;var a=this.frenzyBtn.node.getChildByName("mask"),s=a.getComponent(cc.Sprite),c=a.getChildByName("timeNode").getComponent(cc.Label),r=i.shotfrenzyremains||30;c.string=r,s.fillRange=1;this.schedule(function e(){0==r&&(t.unschedule(e),a.active=!1,t.frenzyBtn.interactable=!0),r--,c.string=r,s.fillRange=r/i.shotfrenzyremains},1),a.active=!0}n.shotFrenzy(!0,i.shotfrenzyremains||30)}},onTracksClick:function(){this.jiNengTipNode.active&&(this.jiNengTipNode.active=!1);var e=this;if(e.myAccount.currTracks){this.selectTracksNode(),this.isShotTracking=!0,e.myAccount.currTracks--,e.currTracksLabel.string=e.myAccount.currTracks||0,e.trackBtn.interactable=!1;var t=e.trackBtn.node.getChildByName("mask"),i=t.getComponent(cc.Sprite),o=t.getChildByName("timeNode").getComponent(cc.Label),n=30;o.string=n,i.fillRange=1;e.schedule(function a(){0==n&&(e.isShotTracking=!1,e.selfPlayerScript.tracks(!1),e.currTracksid=null,t.active=!1,e.trackBtn.interactable=!0,e.unschedule(a)),n--,o.string=n,i.fillRange=n/30},1),t.active=!0}},onWSonPlayerShotTrackMessage:function(e){var t=e.result,i=this.playerNodeMap[t.userid];if(i){var o=i.getComponent("SkywarPlane"),n=this.enemyNodeMap[t.shottrackenemyid];if(n){o.tracks(!1),cc.log("\u5f00\u59cb\u8ffd\u8e2a\u5c04\u51fb..."),o.tracks(!0,t.shottrackenemyid,n);o.cancelTracks(30)}}},onWSonPlayerTrackEnemyMessage:function(e){var t=e.result,i=this.playerNodeMap[t.userid];if(i){var o=i.getComponent("SkywarPlane"),n=this.enemyNodeMap[t.shottrackenemyid];n&&(o.tracks(!1),cc.log("\u6539\u53d8\u8ffd\u8e2a\u5c04\u51fb..."),o.tracks(!0,t.shottrackenemyid,n))}},tracksCallback:function(e,t,i){var o=this.playerNodeMap[e];if(o){var n=o.getComponent("SkywarPlane");n.onShotting();var a=(n.isShotFrenzy?n.bulletNode2:n.bulletNode).getComponent(cc.Sprite).spriteFrame,s=this.getBulletFromPool(),c=s.getComponent("SkywarBulletNode");if(c.bulletSprite.spriteFrame=a,c.gameScript=this,c.bulletPool=this.SkywarBulletNode,c.initWithData(e),s.position=o.position,c.tracks(t,i),s.parent=this.playerBulletNode,n.isUseWing&&n.wingArray&&n.wingArray.length)for(var r=n.wingArray,l=0;l<r.length;l++){n.onShotting();var d=r[l],p=this.getBulletFromPool("WingBulletNode"),h=p.getComponent("SkywarBulletNode");h.gameScript=this,h.bulletPool=this.WingBulletNode,h.initWithData(e),h.tracks(t,i),p.position=this.playerBulletNode.convertToNodeSpaceAR(d.convertToWorldSpaceAR(cc.v2())),p.parent=this.playerBulletNode}}},selectTracksNode:function(e){var t=this.enemyNodeMap,i=null,o=null;if(e)i=e,o=t[e];else{var n=this.getMaxEnemyNode();n&&(i=n.tracksid,o=n.tracksNode)}i&&o&&o.parent&&(this.currTracksid=i,this.selfPlayerScript.tracks(!1),this.selfPlayerScript.tracks(!0,i,o),this.isShotTracking?app.requestJson({url:"/pipes/skywar/trackEnemy/"+i,data:{bean:{}}},function(e,t){e&&t.success||t.retinfo&&app.showHintMessage(t.retinfo)}):app.requestJson({url:"/pipes/skywar/shotTrack/"+i,data:{bean:{}}},function(e,t){e&&t.success||t.retinfo&&app.showHintMessage(t.retinfo)}))},getMaxEnemyNode:function(){var e=this.enemyNodeMap,t=null;for(var i in e)if(e.hasOwnProperty(i)){var o=parseInt(i);t||(t=o),o%1e3>t%1e3&&(t=o)}var n=t,a=e[t];return!!(n&&a&&a.parent)&&{tracksid:n,tracksNode:a}},onRaderClick:function(){var e=this;if(this.selfPlayerScript.isShotRader)e.selfPlayerScript.shotRader(!1),e.currRadersid=null,app.requestJson({url:"/pipes/skywar/pauseRadar",data:{bean:{}}},function(e,t){e&&t.success||t.retinfo&&app.showHintMessage(t.retinfo)}),this.needCloseRadar=!1;else{if(!e.isShotRadaring&&!e.myAccount.currRadars)return;if(!e.isShotRadaring){e.isShotRadaring=!0,e.myAccount.currRadars--,e.currRadarsLabel.string=e.myAccount.currRadars||0;var t=this.raderBtn.node.getChildByName("timeNode").getComponent(cc.Label),i=1800;t.string=parseInt(i/60)+":"+(i%60<10?"0"+i%60:i%60),t.node.active=!0;this.schedule(function o(){0==i&&(t.node.active=!1,e.isShotRadaring=!1,e.selfPlayerScript.shotRader(!1),e.currRadersid=null,e.unschedule(o)),i--,t.string=parseInt(i/60)+":"+(i%60<10?"0"+i%60:i%60)},1)}e.selectRadersNode()}},selectRadersNode:function(e){var t=this,i=this.enemyNodeMap,o=null,n=null;if(e)o=e,n=i[e];else{var a=this.getMaxEnemyNode();a&&(o=a.tracksid,n=a.tracksNode)}o&&n&&n.parent&&(t.needCloseRadar?(this.selfPlayerScript.shotRader(!1),this.currRadersid=null,app.requestJson({url:"/pipes/skywar/pauseRadar",data:{bean:{}}},function(e,i){e&&i.success?(t.currRadersid=o,t.selfPlayerScript.shotRader(!0,o,n),app.requestJson({url:"/pipes/skywar/shotRadar/"+o,data:{bean:{}}},function(e,t){e&&t.success||t.retinfo&&app.showHintMessage(t.retinfo)})):i.retinfo&&app.showHintMessage(i.retinfo)})):(this.needCloseRadar=!0,this.currRadersid=o,this.selfPlayerScript.shotRader(!1),this.selfPlayerScript.shotRader(!0,o,n),app.requestJson({url:"/pipes/skywar/shotRadar/"+o,data:{bean:{}}},function(e,i){if(!e||!i.success)return i.retinfo&&app.showHintMessage(i.retinfo),void t.selfPlayerScript.shotRader(!1)})))},onWSonPlayerShotRadarMessage:function(e){var t=e.result,i=this.playerNodeMap[t.userid];if(i){var o=i.getComponent("SkywarPlane"),n=this.enemyNodeMap[t.shottrackenemyid];n&&(o.shotRader(!1),cc.log("\u5f00\u59cb\u5de1\u822a\u5c04\u51fb..."),o.shotRader(!0,t.shottrackenemyid,n))}},onWSonPlayerPauseRadarMessage:function(e){var t=e.result,i=this.playerNodeMap[t.userid];if(i){var o=i.getComponent("SkywarPlane");cc.log("\u5173\u95ed\u5de1\u822a\u5c04\u51fb..."),o.shotRader(!1)}},onChuansongClick:function(){if(this.jiNengTipNode.active&&(this.jiNengTipNode.active=!1),this.myAccount.currTransmits){var e=this;app.requestJson({url:"/pipes/skywar/shotTransmit",data:{bean:{}}},function(t,i){if(t&&i.success){e.myAccount.currTransmits--,e.currTransmitsLabel.string=e.myAccount.currTransmits||0;var o=e.getEffectFromPool("SpecialButtonEffect");o.x=e.selfPlayerScript.node.x,o.y=e.selfPlayerScript.node.y+200,o.active=!0,o.setScale(1.5),o.parent=e.effectParentNode,o.getComponent(dragonBones.ArmatureDisplay).playAnimation("chuansong"),o.runAction(cc.sequence(cc.scaleTo(.2,.7).easing(cc.easeIn(2)),cc.scaleTo(.1,1.3).easing(cc.easeOut(2)),cc.scaleTo(.1,1).easing(cc.easeIn(2)))),e.scheduleOnce(function(){e.SpecialButtonEffect.put(o)},1),e.transmitBtn.interactable=!1;var n=e.transmitBtn.node.getChildByName("mask"),a=n.getComponent(cc.Sprite),s=n.getChildByName("timeNode").getComponent(cc.Label),c=3;s.string=c,a.fillRange=c/3;e.schedule(function t(){0==c&&(e.unschedule(t),n.active=!1,e.transmitBtn.interactable=!0),c--,s.string=c,a.fillRange=c/3},1),n.active=!0}else i.retinfo&&app.showHintMessage(i.retinfo)})}},onWSonEnemyJoin2Message:function(e){for(var t=this.getEffectFromPool("TransmitNode"),i=e.result,o=null,n=0;n<i.length;n++){var a=i[n],s="enemy"+a.enemyid%1e3,c=this.getNodeFromPool(s);if(c){var r=c.getComponent("Enemy");r.gameScript=this;var l=s+"Pool";r.enemyPool=this[l],r.initEnemy(a),c.parent=this.enemyPlaneNode,this.enemyNodeMap[a.enemyid]=c,o||((o=c).active=!1)}}var d=t.getComponent("TransmitNode");d.nodePool=this.TransmitNode,t.position=o.position,t.parent=this.effectParentNode,d.playTransmit(),this.scheduleOnce(function(){o.active=!0},.7)},onShotLevelsClick:function(e,t){var i=this.shotLevelsIndex;"add"==t?++i>=this.shotLevels.length&&(i=0):--i<0&&(i=this.shotLevels.length-1),this.shotLevelLabel.string=this.shotLevels[i],this.shotLevelsIndex=i,this.selfPlayerScript.shotLevel=this.shotLevels[i],app.requestJson({url:"/pipes/skywar/shotLevel/"+this.shotLevels[i],data:{bean:{}}},function(e,t){e&&t.success||t.retinfo&&app.showHintMessage(t.retinfo)})},onWSonPlayerShotLevelMessage:function(e){var t=e.result,i=this.playerNodeMap[t.userid];i&&(i.getComponent("SkywarPlane").shotLevel=t.shotlevel)},onWSonPlayerJoinMessage:function(e){var t=e.result,i=t.sitepos,o=t.userid,n=t.skinid,a=cc.v2(t.pointx,t.pointy),s="player"+n+"Pref",c=this.prefabMap[s],r=cc.instantiate(c),l=r.getComponent("SkywarPlane");if(l.gameScript=this,l.shotLevel=t.shotlevel,l.initWithData(t),a.x||a.y)r.position=this.startPosNode.children[i-1].position,r.parent=this.playerPlaneNode;else{var d=this.startPosNode.children[i-1].position;r.x=d.x,r.y=-cc.winSize.height/2,r.parent=this.playerPlaneNode,r.runAction(cc.moveTo(2,d))}this.playerNodeMap[o]=r,this.tableData.players[i-1]=t},onWSonPlayerLeaveMessage:function(e){for(var t=e.result,i=this.tableData.players,o=0;o<i.length;o++){var n=i[o];if(n&&n.userid==t.userid)this.tableData.players[o]=null,this.playerNodeMap[t.userid].getComponent("SkywarPlane").playerLeave(),this.playerNodeMap[t.userid]=null,this.playerNodeMap[t.userid]=null}t.userid==app.currUserid()&&app.openAlertDialog(e.retinfo||"\u60a8\u5df2\u7ecf\u9000\u51fa\u6e38\u620f!",function(){app.loadLobbyScene()})},onLeaveGameClick:function(){app.openDialog("ConfirmDialog",{title:"\u9000\u51fa",confirmTxt:"\u6e38\u620f\u8fd8\u5728\u6fc0\u70c8\u7684\u8fdb\u884c\u4e2d\uff0c\u786e\u5b9a\u9000\u51fa\u5417\uff1f",sureFunc:function(){app.requestJsonByWaiting({url:"/pipes/skywar/leaveGame"},function(e,t){e&&t&&(0!=t.retcode&&t.retinfo?app.showHintMessage(t.retinfo):app.loadLobbyScene())})}})},onWSonPlayerDeadMessage:function(e){var t=e.result,i=this.playerNodeMap[t.userid];if(i){var o=i.getComponent("SkywarPlane");o.isDeading=!0,i.active=!1;var n=this.getEffectFromPool("PlaneBoomEffect");if(n){var a=n.getComponent("PlaneBoomEffect");a.boomPool=this.PlaneBoomEffect,a.playBoom(),n.position=i.position,n.parent=this.effectParentNode}this.scheduleOnce(function(){o.deadAndReStart()},.35),t.userid==app.currUserid()&&(this.currUser.diamonds=t.userdiamonds,this.initBloodAward(t))}},onWSonPlayerUpdatePointMessage:function(e){var t=e.result,i=this.playerNodeMap[t.userid];i&&(i.position=cc.v2(t.x,t.y))},onWSonEnemyJoinMessage:function(e){for(var t=e.result,i=0;i<t.length;i++){var o=t[i],n=o.enemyid%1e3,a="enemy"+n,s=this.getNodeFromPool(a);if(s){var c=s.getComponent("Enemy");c.gameScript=this;var r=a+"Pool";c.enemyPool=this[r],c.initEnemy(o),s.parent=this.enemyPlaneNode,c.shotBullet(n,this.roomlevel),this.enemyNodeMap[o.enemyid]=s}}},onWSonEnemyBossComingMessage:function(e){var t=null;switch(e.result.kindid){case 501:t="PlaneCnName3008";break;case 502:t="PlaneCnName3001";break;case 503:t="PlaneCnName3002";break;case 504:t="PlaneCnName3003";break;case 505:t="PlaneCnName3004";break;case 506:t="PlaneCnName3005"}if(t){var i=null;t&&(i=this.bossComingAtlas.getSpriteFrame(t)),app.openDialog("game_skywar/BossComingDialog",i)}},onWSonPlayerJiguangMessage:function(e){var t=e.result,i=this.playerNodeMap[t.userid],o=t.shotjiguangremains;if(i){var n=i.getComponent("SkywarPlane");n.shotJiGuangPao(!0),this.scheduleOnce(function(){n.shotJiGuangPao(!1)},o||10)}},onWSonPlayerUseWingMessage:function(e){var t=e.result,i=this.playerNodeMap[t.userid];i&&i.getComponent("SkywarPlane").onUseWinging(!0,t.wingrunnings||1)},onWSonPlayerPauseWingMessage:function(e){var t=e.result,i=this.playerNodeMap[t.userid];i&&i.getComponent("SkywarPlane").onUseWinging(!1,0)},onXuanXiangClick:function(){var e=this.xuanxiangNode.active;this.xuanxiangNode.active=!e},onRuleClick:function(){app.openDialog("game_skywar/SkywarRuleDialog",{gameScript:this}),this.onXuanXiangClick()},onSettingClicked:function(){app.openDialog("SettingDialog"),this.onXuanXiangClick()},onMissionClick:function(){this.rengWuTipNode.active&&(this.rengWuTipNode.active=!1);var e=this;app.requestJsonByWaiting({url:"/pipes/mission/records"},function(t,i){if(t&&i)if(0!=i.retcode&&i.retinfo)app.showHintMessage(i.retinfo);else{app.openDialog("MissionDialog",{updateUserInfo:e.updateUserInfo.bind(e)},function(t){var o=t.getComponent("MissionDialog");o.gameScript=e,o.initWithData(i.result)})}})},updateUserInfo:function(e){var t=this;app.requestJson("/pipes/user/myinfo",function(t,i){t&&i.userid&&(app.updateUser(i),e&&e())}),app.requestJson({url:"/pipes/skywar/loadMyAccount",data:{bean:{}}},function(e,i){e&&0==i.retcode?(t.gameInfo.myAccount=i.result,app.updateSkywarGameinfo(t.gameInfo)):i.retinfo&&app.showHintMessage(i.retinfo)})},updateMissionRedPoint:function(){var e=this;app.requestJson({url:"/pipes/mission/check"},function(t,i){t&&i&&(0!=i.retcode&&i.retinfo?app.showHintMessage(i.retinfo):e.missionRedPointNode.active=!!i.result)})},onAwardClick:function(){this.awardSelectScript.onAwardSelect()},onFireLevelClick:function(){this.huoLiShengJiSelectScript.onFireLevelSelect()},onUseDanTouClick:function(){this.danTouSelectScript.onUseDanTouSelect()},onUseWingClick:function(){this.selfPlayerScript.isUseWing?(this.selfPlayerScript.onUseWinging(!1,0),this.usingWingNode.active=!1,app.requestJson("/pipes/skywar/pauseWing",function(e,t){if(e)if(0!=t.retcode&&t.retinfo)app.showHintMessage(t.retinfo);else t.result})):this.wingSelectScript.onUseDanTouSelect()},onJQQDClick:function(){app.showHintMessage("\u656c\u8bf7\u671f\u5f85\uff01")},onWSonEnemyKilledMessage:function(e){for(var t=this,i=e.result,o=i.specialmap||{},n=i.killedEnemyids||[],a=cc.v2(),s=this.playerNodeMap[i.userid].getComponent("SkywarPlane"),c=0;c<n.length;c++){var r=n[c],l=this.enemyNodeMap[r];if(l){a=l.position;var d=l.getComponent("Enemy"),p=parseInt(r%1e3);801==p||802==p||803==p||804==p||805==p||806==p||807==p||809==p||810==p||811==p?(d.destroyEnemy(),delete this.enemyNodeMap[r],o[r]&&this.displaySpecialEffect(r,o[r],a,i.userid),this.shakeEffect(.4)):(d.destroyEnemy(),delete this.enemyNodeMap[r]);var h=this.getEffectFromPool("PlaneBoomEffect"),u=this.boomScale[p]?this.boomScale[p]:1;if(h.setScale(u),h){var g=h.getComponent("PlaneBoomEffect");g.boomPool=this.PlaneBoomEffect,g.playBoom(),h.position=l.position,h.parent=this.effectParentNode}r==this.currTracksid&&this.selectTracksNode(),r==this.currRadersid&&this.selectRadersNode()}}var f=[1,100,1e3],m=f[this.roomlevel-1]?f[this.roomlevel-1]:1e3;if(i.wincoin)if(i.wincoin>=50*m){var v=this.getEffectFromPool("KilledSpecialRewardCoin");if(v){var y=v.getComponent("KilledSpecialRewardCoin");y.userid=i.userid,y.difengPool=this.KilledSpecialRewardCoin,y.playDiFen(i.wincoin,null),v.position=a,v.parent=this.effectParentNode}this.shakeEffect(.4)}else{var S=this.getEffectFromPool("KilledRewardCoin");if(S){var b=this.playerNodeMap[i.userid],N=S.getComponent("KilledRewardCoin");N.userid=i.userid,N.coinAwardPool=this.KilledRewardCoin,S.position=a,S.parent=this.effectParentNode,N.playCoinAward(i.wincoin,b)}}if(i.wincoupons){var C=0,D=function(e){var o=t.getEffectFromPool("SpecialAward");if(o){var n=t.playerNodeMap[i.userid],s=o.getComponent("SpecialAward");s.userid=i.userid,s.nodePool=t.SpecialAward,s.initSpecialAward(e,t.couponIconSpriteFrame),o.position=cc.v2(a.x,a.y+50*C),o.parent=t.effectParentNode,s.playSpecialAward(n),C++}};D(i.wincoupons>5?5:i.wincoupons),i.wincoupons>5&&D(i.wincoupons-5<6?i.wincoupons-5:5),s.playerInfo.coupons=i.usercoupons,this.couponsLabel.string=s.playerInfo.coupons}if(i.windiamond){var w=0,k=function(e){var o=t.getEffectFromPool("SpecialAward");if(o){var n=t.playerNodeMap[i.userid],s=o.getComponent("SpecialAward");s.userid=i.userid,s.nodePool=t.SpecialAward,s.initSpecialAward(e,t.diamondIconSpriteFrame),o.position=cc.v2(a.x,a.y+50*w),o.parent=t.effectParentNode,s.playSpecialAward(n),w++}};k(i.windiamond>5?5:i.windiamond),i.windiamond>5&&k(i.windiamond-5<6?i.windiamond-5:5),s.playerInfo.diamonds=i.userdiamonds}i.userid&&i.usercoins&&(s.playerInfo.coins<i.usercoins&&(s.coinsLabel.node.setScale(1),s.coinsLabel.node.stopAllActions(),s.coinsLabel.node.runAction(cc.sequence(cc.scaleTo(.3,1.1),cc.scaleTo(.3,1)))),s.playerInfo.coins=i.usercoins,s.coinsLabel.string=i.usercoins)},displaySpecialEffect:function(e,t,i,o){var n=this,a=this,s=parseInt(parseInt(e)%1e3),c=t.killedids||[],r=this.enemyNodeMap;if(801==s){var l=this.getEffectFromPool("Special801Node");if(l){var d=l.getComponent("Special801Node");if(!d)return;d.nodePool=this.Special801Node;for(var p=[],h=0;h<c.length;h++){var u=c[h],g=r[u];if(g){g.getComponent("Enemy").runTime=-3;var f=g.position,m=Math.abs(f.x-i.x),v=Math.abs(f.y-i.y),y=f.sub(i),S=Math.round(cc.misc.radiansToDegrees(Math.atan2(y.y,y.x)))+180,b=Math.sqrt(m*m+v*v);p.push({angle:S,distance:b})}}d.displaySpecialEffect(c,p),l.position=i,l.parent=this.effectParentNode,this.scheduleOnce(function(){n.killedPlane(t.killedids||[]),n.displaySpecialWinCoin(s,t,i,o)},2)}}if(802==s){var N=this.getEffectFromPool("Special802Node"),C=N.getComponent(dragonBones.ArmatureDisplay),D=N.getChildByName("xuanwo").getComponent(cc.Animation);D.node.active=!1,N.position=i,N.active=!0,N.parent=a.enemyBulletNode,C.playAnimation("bao");C.addEventListener(dragonBones.EventObject.LOOP_COMPLETE,function e(){C.removeEventListener(dragonBones.EventObject.LOOP_COMPLETE,e,a),D.node.setScale(2.5),D.node.active=!0,D.play();for(var n=0;n<c.length;n++){var l=c[n],d=r[l];d&&(d.getComponent("Enemy").runTime=-3,d.runAction(cc.spawn(cc.moveTo(5,i),cc.rotateBy(10,360),cc.scaleTo(5,.5))))}a.scheduleOnce(function(){D.node.runAction(cc.sequence(cc.scaleTo(.2,.5).easing(cc.easeIn(2)),cc.callFunc(function(){a.Special802Node.put(N)}))),a.killedPlane(t.killedids||[]),a.displaySpecialWinCoin(s,t,i,o)},4)},a)}if(803==s){var w=this.getEffectFromPool("Special803Node"),k=w.getComponent(dragonBones.ArmatureDisplay);w.position=i,w.active=!0,w.parent=this.effectParentNode,k.playAnimation("Animation1"),this.scheduleOnce(function(){n.Special803Node.put(w),n.killedPlane(t.killedids||[]),n.displaySpecialWinCoin(s,t,i,o)},1.5)}if(805==s&&o==app.currUserid()){var A={enemy:t,pos:i,closeCallback:function(){a.displaySpecialWinCoin(s,t,i,o)}},_=this.getEffectFromPool("Special805Node");if(_){var L=_.getComponent("Special805Node");L.nodePool=this.Special805Node,_.parent=this.effectParent2Node,_.position=cc.v2(0,0),L.initSpecial805Node(A)}}if(806==s&&o==app.currUserid()){var I={enemy:t,pos:i,closeCallback:function(){a.displaySpecialWinCoin(s,t,i,o)}},P=this.getEffectFromPool("Special806Node");if(P){var B=P.getComponent("Special806Node");B.nodePool=this.Special806Node,P.parent=this.effectParent2Node,P.position=cc.v2(0,0),B.initSpecial806Node(I)}}if(807==s&&o==app.currUserid()){var M={enemy:t,pos:i,closeCallback:function(){a.displaySpecialWinCoin(s,t,i,o)}},T=this.getEffectFromPool("Special807Node");if(T){var R=T.getComponent("Special807Node");R.nodePool=this.Special807Node,T.parent=this.effectParent2Node,T.position=cc.v2(0,0),R.initSpecial807Node(M)}}if(809==s&&o==app.currUserid()){var O={enemy:t,pos:i,closeCallback:function(){a.displaySpecialWinCoin(s,t,i,o)}},F=this.getEffectFromPool("Special809Node");if(F){var E=F.getComponent("Special809Node");E.nodePool=this.Special809Node,F.parent=this.effectParent2Node,F.position=cc.v2(0,0),E.initSpecial809Node(O)}}if((810==s||811==s)&&o==app.currUserid()){var x={enemy:t,pos:i,pokerAtlas:a.pokerAtlas,cardtypeAtlas:a.cardtypeAtlas,closeCallback:function(){a.displaySpecialWinCoin(s,t,i,o),a.displaySpecialGoods(t)}},U=this.getEffectFromPool("Special810Node");if(U){var j=U.getComponent("Special810Node");j.nodePool=this.Special810Node,U.parent=this.effectParent2Node,U.position=cc.v2(0,0),j.initSpecial810Node(x)}}},killedPlane:function(e){for(var t=0;t<e.length;t++){var i=e[t],o=this.enemyNodeMap[i];if(o){o.getComponent("Enemy").destroyEnemy(),delete this.enemyNodeMap[i];var n=this.getEffectFromPool("PlaneBoomEffect"),a=this.boomScale[parseInt(i%1e3)]?this.boomScale[parseInt(i%1e3)]:1;if(n.setScale(a),n){var s=n.getComponent("PlaneBoomEffect");s.boomPool=this.PlaneBoomEffect,s.playBoom(),n.position=o.position,n.parent=this.effectParentNode}}}},displaySpecialWinCoin:function(e,t,i,o){var n=this.getEffectFromPool("KilledSpecialRewardCoin");if(n){var a=n.getComponent("KilledSpecialRewardCoin");a.userid=o,a.difengPool=this.KilledSpecialRewardCoin;var s=this.getEnemySpriteFrame(e)?this.getEnemySpriteFrame(e):null;a.playDiFen(t.wincoin||t.wincupon,s,!0),n.position=i,n.parent=this.effectParentNode}this.shakeEffect(.4)},displaySpecialGoods:function(e){var t=this,i=this.getEffectFromPool("SpecialAward2");i.position=cc.v2(0,0),i.parent=this.effectParentNode,i.active=!0;for(var o=i.children,n=i.getComponent(cc.Layout),a=0;a<1;a++){var s=o[a];s.y=0,s.opacity=255,s.setScale(1),s.active=!0,cc.find("goods/numLabel",s).getComponent(cc.Label).string=e.wincoin}n.enabled=!0,n.updateLayout(),n.enabled=!1,this.scheduleOnce(function(){for(var e=function(e){var n=o[e];if(!n.active)return"continue";var a=t.selfPlayerScript.node.position;n.runAction(cc.sequence(cc.spawn(cc.moveTo(1,a).easing(cc.easeIn(2)),cc.scaleTo(1,.3,.3),cc.fadeTo(.8,100)),cc.callFunc(function(){n.opacity=0,2==e&&t.SpecialAward2.put(i)})))},n=0;n<3;n++)e(n)},2)},getEnemySpriteFrame:function(e){var t=this.enemyAtlas,i="";if(e<300&&(i="tujian_100"+(e-200)),e<400&&e>300&&(i="tujian_10"+(e-294<10?"0"+(e-294):e-294)),e<500&&e>400&&(i="tujian_10"+(e-388)),e<600&&e>500)switch(e){case 501:i="tujian_3008";break;case 502:i="tujian_3001";break;case 503:i="tujian_3002";break;case 504:i="tujian_3003";break;case 505:i="tujian_3004";break;case 506:i="tujian_3005";break;case 507:i="tujian_3006"}if(e<800&&e>600)switch(e){case 601:i="tujian_4001";break;case 602:i="tujian_4002";break;case 603:i="tujian_4004";break;case 604:i="tujian_4005"}if(e>800)switch(e){case 801:i="tujian_2001";break;case 802:i="tujian_2002";break;case 803:i="tujian_2003";break;case 804:i="tujian_2014";break;case 805:i="tujian_2004";break;case 806:i="tujian_2006";break;case 807:i="tujian_2008";break;case 808:i="tujian_2010";break;case 809:i="tujian_2005";break;case 810:i="tujian_5002";break;case 811:i="tujian_5003";break;case 812:i="tujian_5001";break;case 813:i="tujian_2009";break;case 814:i="tujian_2011"}if(i)return t.getSpriteFrame(i)},shakeEffect:function(e){var t=cc.find("Canvas/Main Camera");t.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.02,cc.v2(5,7)),cc.moveTo(.02,cc.v2(-6,7)),cc.moveTo(.02,cc.v2(-13,3)),cc.moveTo(.02,cc.v2(3,-6)),cc.moveTo(.02,cc.v2(-5,5)),cc.moveTo(.02,cc.v2(2,-8)),cc.moveTo(.02,cc.v2(-8,-10)),cc.moveTo(.02,cc.v2(3,10)),cc.moveTo(.02,cc.v2(0,0))))),this.scheduleOnce(function(){t.stopAllActions(),t.setPosition(0,0)},e)}}),cc._RF.pop()},{}],Socket:[function(e,t,i){"use strict";cc._RF.push(t,"fe55dGuAChI/7krlekKYPjC","Socket");var o=function(e){this._app=e,this._closed=!0,this._websocket=null,this._path="",this._observers=[],this._eventQueue=[],this._eventDealing=!1,this._httpevents={},this._sendOnClosedFunc=null;var t=this;this._loopRunEvent=function(){var e=t._eventQueue[0];if(e){t._eventQueue.splice(0,1);try{e.func.call(e.target,e.message)}catch(t){cc.error("\u5904\u7406WebSocket\u54cd\u5e94"+e.key+"\u4e8b\u4ef6\u5f02\u5e38\uff1a "+JSON.stringify(e.message),t)}t._loopRunEvent()}else t._eventDealing=!1},this._startRunEvent=function(){t._eventDealing||(t._eventDealing=!0,t._loopRunEvent())},this._addEvent=function(e,i,o,n){t._eventQueue.push({func:e,target:i,message:o,key:n}),t._startRunEvent()},cc.game.on(cc.game.EVENT_HIDE,function(){for(var e=t._observers,i=0;i<e.length;i++)if(e[i]){var o=e[i].onGameHide;if(o)try{o.call(e[i])}catch(e){cc.error("\u5904\u7406APP\u8fdb\u5165\u540e\u53f0\u4e8b\u4ef6\u65f6\u5f02\u5e38\uff1a "+e)}}}),cc.game.on(cc.game.EVENT_SHOW,function(){for(var e=t._observers,i=0;i<e.length;i++)if(e[i]){var o=e[i].onGameShow;if(o)try{o.call(e[i])}catch(e){cc.error("\u5904\u7406APP\u91cd\u65b0\u6fc0\u6d3b\u4e8b\u4ef6\u65f6\u5f02\u5e38\uff1a "+e)}}})};o.prototype.isClosed=function(){return this._closed},o.prototype.setSendOnClosedFunc=function(e){this._sendOnClosedFunc=e},o.prototype.close=function(){this._path="",cc.log("\u4e3b\u52a8\u5173\u95edWebSocket\uff01"),this._websocket&&this._websocket.close(),this._websocket=null,this._closed=!0},o.prototype.removeAllObservers=function(){this._observers=[]},o.prototype.getAllObservers=function(){return this._observers||[]},o.prototype.removeObserver=function(e){var t=this._observers.indexOf(e);t>-1&&this._observers.splice(t,1)},o.prototype.addObserver=function(e){this._observers.indexOf(e)>-1||this._observers.push(e)},o.prototype.reconnect=function(e){this._path&&this.connect(null,e)},o.prototype.connect=function(e,t){var i=i||window.WebSocket||window.MozWebSocket,o=this._app.getSocketHost();o&&0!=o.indexOf("ws")&&(o="ws://"+o);var n=this;if(!cc.sys.isNative&&!o){var a=""+document.location,s=a.substring(a.indexOf("//")+2);s=s.substring(0,s.indexOf("/")),o=(0==a.indexOf("https")?"wss://":"ws://")+s}if(e||this._path){if(null!=this._websocket&&!this.isClosed()){if(e==this._path)return;this._websocket.close()}this._path=e||this._path;var c=this._app.getSessionid(),r=o+this._path;c&&(r+=(this._path.indexOf("?")>0?"&":"?")+"JSESSIONID="+c),this._websocket=cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID&&o.indexOf("wss://")>-1?new i(r,null,cc.url.raw("resources/platf/cacert.pem")):new i(r);var l=this._observers;this._websocket.onopen=function(i){n._closed=!1,t&&t();for(var o=n._observers,a=0;a<o.length;a++)if(o[a]){var s=o[a].onSocketConnected;if(s)try{s.call(o[a],!e)}catch(e){cc.error("\u5904\u7406WebSocket\u91cd\u8fde\u4e8b\u4ef6\u5f02\u5e38\uff1a "+e)}}},this._websocket.onmessage=function(e){var t=e;try{t=JSON.parse(e.data);var i=null;for(var o in t){i=o;break}if(!i)return;if("onHttpResponseMessage"==i){var a=t[i],s=a.http_seqno;if(s){var c=n._httpevents[s];c&&(delete n._httpevents[s],c.timer&&clearTimeout(c.timer),c.event&&c.event(!0,a.content))}}else{"onLoginFailMessage"==i&&(n._app._canappabort=!1);for(var r=0;r<l.length;r++)if(l[r]){var d=!0,p=l[r].onWSEventMessage;p||(p=l[r]["onWS"+i],d=!1),p&&n._addEvent(p,l[r],d?t:t[i]||t,i)}}}catch(e){cc.log("\u5904\u7406WebSocket\u54cd\u5e94("+JSON.stringify(t)+")\u65f6\u5f02\u5e38\uff1a ",e)}},this._websocket.onclose=function(e){n._closed=!0,cc.log("WebSocket\u5173\u95ed\u8fde\u63a5: "+e);for(var t=n._observers,i=0;i<t.length;i++)if(t[i]){var o=t[i][n._path?"onSocketAborted":"onSocketClosed"];if(o)try{o.call(t[i])}catch(e){cc.error("\u5904\u7406WebSocket\u5173\u95ed\u4e8b\u4ef6\u5f02\u5e38\uff1a "+e)}}},this._websocket.onerror=function(e){n._closed=!0,cc.log("WebSocket\u53d1\u751f\u9519\u8bef: "+e);for(var t=n._observers,i=0;i<t.length;i++)if(t[i]){var o=t[i].onSocketError;if(o)try{o.call(t[i])}catch(e){cc.error("\u5904\u7406WebSocket\u9519\u8bef\u4e8b\u4ef6\u5f02\u5e38\uff1a "+e)}}}}},o.prototype.sendMessage=function(e){var t=this;t.isClosed()?t._sendOnClosedFunc?t._sendOnClosedFunc(e):t.connect(this._path,function(){t._websocket.send("string"==typeof e?e:JSON.stringify(e))}):t._websocket.send("string"==typeof e?e:JSON.stringify(e))},o.prototype.sendWsRouteMessage=function(e){if(this.isClosed()&&this._sendOnClosedFunc)this._sendOnClosedFunc(e);else{var t={message:{}},i=t.message;for(var o in i.module=e.module,e.nodeid&&(i.nodeid=e.nodeid),e)if("module"!=o&&"nodeid"!=o){i.action=o;var n=e[o],a=[];for(var s in n){var c=n[s];"string"==typeof c?c=encodeURIComponent(c):"number"!=typeof c&&(c=encodeURIComponent(JSON.stringify(c))),a.push(s+"="+c)}i.params=a.join("&")}this._websocket.send(JSON.stringify(t))}},o.prototype.sendHttpRouteMessage=function(e,t,i){var o=this,n={message:{}},a=e.url||("string"==typeof e?e:""),s=a.indexOf("pipes/"),c=a.substring(s+"pipes/".length),r=c.substring(0,c.indexOf("/")),l=c.substring(c.indexOf("/")+1),d=(s=c.indexOf("?"))>0?l.substring(0,s):l,p=s>0?l.substring(s+1):"";if(e.data){var h=p?[p]:[];for(var u in e.data){var g=e.data[u];"string"==typeof g?g=encodeURIComponent(g):"number"!=typeof g&&(g=encodeURIComponent(JSON.stringify(g))),h.push(u+"="+g)}p=h.join("&")}var f=n.message;if(f.module=r,f.action=d,f.params=p,p.indexOf("nodeid=")>=0){var m=p.substring(p.indexOf("nodeid=")+"nodeid=".length);m.indexOf("&")>0&&(m=m.substring(0,m.indexOf("&"))),f.nodeid=m}var v=(new Date).getTime(),y="hsn"+v+Math.floor(1e4*Math.random());f.http_seqno=y,e.headers&&(f.http_headers=e.headers);var S={time:v,event:t,timeoutevent:i};o._httpevents[f.http_seqno]=S,o.isClosed()&&o._sendOnClosedFunc?o._sendOnClosedFunc(n):(o._websocket.send(JSON.stringify(n)),S.timer=setTimeout(function(){var e=o._httpevents[y];delete o._httpevents[y];var t={status:600,statusText:"TIMEOUT"};e&&e.timeoutevent?e.timeoutevent(!1,t,t):e&&e.event&&e.event(!1,t,t)},15e3))},t.exports=o,cc._RF.pop()},{}],Special801Node:[function(e,t,i){"use strict";cc._RF.push(t,"357b8+oYKtIiLtBrV3zbmtm","Special801Node"),cc.Class({extends:cc.Component,properties:{lightNode:cc.Node,lightParentNode:cc.Node},displaySpecialEffect:function(e,t){var i=this;cc.log(t),this.lightParentNode.removeAllChildren();for(var o=0;o<t.length;o++){var n=t[o],a=cc.instantiate(this.lightNode);a.setScale(n.distance/256,1),a.angle=n.angle,a.active=!0,a.parent=this.lightParentNode}this.scheduleOnce(function(){i.nodePool&&i.nodePool.put(i.node)},2)}}),cc._RF.pop()},{}],Special804Node:[function(e,t,i){"use strict";cc._RF.push(t,"7e55cffLytNQ6uHcVi7walR","Special804Node"),cc.Class({extends:cc.Component,properties:{jiGuangPaoColl:cc.BoxCollider,jiGuangPaoSpine:dragonBones.ArmatureDisplay},onLoad:function(){},initJiGuangPao:function(e){var t=this;cc.winSize.height;this.isInited=!1,this.bulletUserid=e,this.jiGuangPaoSpine.playAnimation("start");this.jiGuangPaoSpine.addEventListener(dragonBones.EventObject.LOOP_COMPLETE,function e(){t.jiGuangPaoSpine.playAnimation("always"),t.jiGuangPaoSpine.removeEventListener(dragonBones.EventObject.LOOP_COMPLETE,e,t),t.isInited=!0},t)},closeJiGuangPao:function(e){var t=this;if(this.isInited=!0,this.jiGuangPaoSpine){this.jiGuangPaoSpine.playAnimation("end");this.jiGuangPaoSpine.addEventListener(dragonBones.EventObject.LOOP_COMPLETE,function i(){t.jiGuangPaoSpine.removeEventListener(dragonBones.EventObject.LOOP_COMPLETE,i,t),e&&e()},t)}},onCollisionEnter:function(e,t){var i=this;if(this.isInited&&"plane"==e.node.name&&e.node.parent){var o=e.node.parent.getComponent("Enemy");if(o){if(o.onEnemyColl(),this.bulletUserid==app.currUserid()){var n=[o.config.enemyid],a=parseInt(1e4*e.node.x)/1e4,s=parseInt(1e4*e.node.y)/1e4;app.sendSocketMessage({module:"game_skywar",killEnemy:{bean:{pointx:a,pointy:s,enemyids:n}}})}this.scheduleOnce(function(){var o=e.size,n=e.node.parent.convertToWorldSpaceAR(cc.v2(e.node.x-.5*o.width,e.node.y-.5*o.height)),a=cc.rect(n.x,n.y,o.width,o.height);i.node.getBoundingBoxToWorld().intersects(a)&&i.onCollisionEnter(e,t)},.2)}}}}),cc._RF.pop()},{}],Special805Node:[function(e,t,i){"use strict";cc._RF.push(t,"334f8q623JH5J2yztMtnAMm","Special805Node"),cc.Class({extends:cc.Component,properties:{iconNode:cc.Node,awardNode:cc.Node,lightNode:cc.Node,line1Node:cc.Node,line2Node:cc.Node,line3Node:cc.Node,taiBangLeSpine:dragonBones.ArmatureDisplay},onLoad:function(){},initSpecial805Node:function(e){var t=this;if(e){this.MaxSpeed=12,this.AddSpeed=.2,this.Duration=2,this.line1State=0,this.line1Speed=0,this.line1Time=0,this.line1Distance=0,this.line1HadMove=0,this.line2State=0,this.line2Speed=0,this.line2Time=0,this.line2Distance=0,this.line2HadMove=0,this.line3State=0,this.line3Speed=0,this.line3Time=0,this.line3Distance=0,this.line3HadMove=0,this.haveDisplayed=!1,this.closeCallback=null,this.iconNode.setScale(1),this.iconNode.opacity=255,this.iconNode.active=!0,this.awardNode.active=!1,this.lightNode.active=!1,this.taiBangLeSpine.node.active=!1;var i=Math.floor(10*Math.random());this.line1Node.y=130*-i-130,i=Math.floor(10*Math.random()),this.line2Node.y=130*-i-130,i=Math.floor(10*Math.random()),this.line3Node.y=130*-i-130,this.iconNode.position=e.pos;var o=e.enemy;this.rand=o.rand.toString()||"000",this.closeCallback=e.closeCallback,this.line1Distance=130*parseInt(this.rand[0]||0)+130,this.line2Distance=130*parseInt(this.rand[1]||0)+130,this.line3Distance=130*parseInt(this.rand[2]||0)+130,this.iconNode.runAction(cc.sequence(cc.spawn(cc.moveTo(1,cc.v2(0,0)).easing(cc.easeIn(2)),cc.scaleTo(1,1.5)),cc.scaleTo(.2,.3),cc.callFunc(function(){t.iconNode.active=!1,t.awardNode.active=!0,t.startAward()})))}},startAward:function(){var e=this;this.line1State=1,this.scheduleOnce(function(){e.line2State=1},.5),this.scheduleOnce(function(){e.line3State=1},1)},displayAward:function(){var e=this;this.haveDisplayed||(this.haveDisplayed=!0,this.lightNode.active=!0,this.taiBangLeSpine.node.active=!0,this.taiBangLeSpine.playAnimation("Animation1"),this.scheduleOnce(function(){e.closeCallback&&e.closeCallback(),e.nodePool?e.nodePool.put(e.node):e.node.destroy()},2))},update:function(e){1==this.line1State&&(this.line1Time+=e,this.line1Node.y-=this.line1Speed*e*60,this.line1Speed<this.MaxSpeed?this.line1Speed+=this.AddSpeed*e*60:this.line1Time>=this.Duration&&Math.abs(Math.abs(this.line1Node.y)-this.line1Distance)<=20&&(this.line1Node.y=-this.line1Distance,this.line1State=2)),2==this.line1State&&(this.line1Speed=this.MaxSpeed*((1300-this.line1HadMove)/1300)+1.5,this.line1Node.y-=this.line1Speed*e*60,this.line1HadMove+=this.line1Speed*e*60,this.line1HadMove>=1300&&(this.line1State=0,this.line1Node.y=-this.line1Distance,0==this.line2State&&0==this.line3State&&this.displayAward())),this.line1Node.y<=-1430&&(this.line1Node.y=-130),1==this.line2State&&(this.line2Time+=e,this.line2Node.y-=this.line2Speed*e*60,this.line2Speed<this.MaxSpeed?this.line2Speed+=this.AddSpeed*e*60:this.line2Time>=this.Duration&&Math.abs(Math.abs(this.line2Node.y)-this.line2Distance)<=20&&(this.line2Node.y=-this.line2Distance,this.line2State=2)),2==this.line2State&&(this.line2Speed=this.MaxSpeed*((1300-this.line2HadMove)/1300)+1.5,this.line2Node.y-=this.line2Speed*e*60,this.line2HadMove+=this.line2Speed*e*60,this.line2HadMove>=1300&&(this.line2State=0,this.line2Node.y=-this.line2Distance,0==this.line1State&&0==this.line3State&&this.displayAward())),this.line2Node.y<=-1430&&(this.line2Node.y=-130),1==this.line3State&&(this.line3Time+=e,this.line3Node.y-=this.line3Speed*e*60,this.line3Speed<this.MaxSpeed?this.line3Speed+=this.AddSpeed*e*60:this.line3Time>=this.Duration&&Math.abs(Math.abs(this.line3Node.y)-this.line3Distance)<=20&&(this.line3Node.y=-this.line3Distance,this.line3State=2)),2==this.line3State&&(this.line3Speed=this.MaxSpeed*((1300-this.line3HadMove)/1300)+1.5,this.line3Node.y-=this.line3Speed*e*60,this.line3HadMove+=this.line3Speed*e*60,this.line3HadMove>=1300&&(this.line3State=0,this.line3Node.y=-this.line3Distance,0==this.line1State&&0==this.line2State&&this.displayAward())),this.line3Node.y<=-1430&&(this.line3Node.y=-130)}}),cc._RF.pop()},{}],Special806Node:[function(e,t,i){"use strict";cc._RF.push(t,"4de1bl24pBJALaVM4IsnJwR","Special806Node"),cc.Class({extends:cc.Component,properties:{iconNode:cc.Node,awardNode:cc.Node,line1Node:cc.Node,line2Node:cc.Node,numLabel:cc.Label},onLoad:function(){},initSpecial806Node:function(e){var t=this;if(e){this.MaxSpeed=12,this.AddSpeed=.2,this.Duration=2,this.line1State=0,this.line1Speed=0,this.line1Time=0,this.line1Distance=0,this.line1HadMove=0,this.line2State=0,this.line2Speed=0,this.line2Time=0,this.line2Distance=0,this.line2HadMove=0,this.haveDisplayed=!1,this.closeCallback=null,this.iconNode.setScale(1),this.iconNode.opacity=255,this.iconNode.active=!0,this.awardNode.active=!1,this.numLabel.node.opacity=255,this.numLabel.node.active=!1,this.line1Node.angle=0,this.line2Node.x=0,this.iconNode.position=e.pos;var i=e.enemy;this.initAwardNode(i),this.closeCallback=e.closeCallback,this.iconNode.runAction(cc.sequence(cc.spawn(cc.moveTo(1,cc.v2(0,0)).easing(cc.easeIn(2)),cc.scaleTo(1,1.5)),cc.scaleTo(.2,.3),cc.callFunc(function(){t.iconNode.active=!1,t.awardNode.active=!0,t.startAward()})))}},initAwardNode:function(e){for(var t=e.basecoin,i=e.factor,o=e.coinitems,n=e.factoritems,a=this.line1Node.children,s=0,c=0;c<a.length;c++){a[c].children[0].getComponent(cc.Label).string=o[c]||0,o[c]==t&&(s=c)}this.line2Node.children;for(var r=0,l=0;l<n.length;l++)n[l]==i&&(r=l);this.line1Distance=30*-s,this.line2Distance=r<9?108*r:864,this.basecoin=t,this.factor=i},displayAward:function(){var e=this;this.haveDisplayed||(this.haveDisplayed=!0,this.numLabel.string=this.basecoin+" x "+this.factor+" = "+parseInt(this.basecoin*this.factor),this.numLabel.node.active=!0,this.numLabel.node.runAction(cc.repeat(cc.sequence(cc.fadeTo(.2,150),cc.fadeTo(.2,255)),3)),this.scheduleOnce(function(){e.closeCallback&&e.closeCallback(),e.nodePool?e.nodePool.put(e.node):e.node.destroy()},2))},startAward:function(){this.line1State=1,this.line2State=1},update:function(e){1==this.line1State&&(this.line1Time+=e,this.line1Node.angle-=this.line1Speed*e*60,this.line1Speed<8?this.line1Speed+=.2*e*60:this.line1Time>=this.Duration&&(this.line1Node.angle+this.line1Distance)%360>=-20&&(this.line1Node.angle=this.line1Distance,this.line1State=2)),2==this.line1State&&(this.line1Speed=this.MaxSpeed*((360-this.line1HadMove)/360)+.1,this.line1Node.angle-=this.line1Speed*e*60,this.line1HadMove+=this.line1Speed*e*60,this.line1HadMove>=360&&(this.line1State=0,this.line1Node.angle=this.line1Distance,0==this.line2State&&this.displayAward())),1==this.line2State&&(this.line2Time+=e,this.line2Node.x-=this.line2Speed*e*60,this.line2Speed<this.MaxSpeed?this.line2Speed+=this.AddSpeed*e*60:this.line2Time>=this.Duration&&Math.abs(Math.abs(this.line2Node.x)-this.line2Distance)<=20&&(this.line2Node.x=-this.line2Distance,this.line2State=2)),2==this.line2State&&(this.line2Speed=this.MaxSpeed*((972-this.line2HadMove)/972)+1.5,this.line2Node.x-=this.line2Speed*e*60,this.line2HadMove+=this.line2Speed*e*60,this.line2HadMove>=972&&(this.line2State=0,this.line2Node.x=-this.line2Distance,0==this.line1State&&this.displayAward())),this.line2Node.x<=-972&&(this.line2Node.x=0)}}),cc._RF.pop()},{}],Special807Node:[function(e,t,i){"use strict";cc._RF.push(t,"b2129espwhPXonQSIx7MAtL","Special807Node"),cc.Class({extends:cc.Component,properties:{iconNode:cc.Node,awardNode:cc.Node,line1Node:cc.Node},onLoad:function(){},initSpecial807Node:function(e){var t=this;if(e){this.MaxSpeed=12,this.AddSpeed=.2,this.line1State=0,this.line1Speed=0,this.line1Node.y=0,this.iconNode.setScale(1),this.iconNode.opacity=255,this.iconNode.active=!0,this.awardNode.active=!1;var i=e.enemy;this.initAwardNode(i),this.iconNode.position=e.pos,this.iconNode.active=!0,this.iconNode.runAction(cc.sequence(cc.spawn(cc.moveTo(1,cc.v2(0,0)).easing(cc.easeIn(2)),cc.scaleTo(1,1.5)),cc.scaleTo(.2,.3),cc.callFunc(function(){t.iconNode.active=!1,t.awardNode.setScale(.3),t.awardNode.active=!0,t.awardNode.runAction(cc.scaleTo(2,1)),t.line1State=1,t.scheduleOnce(function(){e.closeCallback&&e.closeCallback(),t.nodePool?t.nodePool.put(t.node):t.node.destroy()},3.5)})))}},initAwardNode:function(e){for(var t=e.items,i=this.line1Node.children,o=[9,19,29,59,99],n=0;n<i.length;n++){var a=i[n];n==i.length-1?a.getComponent(cc.Label).string="x"+(t[0]||o[0]):a.getComponent(cc.Label).string="x"+(t[n]||o[n])}},update:function(e){1==this.line1State&&(this.line1Node.y-=this.line1Speed*e*60,this.line1Speed<this.MaxSpeed&&(this.line1Speed+=this.AddSpeed*e*60)),this.line1Node.y<=-795.5&&(this.line1Node.y=0)}}),cc._RF.pop()},{}],Special809Node:[function(e,t,i){"use strict";cc._RF.push(t,"464f7+OamZPG6fStFkRyTFl","Special809Node"),cc.Class({extends:cc.Component,properties:{iconNode:cc.Node,lightNode:cc.Animation,awardNode:cc.Node,numLabel:cc.Label,line1Node:cc.Node,line2Node:cc.Node},onLoad:function(){},initSpecial809Node:function(e){var t=this;if(e){this.MaxSpeed=12,this.AddSpeed=.2,this.Duration=2,this.line1State=0,this.line1Speed=0,this.line1Time=0,this.line1Distance=0,this.line1HadMove=0,this.line2State=0,this.line2Speed=0,this.line2Time=0,this.line2Distance=0,this.line2HadMove=0,this.haveDisplayed=!1,this.closeCallback=null,this.iconNode.setScale(1),this.iconNode.opacity=255,this.iconNode.active=!0,this.awardNode.active=!1,this.lightNode.active=!1;var i=Math.floor(10*Math.random());this.line1Node.y=130*-i-130,i=Math.floor(10*Math.random()),this.line2Node.y=130*-i-130,this.iconNode.position=e.pos;var o=e.enemy;this.rand=o.rand.toString()||"00",this.factor=parseInt(o.factor),this.closeCallback=e.closeCallback,this.line1Distance=130*parseInt(this.rand[0]||0)+130,this.line2Distance=130*parseInt(this.rand[1]||0)+130,this.numLabel.string=" ? X "+o.factor+" = ? ",this.iconNode.runAction(cc.sequence(cc.spawn(cc.moveTo(1,cc.v2(0,0)).easing(cc.easeIn(2)),cc.scaleTo(1,1.5)),cc.scaleTo(.2,.3),cc.callFunc(function(){t.iconNode.active=!1,t.awardNode.active=!0,t.startAward()})))}},startAward:function(){var e=this;this.line1State=1,this.scheduleOnce(function(){e.line2State=1},.5)},displayAward:function(){var e=this;this.haveDisplayed||(this.haveDisplayed=!0,this.lightNode.active=!0,this.numLabel.string=parseInt(this.rand)+" X "+this.factor+" = "+parseInt(this.rand)*this.factor,this.numLabel.node.runAction(cc.repeat(cc.sequence(cc.fadeTo(.2,150),cc.fadeTo(.2,255)),3)),this.scheduleOnce(function(){e.closeCallback&&e.closeCallback(),e.nodePool?e.nodePool.put(e.node):e.node.destroy()},2))},update:function(e){1==this.line1State&&(this.line1Time+=e,this.line1Node.y-=this.line1Speed*e*60,this.line1Speed<this.MaxSpeed?this.line1Speed+=this.AddSpeed*e*60:this.line1Time>=this.Duration&&Math.abs(Math.abs(this.line1Node.y)-this.line1Distance)<=20&&(this.line1Node.y=-this.line1Distance,this.line1State=2)),2==this.line1State&&(this.line1Speed=this.MaxSpeed*((1300-this.line1HadMove)/1300)+1.5,this.line1Node.y-=this.line1Speed*e*60,this.line1HadMove+=this.line1Speed*e*60,this.line1HadMove>=1300&&(this.line1State=0,this.line1Node.y=-this.line1Distance,0==this.line2State&&this.displayAward())),this.line1Node.y<=-1430&&(this.line1Node.y=-130),1==this.line2State&&(this.line2Time+=e,this.line2Node.y-=this.line2Speed*e*60,this.line2Speed<this.MaxSpeed?this.line2Speed+=this.AddSpeed*e*60:this.line2Time>=this.Duration&&Math.abs(Math.abs(this.line2Node.y)-this.line2Distance)<=20&&(this.line2Node.y=-this.line2Distance,this.line2State=2)),2==this.line2State&&(this.line2Speed=this.MaxSpeed*((1300-this.line2HadMove)/1300)+1.5,this.line2Node.y-=this.line2Speed*e*60,this.line2HadMove+=this.line2Speed*e*60,this.line2HadMove>=1300&&(this.line2State=0,this.line2Node.y=-this.line2Distance,0==this.line1State&&this.displayAward())),this.line2Node.y<=-1430&&(this.line2Node.y=-130)}}),cc._RF.pop()},{}],Special810Node:[function(e,t,i){"use strict";cc._RF.push(t,"86d50pNGJdPnof4wYowdmNm","Special810Node"),cc.Class({extends:cc.Component,properties:{iconNode:cc.Node,lightNode:cc.Node,awardNode:cc.Node,pokerNode:cc.Node,factorLabel:cc.Label,cardtypeSprite:cc.Sprite},onLoad:function(){},initSpecial810Node:function(e){var t=this;if(e){this.iconNode.setScale(1),this.iconNode.opacity=255,this.iconNode.active=!0,this.awardNode.active=!1,this.lightNode.active=!1,this.pokerAtlas=e.pokerAtlas,this.cardtypeAtlas=e.cardtypeAtlas;var i=e.enemy;this.initAwardNode(i),this.iconNode.position=e.pos,this.iconNode.active=!0,this.iconNode.runAction(cc.sequence(cc.spawn(cc.moveTo(1,cc.v2(0,0)).easing(cc.easeIn(2)),cc.scaleTo(1,1.5)),cc.scaleTo(.2,.3),cc.callFunc(function(){t.iconNode.active=!1,t.awardNode.active=!0;var i=t.pokerNode.children,o=0,n=function e(){if(o>=2&&t.unschedule(e),i[o]){var n=i[o].children[1],a=i[o].children[0];n.runAction(cc.sequence(cc.scaleTo(.5,-1,1),cc.callFunc(function(){n.active=!1,a.active=!0}))),o++}};n(),t.schedule(n,.5),t.scheduleOnce(function(){t.lightNode.active=!0,t.cardtypeSprite.node.setScale(10),t.cardtypeSprite.node.active=!0,t.cardtypeSprite.node.runAction(cc.sequence(cc.scaleTo(.5,1,1),cc.delayTime(.5),cc.callFunc(function(){t.factorLabel.node.active=!0}))),t.scheduleOnce(function(){e.closeCallback&&e.closeCallback(),t.nodePool?t.nodePool.put(t.node):t.node.destroy()},2)},2.5)})))}},initAwardNode:function(e){for(var t=e.cards,i=e.factor||1,o=e.cardtype,n=this.pokerNode.children,a=0;a<n.length;a++){var s=n[a],c=s.children[0].getComponent(cc.Sprite);c.spriteFrame=this.getPokerSpriteFrame(t[a]),c.node.active=!1,s.children[1].active=!0,s.children[1].setScale(1,1)}this.factorLabel.string="x "+i,this.factorLabel.node.active=!1,this.cardtypeSprite.spriteFrame=this.getCardtypeSpriteFrame(o),this.cardtypeSprite.node.setScale(1,1),this.cardtypeSprite.node.active=!1},getCardtypeSpriteFrame:function(e){var t="plane_px_txt_";switch(e){case 1:t+="sanpai";break;case 2:t+="duizi";break;case 3:t+="shunzi";break;case 4:t+="tonghua";break;case 5:t+="tonghuashun";break;case 6:t+="baozi"}return this.cardtypeAtlas.getSpriteFrame(t)},getPokerSpriteFrame:function(e){var t=(e+="")[0],i=parseInt(e.slice(1,3)),o="plane_poke_",n="";switch(t){case"3":n="square_";break;case"4":n="meihua_";break;case"5":n="hongtao_";break;case"6":n="heitao_"}switch(i){case 11:i="j";break;case 12:i="q";break;case 13:i="k";break;case 14:i="a"}return o=o+n+i,this.pokerAtlas.getSpriteFrame(o)}}),cc._RF.pop()},{}],SpecialAward:[function(e,t,i){"use strict";cc._RF.push(t,"87934FA+z9HioD05gtkQcS2","SpecialAward"),cc.Class({extends:cc.Component,properties:{layoutScript:cc.Layout},initSpecialAward:function(e,t){var i={1:[0],2:[-40,40],3:[-80,0,80],4:[-120,-40,40,120],5:[-160,-80,0,80,160]};this.count=e,this.unscheduleAllCallbacks();for(var o=this.node.children,n=0;n<o.length;n++){var a=o[n];a.children[1].getComponent(cc.Sprite).spriteFrame=t;var s=n<e;a.active=s,a.x=i[e][n]||0,a.y=0,a.opacity=255,a.setScale(.7),a.stopAllActions()}},playSpecialAward:function(e){var t=this,i=this;if(e){var o=this.node.children,n=0;this.schedule(function t(){n==i.count-1&&this.unschedule(t);var a=o[n];a&&(a.runAction(cc.sequence(cc.repeat(cc.sequence(cc.moveBy(.2,cc.v2(0,50)),cc.moveBy(.2,cc.v2(0,-50))),3),cc.callFunc(function(){var t=e.convertToWorldSpaceAR(cc.v2()),o=i.node.convertToNodeSpaceAR(t);a.runAction(cc.spawn(cc.moveTo(.3,cc.v2(o.x,o.y+20)),cc.scaleTo(.3,.3),cc.fadeTo(.3,100)))}))),n++)},.1),this.scheduleOnce(function(){t.nodePool&&t.nodePool.put(t.node)},1.5+i.count/10)}}}),cc._RF.pop()},{}],SportHeDanJiFFenDialog:[function(e,t,i){"use strict";cc._RF.push(t,"7cd69wmFdVNe7ielQfWpAdu","SportHeDanJiFFenDialog"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},onCloseClick:function(){app.closeDialog(this)}}),cc._RF.pop()},{}],SportNomalDialog:[function(e,t,i){"use strict";cc._RF.push(t,"de2fdNoT/BPLqG4lWpSvMxE","SportNomalDialog"),cc.Class({extends:cc.Component,properties:{rewardNode:cc.Node,timeLabel:cc.Label,scheduleLabel:cc.Label,sportTitleLabel:cc.Label},onLoad:function(){var e=this,t=app.currParamData();if(this.sportData=t.sportData,this.parentScript=t.parentScript,this.sportData){var i=this.rewardNode.children,o=this.sportData.goodsitems;this.initItem(o[0],i[1]),this.initItem(o[1],i[0]),this.initItem(o[2],i[2]);var n="";102==this.sportData.roomlevel&&(n="50\u5b50\u5f39\u5927\u5956\u8d5b"),101==this.sportData.roomlevel&&(n="\u6838\u5f39\u5927\u5956\u8d5b"),this.sportTitleLabel.string=n;var a=new Date(1577808e6+this.sportData.startmills),s=a.getHours(),c=a.getMinutes(),r=new Date,l=new Date(r.getFullYear(),r.getMonth(),r.getDate(),s,c).getTime(),d=(new Date).getTime();if(this.timeLabel.string=(d<=l?"\u4eca\u5929":"\u660e\u5929")+a.toHourMinuteString()+"\u5f00\u8d5b",d>l)this.scheduleLabel.node.active=!1;else{var p=parseInt((l-d)/1e3);this.scheduleLabel.string=parseInt(p/3600)+"\u5c0f\u65f6"+parseInt(p%3600/60)+"\u5206\u949f"+parseInt(p%3600%60)+"\u79d2";this.schedule(function t(){p<=1&&e.unschedule(t),p--,e.scheduleLabel.string=parseInt(p/3600)+"\u5c0f\u65f6"+parseInt(p%3600/60)+"\u5206\u949f"+parseInt(p%3600%60)+"\u79d2"},1)}}},initItem:function(e,t){var i=ls.loadGoodsIntro(e.goodstype,e.goodsobjid),o=t.getChildByName("icon").getComponent(cc.Sprite),n=t.getChildByName("numLabel").getComponent(cc.Label);o.spriteFrame=i.spriteFrame,n.string=e.goodscount+i.goodsname,e.goodscount<=100&&(n.string=i.goodsname+"x"+e.goodscount)},start:function(){},onCloseClick:function(){app.closeDialog(this)},onApplyClick:function(){var e=this,t=this.sportData.roomlevel;app.requestJson({url:"/pipes/skywar/applySport",data:{roomlevel:t}},function(i,o){if(!i||0!=o.retcode)return o.retinfo&&app.showHintMessage(o.retinfo),app.closeDialog(e),void app.requestJson({url:"/pipes/skywar/enterGame",data:{bean:{roomlevel:t}}},function(e,i){e&&0==i.retcode?app.openDialog("game_skywar/SkywarLoadDialog",{roomlevel:t},null,null,!0,!1):i.retinfo&&app.showHintMessage(i.retinfo)});cc.log(o);o.result;app.showHintMessage("\u62a5\u540d\u6210\u529f~"),e.parentScript&&e.parentScript.initWithData(),app.closeDialog(e)})}}),cc._RF.pop()},{}],SportSelectDialog:[function(e,t,i){"use strict";cc._RF.push(t,"7a59axdixBJIKKh8phoXpMs","SportSelectDialog"),cc.Class({extends:cc.Component,properties:{animList:[cc.Animation],heDanJiFenTitleLabel:cc.Label,coins50ApplyCountLabel:cc.Label,coins50TitleLabel:cc.Label,heDanDaJiangApplyCountLabel:cc.Label,heDanDaJiangTitleLabel:cc.Label},onLoad:function(){var e=this,t=cc.winSize;this.node.height=t.height,this.node.width=t.width,this.node.y=-t.height/2,this.node.runAction(cc.moveTo(.2,cc.v2(t.width/2,t.height/2))),this.scheduleOnce(function(){for(var t=0;t<e.animList.length;t++){e.animList[t].play()}},.2);var i=app.currParamData();this.parentScript=i.parentScript,this.parentScript.node.active=!1,this.initWithData()},start:function(){},initWithData:function(){var e=this;app.requestJson({url:"/pipes/skywar/loadSport"},function(t,i){if(t&&i)if(0!=i.retcode&&i.retinfo)app.showHintMessage(i.retinfo);else{cc.log(i);var o=i.result;e.sportData=o;for(var n=o.sport103.startranges||[],a=(new Date).getHours(),s=0;s<n.length;s++){var c=n[s],r=new Date(1577808e6+c.min),l=new Date(1577808e6+c.max),d=r.getHours(),p=l.getHours();if(0==s&&(e.heDanJiFenTitleLabel.string="\u7b2c\u4e00\u573a\uff1a\u4eca\u5929"+r.toHourMinuteString()+"-"+l.toHourMinuteString()+"\u5f00\u8d5b",this.startmills=r.toHourMinuteString(),this.endmills=l.toHourMinuteString()),a>=d&&a<=p){var h="\u4e00";1==s&&(h="\u4e8c"),2==s&&(h="\u4e09"),3==s&&(h="\u56db"),e.heDanJiFenTitleLabel.string="\u7b2c"+h+"\u573a\uff1a\u4eca\u5929"+r.toHourMinuteString()+"-"+l.toHourMinuteString()+"\u5f00\u8d5b"}s==n.length-1&&a>p&&(e.heDanJiFenTitleLabel.string="\u7b2c\u4e00\u573a\uff1a\u660e\u5929"+this.startmills+"-"+this.endmills+"\u5f00\u8d5b")}var u=o.sport102;e.coins50ApplyCountLabel.string=u.applycount;var g=new Date(1577808e6+u.startmills),f=g.getHours();e.coins50TitleLabel.string=(a<=f?"\u4eca\u5929":"\u660e\u5929")+g.toHourMinuteString()+"\u5f00\u8d5b";var m=o.sport101;e.heDanDaJiangApplyCountLabel.string=m.applycount,f=(g=new Date(1577808e6+m.startmills)).getHours(),e.heDanDaJiangTitleLabel.string=(a<=f?"\u4eca\u5929":"\u660e\u5929")+g.toHourMinuteString()+"\u5f00\u8d5b"}})},onCloseClick:function(){var e=this,t=cc.winSize;this.node.runAction(cc.moveTo(.2,cc.v2(t.width/2,-t.height/2))),this.scheduleOnce(function(){app.closeDialog(e)},.2),this.parentScript&&(this.parentScript.node.active=!0)},onHeDanJiFenClick:function(){app.openDialog("SportHeDanJiFFenDialog",{},null,null,!1,!0)},onNomalClick:function(e,t){var i=null;102==(t=parseInt(t))&&(i=this.sportData.sport102),101==t&&(i=this.sportData.sport101),app.openDialog("SportNomalDialog",{parentScript:this,sportData:i},null,null,!1,!0)}}),cc._RF.pop()},{}],TransmitNode:[function(e,t,i){"use strict";cc._RF.push(t,"f48a1wrIjREaq7e9wibxIWe","TransmitNode"),cc.Class({extends:cc.Component,properties:{chuanSongAnim:cc.Animation},onLoad:function(){},playTransmit:function(){var e=this;this.chuanSongAnim.play(),this.scheduleOnce(function(){e.nodePool?e.nodePool.put(e.node):e.node.destroy()},1)}}),cc._RF.pop()},{}],UpgradeScene:[function(e,t,i){"use strict";cc._RF.push(t,"0a412+LIhxF9Kk0HL0ZQjPj","UpgradeScene"),cc.Class({extends:cc.Component,properties:{upgradeLabel:cc.Label,processLabel:cc.Label,upgradeRate:cc.Label,upgradeProgress:cc.ProgressBar},ctor:function(){this._updating=!1,this._assetsManager=null},loadNextScene:function(){cc.director.loadScene("LoginScene")},start:function(){if(app.setNativeAppInited(),this.upgradeLabel.string="\u52a0\u8f7d\u4e2d\u2026\u2026",this.processLabel.node.active=!1,this.upgradeProgress.node.active=!1,cc.audioEngine.stopAll(),!cc.sys.isNative)return this.upgradeLabel.string="\u52a0\u8f7d\u4e2d\u2026\u2026",void this.loadNextScene();var e=jsb&&jsb.fileUtils?jsb.fileUtils.getWritablePath():"/",t=e+"remote-assets",i=cc.sys.os===cc.sys.OS_ANDROID?"_android":cc.sys.os===cc.sys.OS_IOS?"_ios":"",o=jsb.fileUtils.isFileExist(e+"project"+i+".manifest")?e+"project"+i+".manifest":"project"+i+".manifest";cc.sys.isNative&&cc.log((jsb.fileUtils.isFileExist("project"+i+".manifest")?"":"\u4e0d")+"\u5b58\u5728\u672c\u5730\u6587\u4ef6: project"+i+".manifest"),this._assetsManager=new jsb.AssetsManager(o,t,function(e,t){if(cc.log("\u7248\u672c\u6bd4\u8f83: \u672c\u5730\u7248\u672c: "+e+", \u8fdc\u7a0b\u7248\u672c: "+t),e==t)return 0;for(var i=e.split("."),o=t.split("."),n=0;n<i.length;++n){var a=parseInt(i[n]),s=parseInt(o[n]||0);if(a!=s)return a-s}return o.length>i.length?-1:0}),!cc.sys.ENABLE_GC_FOR_NATIVE_OBJECTS&&this._assetsManager.retain&&this._assetsManager.retain(),cc.sys.os===cc.sys.OS_ANDROID&&this._assetsManager.setMaxConcurrentTask(2),this.checkUpdate()},checkUpdate:function(){if(cc.log("\u6267\u884c ----- checkUpdate -----"),this._updating)this.upgradeLabel.string="\u52a0\u8f7d\u4e2d\u2026\u2026";else{if(this.loadLocalManifest(),!this._assetsManager.getLocalManifest()||!this._assetsManager.getLocalManifest().isLoaded())return this.upgradeLabel.string="\u52a0\u8f7d\u672c\u5730\u7248\u672c\u4fe1\u606f\u5931\u8d25\uff01",void this.loadNextScene();this._assetsManager.setVerifyCallback(function(e,t){var i=t.md5,o=t.path,n=t.size;return cc.log("\u68c0\u6d4b\u6587\u4ef6: MD5: "+i+", \u6587\u4ef6: "+o+", \u5927\u5c0f: "+n),!0}),this._assetsManager.setEventCallback(this.checkCb.bind(this)),this._assetsManager.checkUpdate(),this._updating=!0}},checkCb:function(e){cc.log("\u6267\u884c ----- checkCb -----");var t=!1,i=!1;switch(e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:cc.log("\u6ca1\u6709\u627e\u5230\u672c\u5730manifest\u6587\u4ef6\uff0c \u8df3\u8fc7\u70ed\u66f4\u65b0\uff01"),t=!0;break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:cc.log("\u4e0b\u8f7dmanifest\u6587\u4ef6\u5931\u8d25\uff0c \u8df3\u8fc7\u70ed\u66f4\u65b0\uff01"),t=!0;break;case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:cc.log("\u89e3\u6790manifest\u6587\u4ef6\u5931\u8d25\uff0c \u8df3\u8fc7\u70ed\u66f4\u65b0\uff01"),t=!0;break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:cc.log("\u53d1\u73b0\u6709\u65b0\u7248\u672c\uff0c\u9700\u8981\u70ed\u66f4\u65b0\uff01"),i=!0,this.hotUpdate();break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:cc.log("\u68c0\u6d4b\u5230\u5df2\u7ecf\u662f\u6700\u65b0\u7248\u672c\u4e86\uff01"),t=!0;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:return void cc.log("\u66f4\u65b0\u8fdb\u5ea6\uff1a"+e.getEventCode()+", "+e.getMessage()+", "+e.getAssetId());case jsb.EventAssetsManager.ASSET_UPDATED:return void cc.log("\u8d44\u6e90\u5df2\u7ecf\u66f4\u65b0\u8fc7\uff1a"+e.getEventCode()+", "+e.getMessage()+", "+e.getAssetId());case jsb.EventAssetsManager.ERROR_UPDATING:return void cc.log("\u66f4\u65b0\u8fc7\u7a0b\u4e2d\u53d1\u751f\u5f02\u5e38\uff1a"+e.getEventCode()+", "+e.getMessage()+", "+e.getAssetId());case jsb.EventAssetsManager.UPDATE_FINISHED:return void cc.log("\u66f4\u65b0\u5df2\u7ecf\u5b8c\u6210\uff1a"+e.getEventCode()+", "+e.getMessage()+", "+e.getAssetId());case jsb.EventAssetsManager.UPDATE_FAILED:return void cc.log("\u66f4\u65b0\u5931\u8d25\uff1a"+e.getEventCode()+", "+e.getMessage()+", "+e.getAssetId());case jsb.EventAssetsManager.ERROR_DECOMPRESS:return void cc.log("\u89e3\u538b\u6587\u4ef6\u5931\u8d25\uff1a"+e.getEventCode()+", "+e.getMessage()+", "+e.getAssetId());default:return void cc.log("\u68c0\u6d4b\u5176\u4ed6\u4e8b\u4ef6Code: "+e.getEventCode())}if(i||(this._assetsManager.setEventCallback(null),this._updating=!1),t)return this.upgradeLabel.string="\u52a0\u8f7d\u4e2d\u2026\u2026",void this.loadNextScene()},hotUpdate:function(){if(cc.log("\u6267\u884c ----- hotUpdate -----"),this._assetsManager){if(this.upgradeProgress.progress=0,this.upgradeRate.string="",this.upgradeProgress.node.active=!0,this.processLabel.string="",this.processLabel.node.active=!0,this._assetsManager.setEventCallback(this.updateCb.bind(this)),this._assetsManager.getState()===jsb.AssetsManager.State.UNINITED){var e=this.manifestUrl.nativeUrl;cc.loader.md5Pipe&&(e=cc.loader.md5Pipe.transformURL(e)),this._assetsManager.loadLocalManifest(e)}else this.loadLocalManifest();this._failCount=0,this._assetsManager.update(),this._updating=!0}else cc.log("\u6267\u884c ----- hotUpdate ----- \u6ca1\u6709this._assetsManager"),this.upgradeLabel.string="\u52a0\u8f7d\u4e2d\u2026\u2026",this.loadNextScene()},updateCb:function(e){cc.log("\u6267\u884c ----- updateCb -----");var t=!1,i=!1,o=!1;switch(e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:cc.log("\u6ca1\u6709\u627e\u5230\u672c\u5730manifest\u6587\u4ef6\uff0c \u8df3\u8fc7\u70ed\u66f4\u65b0\uff01"),i=!0;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:var n=e.getPercentByFile();this.upgradeProgress.progress=n||0,this.upgradeRate.string=e.getDownloadedFiles()+" / "+e.getTotalFiles();var a=e.getMessage();cc.log("\u5df2\u66f4\u65b0\u8fdb\u5ea6: "+(a||n));break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:cc.log("\u4e0b\u8f7d\u6216\u89e3\u6790manifest\u6587\u4ef6\u5931\u8d25\uff0c \u8df3\u8fc7\u70ed\u66f4\u65b0\uff01"),i=!0,o=!0;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:cc.log("\u5df2\u7ecf\u66f4\u65b0\u5230\u6700\u65b0\u7248\u672c\u4e86\uff01"),i=!0,o=!0;break;case jsb.EventAssetsManager.ASSET_UPDATED:cc.log("\u5df2\u7ecf\u66f4\u65b0\u8fc7\uff1a"+e.getEventCode()+", "+e.getMessage()+", "+e.getAssetId());break;case jsb.EventAssetsManager.UPDATE_FINISHED:cc.log("\u5df2\u66f4\u65b0\u5b8c\u6210: "+e.getMessage()),t=!0;break;case jsb.EventAssetsManager.UPDATE_FAILED:cc.log("\u66f4\u65b0UPDATE_FAILED: "+e.getMessage());break;case jsb.EventAssetsManager.ERROR_UPDATING:cc.log("\u66f4\u65b0ERROR_UPDATING: "+e.getMessage());break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:cc.log("\u66f4\u65b0ERROR_DECOMPRESS: "+e.getMessage());break;default:cc.log("\u66f4\u65b0\u5176\u4ed6\u4e8b\u4ef6Code: "+e.getEventCode())}if(i&&(this._assetsManager.setEventCallback(null),this._updating=!1,this.upgradeLabel.string="\u70ed\u66f4\u65b0\u5931\u8d25\uff01"),o)return this.upgradeLabel.string="\u52a0\u8f7d\u4e2d\u2026\u2026",void this.loadNextScene();if(t){this._assetsManager.setEventCallback(null);for(var s=jsb.fileUtils.getSearchPaths(),c=this._assetsManager.getLocalManifest().getSearchPaths(),r=[],l=0;l<c.length;l++)r.push(c[l]);for(l=0;l<s.length;l++)r.indexOf(s[l])>=0||r.push(s[l]);cc.sys.localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(r)),jsb.fileUtils.setSearchPaths(r),cc.audioEngine.stopAll(),cc.game.restart()}},onDestroy:function(){this._assetsManager&&this._assetsManager.setEventCallback(null)},retry:function(){!this._updating&&this._canRetry&&(this.panel.retryBtn.active=!1,this._canRetry=!1,this.upgradeLabel.string="\u91cd\u8bd5\u66f4\u65b0\u2026\u2026",this._assetsManager.downloadFailedAssets())},loadLocalManifest:function(){if(!app.getLocalManifest()){if(this._assetsManager.getState()===jsb.AssetsManager.State.UNINITED){var e=jsb&&jsb.fileUtils?jsb.fileUtils.getWritablePath():"/",t=cc.sys.os==cc.sys.OS_ANDROID?"_android":cc.sys.os==cc.sys.OS_IOS?"_ios":"",i=jsb.fileUtils.isFileExist(e+"project"+t+".manifest")?e+"project"+t+".manifest":"project"+t+".manifest";this._assetsManager.loadLocalManifest(i)}var o=this._assetsManager.getLocalManifest();app.setLocalManifest(o),app.setVersion(o.getVersion()),cc.log("\u672c\u5730\u7248\u672c\u52a0\u8f7d\u6210\u529f: "+app.getVersion())}}}),cc._RF.pop()},{}],UserFaceDialog:[function(e,t,i){"use strict";cc._RF.push(t,"5414beXOPVEKq3XG1vXupL7","UserFaceDialog"),cc.Class({extends:cc.Component,properties:{coinsLabel:cc.Label,couponsLabel:cc.Label,diamondLabel:cc.Label,videoBtn:cc.Node,photoBtn:cc.Node,zdyNode:cc.Node,currFaceSprite:cc.Sprite,viewContentNode:cc.Node,itemNode:cc.Node},onLoad:function(){var e=this,t=cc.winSize;this.node.height=t.height,this.node.width=t.width,this.node.y=-t.height/2,this.node.runAction(cc.moveTo(.2,cc.v2(t.width/2,t.height/2)));var i=app.currParamData();this.lobbyHideOrDisplayCallback=i.lobbyHideOrDisplayCallback||null;var o=app.currUser();this.coinsLabel.string=o.coins||0,this.couponsLabel.string=o.coupons||0,this.diamondLabel.string=o.diamonds||0,this.videoBtn.active=!1,this.photoBtn.active=!1,this.zdyNode.active=!1,app.loadUserFace(this.currFaceSprite,o);var n=app.getFaceImages(2)||[],a=0;this.schedule(function(){if(n[a]){var t=cc.instantiate(e.itemNode);if(t.getComponent(cc.Sprite).spriteFrame=n[a],t.parent=e.viewContentNode,++a>=n.length){n=app.getFaceImages(4)||[];var i=0;e.schedule(function(){if(n[i]){var t=cc.instantiate(e.itemNode);t.getComponent(cc.Sprite).spriteFrame=n[i],t.parent=e.viewContentNode,i++}},0,n.length-1)}}},0,n.length-1)},initWithData:function(e){},onChooseFaceClick:function(e){for(var t=this,i=e.target,o=0,n=-1,a=app.getFaceImages(2)||[],s=0;s<a.length;s++)if(i.getComponent(cc.Sprite).spriteFrame==a[s]){n=s,o=2;break}if(!o){a=app.getFaceImages(4)||[];for(s=0;s<a.length;s++)if(i.getComponent(cc.Sprite).spriteFrame==a[s]){n=s,o=4;break}}(n||0==n)&&app.requestJson({url:"/pipes/user/updatefaceandgender",data:{face:n+1,gender:o}},function(e,i){if(e&&i&&i.success){var a=app.currUser();a.face=""+(n+1),a.gender=o,app.loadUserFace(t.currFaceSprite,a),t.parentScript&&t.parentScript.updateUserFace(),t.gameScript&&t.gameScript.initUserInfo()}})},onCloseClick:function(){var e=this,t=this,i=cc.winSize;app.closeDialog(t.parentScript),this.node.runAction(cc.moveTo(.2,cc.v2(i.width/2,-i.height/2))),this.scheduleOnce(function(){app.closeDialog(t,!0),e.lobbyHideOrDisplayCallback&&e.lobbyHideOrDisplayCallback(!1)},.2)}}),cc._RF.pop()},{}],UserInfoDialog:[function(e,t,i){"use strict";cc._RF.push(t,"05707fKsKxAlbmNJc1bl4Hf","UserInfoDialog"),cc.Class({extends:cc.Component,properties:{coinsLabel:cc.Label,couponsLabel:cc.Label,diamondLabel:cc.Label,vipLevelLabel:cc.Label,idLabel:cc.Label,nameLabel:cc.Label,currFaceSprite:cc.Sprite,introInput:cc.EditBox},onLoad:function(){var e=cc.winSize;this.node.height=e.height,this.node.width=e.width,this.node.y=-e.height/2,this.node.runAction(cc.moveTo(.2,cc.v2(e.width/2,e.height/2)));var t=app.currParamData();this.lobbyScript=t.lobbyScript,this.lobbyHideOrDisplayCallback=t.lobbyHideOrDisplayCallback||null;var i=app.currUser();this.coinsLabel.string=i.coins||0,this.couponsLabel.string=i.coupons||0,this.diamondLabel.string=i.diamonds||0,this.vipLevelLabel.string="VIP"+i.viplevel||0,this.idLabel.string="ID\uff1a"+i.userid||0,this.nameLabel.string="\u6635\u79f0\uff1a"+i.username||"",this.introInput.string=i.intro||"",app.loadUserFace(this.currFaceSprite,i)},initWithData:function(e){},updateUserFace:function(){app.loadUserFace(this.currFaceSprite,app.currUser())},onCopyIDClick:function(){app.copyToClipBoard(""+app.currUser().userid),app.showHintMessage("\u590d\u5236ID\u6210\u529f")},onChangeUserClick:function(){app.logout(),app.loadLoginScene()},onSaveIntroClick:function(){var e=this,t=e.introInput.string;app.requestJson({url:"/pipes/user/updateintro",data:{intro:t}},function(i,o){i&&o&&o.success&&(app.currUser().intro=t,app.showHintMessage("\u4fee\u6539\u7b7e\u540d\u6210\u529f!"),e.gameScript&&e.gameScript.initUserInfo())})},onUserShenfenClick:function(){app.openDialog("UserShenfenDialog",{gameScript:this.gameScript})},onUserPhoneClick:function(){app.openDialog("UserPhoneDialog",{gameScript:this.gameScript})},onCloseClick:function(){var e=this,t=this,i=cc.winSize;this.node.runAction(cc.moveTo(.2,cc.v2(i.width/2,-i.height/2))),this.scheduleOnce(function(){app.closeDialog(t),e.lobbyHideOrDisplayCallback&&e.lobbyHideOrDisplayCallback(!1)},.2)},onHeadIconClick:function(){var e=this;app.openDialog("UserFaceDialog",{lobbyHideOrDisplayCallback:e.lobbyHideOrDisplayCallback.bind(e.gameScript)},function(t){var i=t.getComponent("UserFaceDialog");i.gameScript=e.gameScript,i.parentScript=e,i.initWithData()},null,!0,!0)}}),cc._RF.pop()},{}],UserLoginDialog:[function(e,t,i){"use strict";cc._RF.push(t,"c0aa3Pyk41OJLqjKKGatdgX","UserLoginDialog");var o=e("Application");cc.Class({extends:cc.Component,properties:{accountInput:cc.EditBox,pwdInput:cc.EditBox,submitBtn:cc.Button},onLoad:function(){var e=o.currParamData();this.loginScript=e.loginScript},onDestroy:function(){},onCloseClicked:function(){o.closeDialog(this)},onSubmitClicked:function(){var e=this.accountInput.string,t=this.pwdInput.string;e.length<6?o.showHintMessage("\u8d26\u53f7\u4e0d\u6b63\u786e"):t.length<6?o.showHintMessage("\u5bc6\u7801\u4e0d\u6b63\u786e"):this.loginScript.guestLogin(!1,e,t)},checkIdCard:function(e){e="string"==typeof e?e:String(e);if(/^[\d]{17}[0-9|X|x]{1}$/.test(e)){var t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],i=e.slice(0,17),o=e.slice(17,18);o=isNaN(parseInt(o))?o.toLowerCase():parseInt(o);for(var n=0,a=0;a<17;a++)n=(n+=parseInt(i.charAt(a))*t[a])%11;var s=[1,0,"X",9,8,7,6,5,4,3,2];return o===("X"===s[n]?s[n].toLowerCase():s[n])}return!1}}),cc._RF.pop()},{Application:"Application"}],UserPhoneDialog:[function(e,t,i){"use strict";cc._RF.push(t,"1b57368Aq1DLqYI6s7DNAwe","UserPhoneDialog");var o=e("Application");cc.Class({extends:cc.Component,properties:{title:cc.Label,phoneInput:cc.EditBox,codeLabel:cc.Label,codeInput:cc.EditBox,codeBtn:cc.Button,submitBtn:cc.Button,submitBtnLabel:cc.Label},onLoad:function(){var e=o.currParamData();this.gameScript=e.gameScript;var t=o.currUser();this.phoneInput.string="",this.codeInput.string="",t.mobile2&&(this.phoneInput.string=t.mobile2,this.codeLabel.node.active=!1,this.codeInput.node.active=!1,this.codeBtn.node.active=!1,this.submitBtn.interactable=!1,this.submitBtnLabel.string="\u5df2\u7ed1\u5b9a",this.submitBtnLabel.materials[0]=this.submitBtn.grayMaterial)},onDestroy:function(){},onCloseClicked:function(){o.closeDialog(this)},onCodeClicked:function(e){var t=this,i=t.phoneInput.string;t.judgePhoneNum(i)?o.requestJson({url:"/pipes/user/smsmobcode",data:{mobile:i}},function(i,n){i&&(n.success?(t.setBtnTimeDown(e.target,60),o.showHintMessage("\u8bf7\u586b\u5165\u9a8c\u8bc1\u7801")):o.showHintMessage(n.retinfo))}):o.showHintMessage("\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801")},setBtnTimeDown:function(e,t){this.unschedule(this.fun),e.getComponent(cc.Button).enableAutoGrayEffect=!0,e.getComponent(cc.Button).interactable=!1,e.getChildByName("label").getComponent(cc.Label).string="("+t+")s";var i=this,o=t;this.fun=function(){o--,e.getChildByName("label").getComponent(cc.Label).string="("+o+")s",0==o&&(i.unschedule(i.fun),e.getComponent(cc.Button).enableAutoGrayEffect=!1,e.getComponent(cc.Button).interactable=!0,e.getChildByName("label").getComponent(cc.Label).string="\u83b7\u53d6\u9a8c\u8bc1\u7801")},this.schedule(this.fun,1)},onSubmitClicked:function(){var e=this,t=e.codeInput.string,i=e.phoneInput.string;""!=t&&""!=i?o.requestJson({url:"/pipes/user/updatemobile",data:{mobile:i,vercode:t,precode:e.phonePrecode||""}},function(t,i){t&&(i.success?(e.gameScript&&e.gameScript.updateUserInfo(),o.showHintMessage("\u624b\u673a\u53f7\u7801\u7ed1\u5b9a\u6210\u529f"),o.closeDialog(e)):(e.codeInput.string="",o.showHintMessage("\u9a8c\u8bc1\u7801\u586b\u5199\u9519\u8bef")))}):o.showHintMessage("\u624b\u673a\u53f7\u7801\u6216\u8005\u9a8c\u8bc1\u7801\u4e0d\u80fd\u4e3a\u7a7a")},judgePhoneNum:function(e){return!!/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(e)}}),cc._RF.pop()},{Application:"Application"}],UserShenfenDialog:[function(e,t,i){"use strict";cc._RF.push(t,"34f95vyImNEioY9RTVukYME","UserShenfenDialog");var o=e("Application");cc.Class({extends:cc.Component,properties:{nameInput:cc.EditBox,idnoInput:cc.EditBox,submitBtn:cc.Button,submitBtnLabel:cc.Label},onLoad:function(){var e=o.currParamData();this.gameScript=e.gameScript;var t=o.currUser();this.nameInput.string=t.shenfenname2||"",this.idnoInput.string=t.shenfenno2||"",t.shenfenno2&&(this.nameInput.enabled=!1,this.idnoInput.enabled=!1,this.submitBtn.interactable=!1,this.submitBtnLabel.string="\u5df2\u7ed1\u5b9a",this.submitBtnLabel.materials[0]=this.submitBtn.grayMaterial)},onDestroy:function(){},onCloseClicked:function(){o.closeDialog(this)},onSubmitClicked:function(){var e=this,t=e.idnoInput.string,i=e.nameInput.string;i.length<2||i.length>6?o.showHintMessage("\u59d3\u540d\u4e0d\u6b63\u786e"):t&&this.checkIdCard(t)?o.requestJson({url:"/pipes/user/updateshenfen",data:{bean:{shenfenname:i,shenfenno:t}}},function(t,i){if(t)if(i.success){if(o.showHintMessage("\u5b9e\u540d\u5236\u7ed1\u5b9a\u6210\u529f"),e.gameScript&&e.gameScript.updateUserInfo)e.gameScript.updateUserInfo();else{var n=i.result,a=o.currUser();n&&n.shenfenname2&&(a.shenfenname2=n.shenfenname2),n&&n.shenfenno2&&(a.shenfenno2=n.shenfenno2)}o.closeDialog(e)}else o.showHintMessage(i.retinfo)}):o.showHintMessage("\u8eab\u4efd\u8bc1\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e")},checkIdCard:function(e){e="string"==typeof e?e:String(e);if(/^[\d]{17}[0-9|X|x]{1}$/.test(e)){var t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],i=e.slice(0,17),o=e.slice(17,18);o=isNaN(parseInt(o))?o.toLowerCase():parseInt(o);for(var n=0,a=0;a<17;a++)n=(n+=parseInt(i.charAt(a))*t[a])%11;var s=[1,0,"X",9,8,7,6,5,4,3,2];return o===("X"===s[n]?s[n].toLowerCase():s[n])}return!1}}),cc._RF.pop()},{Application:"Application"}],Utils:[function(e,t,i){"use strict";cc._RF.push(t,"9e086/7ei1HGLZYQEo85vja","Utils");var o=function(){this.PROPID_ROCKET=601,this.PROPID_MISSILE=602,this.PROPID_NUCLEAR=603,this.PROPID_BAOBOX=608,this.PROPID_RADAR=611,this.PROPID_WING=612,this.PROPID_FRENZY=613,this.PROPID_TRACK=614,this.PROPID_TRANSMIT=615,this.GOODS_BUY_RMB=10,this.GOODS_BUY_COIN=20,this.GOODS_BUY_DIAMOND=30,this.GOODS_BUY_COUPON=40,this.GOODS_TYPE_COIN=101,this.GOODS_TYPE_DIAMOND=102,this.GOODS_TYPE_COUPON=103,this.GOODS_TYPE_LIVENESS=104,this.GOODS_TYPE_XCOIN=106,this.GOODS_TYPE_XDIAMOND=107,this.GOODS_TYPE_XCOUPON=108,this.GOODS_TYPE_PACKETS=200,this.GOODS_TYPE_ONCEPACKET=201,this.GOODS_TYPE_ACTIPACKET=202,this.GOODS_TYPE_DAYPACKET=203,this.GOODS_TYPE_WEEKCARD=301,this.GOODS_TYPE_MONTHCARD=302,this.GOODS_TYPE_TELCARD=401,this.GOODS_TYPE_JDCARD=402,this.GOODS_TYPE_ITEM_PROP=600,this.GOODS_TYPE_ITEM_SKIN=700,this.GOODS_TYPE_ITEM_EQUIP=800,this.LETTER_TYPE_GIFT=10,this.LETTER_TYPE_NOTICE=20,this.LETTER_TYPE_PERIOD=30,this.LETTER_STATUS_UNREAD=10,this.LETTER_STATUS_READED=20,this.LETTER_STATUS_EXPIRE=30,this.DUTY_TYPE_SERIE=10,this.DUTY_TYPE_TOTAL=20,this.RANK_TYPE_WIN=10,this.RANK_TYPE_LUCK=20,this.RANK_TYPE_COUPON=30,this.RANK_TYPE_EQUIP=40,this.MISSION_KIND_DAY=20,this.MISSION_STATUS_REACH=10,this.MISSION_STATUS_DOING=20,this.MISSION_STATUS_FINISH=30,this.LIVENESS_STATUS_REACH=10,this.LIVENESS_STATUS_DOING=20,this.LIVENESS_STATUS_FINISH=30,this.DEFAULT_SKINID=700,this.config={},this.goods_intros={}};o.prototype.loadCoinSpriteFrame=function(){return this.goods_intros[this.GOODS_TYPE_COIN].spriteFrame},o.prototype.loadDiamondSpriteFrame=function(){return this.goods_intros[this.GOODS_TYPE_Diamond].spriteFrame},o.prototype.loadCouponSpriteFrame=function(){return this.goods_intros[this.GOODS_TYPE_COUPON].spriteFrame},o.prototype.loadGoodsSpriteFrame=function(e,t,i,o){var n=this.loadGoodsIntro(e,t);if(!n)return null;var a=n["spriteFrame_"+o];return a||(a=n["spriteFrame_"+i]),a||n.spriteFrame},o.prototype.loadGoodsIntro=function(e,t){return t?this.goods_intros[t]:this.goods_intros[e]},o.prototype.getConfig=function(e,t){var i=this.config[e];return"number"==typeof i?i:i||t},o.prototype.loadConfig=function(e){var t=this;app.requestJson("/pipes/user/config",function(e,i){if(e)for(var o in i)t.config[o]=i[o],"apiHost"==o&&i[o]?app._apihost=i[o]:"appHost"==o&&i[o]&&(app._apphost=i[o])}),app.requestJson("/pipes/goods/intros",function(i,o){if(i){for(var n=o,a=0;a<n.length;a++)t.goods_intros[n[a].goodsobjid]=n[a];cc.loader.loadResDir("/platf/goodsicon",cc.SpriteFrame,function(i,o){if(i)e&&e(i);else{for(var n=0;n<o.length;n++){var a=o[n]._name,s=a.lastIndexOf("_")+1,c=a.lastIndexOf("."),r=c>0?a.substring(s,c):a.substring(s),l=r.indexOf("-");if(l>0){var d=r.substring(0,l),p=r.substring(l+1),h=t.goods_intros[parseInt(d)];h["spriteFrame_"+p]=o[n],h.spriteFrame||(h.spriteFrame=o[n])}else t.goods_intros[parseInt(r)].spriteFrame=o[n]}e&&e()}})}else e&&e(new Error("loadConfig error"))})};var n=new o;window.ls=n,t.exports=n,cc._RF.pop()},{}],VipInfoDialog:[function(e,t,i){"use strict";cc._RF.push(t,"10f53pOhh9Ej59pEW8kHjh3","VipInfoDialog"),cc.Class({extends:cc.Component,properties:{ylqSpriteFrame:cc.SpriteFrame,vipTipLabel:cc.Label,progressLabel:cc.Label,progress:cc.ProgressBar,contentNodes:[cc.Node],goodsItemPrefab:cc.Prefab,currVipLabel:cc.Label,nextVipLabel:cc.Label,vipTequanLabel:cc.Label,vipJiangLabel:cc.Label,vipIntroViewContent:cc.Node,introPageNode:cc.Node,itemsPanel:cc.Node,vipIntroView:cc.PageView,vipItemLabelNode:cc.Node,awardCJBtn:cc.Button,awardCJLabel:cc.Label,notvipLabel:cc.Label,awardHelpNode:cc.Node,awardLoadLabel:cc.Node,goodsAwardContainer:cc.Node,goodsAwardDengPanel:cc.Node,dengSpriteFrames:[cc.SpriteFrame],goodsBoxNodes:[cc.Node],awardRedPointNode:cc.Node},onLoad:function(){var e=app.currParamData();this.gameScript=e.gameScript,this.gameInfo=this.gameScript.gameInfo,this.updateUserInfo=e.updateUserInfo,this.updateRedPoint=e.updateRedPoint,this.goodsAwardContainer.active=!1,this.awardLoadLabel.active=!0,this.initUserVip(),this.initVipIntro(this.gameInfo),this.initAwardInfo(),this.AWARDNUM=12,this.EVERANGLE=360/this.AWARDNUM,this.DURATIAME=2,this.ENDANGLE=720,this.ACC=.2,this.MAXSPEED=12,this.awardState=0,this.currSpeed=0,this.currTime=0,this.finaAngle=0},initAwardInfo:function(){var e=this;app.requestJson({url:"/pipes/vip/awardlist"},function(t,i){if(t&&i)if(0!=i.retcode&&i.retinfo)app.showHintMessage(i.retinfo);else{e.awardData=i.result;var o=i.result.awards||[],n=app.currUser();e.awardHelpNode.active=!!n.viplevel,n.viplevel&&(e.notvipLabel.string="\u60a8\u5f53\u524d\u662fVIP"+n.viplevel+"\uff0c\u53ef\u62bd\u5956"+e.awardData.runremain+"\u6b21\u3002"),e.awardCJLabel.string=n.viplevel?"\u5269\u4f59"+(e.awardData.runremain||0)+"\u6b21":"",e.awardRedPointNode.active=!!e.awardData.runremain;for(var a=0;a<e.goodsBoxNodes.length;a++){var s=e.goodsBoxNodes[a],c=o[a];if(s.active=!1,c){var r=ls.loadGoodsIntro(c.goodstype,c.goodsobjid),l=cc.find("goodsItemNode/goodsItemLabel",s),d=cc.find("goodsItemNode/goodsNameLabel",s),p=cc.find("goodsItemNode/goodsItemIcon",s);l.getComponent(cc.Label).string="x"+c.goodscount,d.getComponent(cc.Label).string=r.goodsname,p.getComponent(cc.Sprite).spriteFrame=r.spriteFrame,s.active=!0}}e.awardLoadLabel.active=!1,e.goodsAwardContainer.active=!0}})},initUserVip:function(){var e=app.currUser();e.viplevel||(e.viplevel=0);for(var t=this.gameInfo.vipInfo||[],i=null,o=0,n=0;n<t.length;n++)t[n].vipid>o&&(o=t[n].vipid),t[n].vipid==(e.viplevel||0)+1&&(i=t[n]);this.currVipLabel.string=e.viplevel,this.nextVipLabel.string=o>e.viplevel?e.viplevel+1:e.viplevel;var a=e.paymoney||0;if(o==e.viplevel)this.vipTipLabel.string="\u60a8\u5df2\u662fVIP"+o,this.progressLabel.string="",this.progress.progress=1;else if(o>e.viplevel&&i){i.paymoneytotal||(i.paymoneytotal=0);var s=(i.paymoneytotal-a)/100;this.vipTipLabel.string="\u518d\u5145\u503c"+s+"\u5143\uff0c\u5373\u53ef\u5347\u7ea7\u81f3VIP"+(e.viplevel+1),this.progressLabel.string=a/100+"/"+i.paymoneytotal/100,this.progress.progress=a/i.paymoneytotal}else this.vipTipLabel.string="",this.progressLabel.string="",this.progress.progress=0},initVipIntro:function(e){var t=this,i=e.vipInfo,o=[];this.vipInfoArray=i,this.vipIntroViewContent.removeAllChildren();for(var n=0;n<i.length;n++)o[n]=cc.instantiate(t.introPageNode);for(var a=0;a<o.length;a++){var s=o[a];this.vipIntroViewContent.addChild(s)}var c=0;t.schedule(function(){var e=o[c];if(e){var n=(i[c].vipintros||"").split(";"),a=cc.find("vipItemContainer",e),s=[];a.removeAllChildren();var r=0;t.schedule(function(){if(n[r]){var e=cc.instantiate(t.vipItemLabelNode);cc.find("label",e).getComponent(cc.Label).string=n[r],s.push(e),a.addChild(e),r++}},0,n.length-1),++c>=o.length&&t.onVipIntroPageView()}},0,o.length-1),this.onVipIntroPageView()},onPrePageIndex:function(){var e=this.vipIntroView.getCurrentPageIndex();0!=e&&this.vipIntroView.setCurrentPageIndex(e-1)},onNextPageIndex:function(){var e=this.vipIntroView.getCurrentPageIndex();e+1>=this.vipInfoArray.length||this.vipIntroView.setCurrentPageIndex(e+1)},onVipIntroPageView:function(){cc.log("\u7b2c\u51e0\u4e2a: "+this.vipIntroView.getCurrentPageIndex());var e=this.vipInfoArray[this.vipIntroView.getCurrentPageIndex()];this.vipTequanLabel.string="VIP"+e.vipid+"\u7279\u6743",this.vipJiangLabel.string="VIP"+e.vipid+"\u5956\u52b1",this.itemsPanel.removeAllChildren();for(var t=e.goodsitems||[],i=app.currUser(),o=0;o<t.length;o++){var n=t[o],a=cc.instantiate(this.goodsItemPrefab);a.getComponent("GoodsItemNode").initWithData(n,!0,e.vipid<=i.viplevel?this.ylqSpriteFrame:null,cc.color(212,189,148,255)),a.y=18,this.itemsPanel.addChild(a)}},onSelectClick:function(e,t){for(var i=this.contentNodes,o=2==t,n=0;n<i.length;n++){var a=n==parseInt(t)-1;i[n].active=a}o&&(this.deng1FrameIndex=0,this.deng2FrameIndex=1)},dengRunner:function(){for(var e=0;e<this.deng1SpriteNodes.length;e++)this.deng1SpriteNodes[e].spriteFrame=this.dengSpriteFrames[this.deng1FrameIndex];for(e=0;e<this.deng2SpriteNodes.length;e++)this.deng2SpriteNodes[e].spriteFrame=this.dengSpriteFrames[this.deng2FrameIndex];this.deng1FrameIndex=1==this.deng1FrameIndex?0:1,this.deng2FrameIndex=1==this.deng2FrameIndex?0:1},onOrderGoodsClick:function(){this.gameScript.onOrderGoodsClick(),this.onCloseClick()},onChouJiangClick:function(){var e=this;app.currUser().viplevel?e.awardData.runremain?(e.awardCJBtn.interactable=!1,app.requestJson({url:"/pipes/vip/runaward"},function(t,i){if(t&&i)if(0!=i.retcode&&i.retinfo)app.showHintMessage(i.retinfo);else{e.currRecordInfo=i.result,e.awardData.runremain--,e.awardCJLabel.string="\u5269\u4f59"+e.awardData.runremain+"\u6b21",e.awardRedPointNode.active=!!e.awardData.runremain;for(var o=e.awardData.awards,n=0;n<o.length;n++)i.result.awardid==o[n].awardid&&(e.finaAngle=45*n,e.startAward(),e.awardIndex=n+1)}})):app.showHintMessage("\u4eb2\uff01\u4f60\u7684\u62bd\u5956\u6b21\u6570\u4e0d\u8db3\u8bf7\u660e\u5929\u518d\u6765"):app.showHintMessage("\u60a8\u8fd8\u4e0d\u662fVIP\uff0c\u8bf7\u5148\u6210\u4e3aVIP\u518d\u8fdb\u884c\u62bd\u5956\uff01")},onVIPAwardHelpClick:function(){app.openDialog("ConfirmDialog",{title:"\u89c4\u5219\u8bf4\u660e",confirmTxt:"1. VIP1-VIP5\u7528\u6237\u6bcf\u65e5\u53ef\u53c2\u4e0e\u514d\u8d39\u62bd\u5956\u3002            \n2. VIP\u7b49\u7ea7\u8d8a\u9ad8\uff0c\u53ef\u62bd\u5956\u6b21\u6570\u8d8a\u591a\u3002            \n3. \u62bd\u5956\u6b21\u6570\u4f1a\u5728\u6bcf\u65e5\u76840\u70b9\u91cd\u7f6e\uff0c\u6ca1\u6d88\u8017\u5b8c\u7684\u6b21\u6570\u4e0d\u4f1a\u4fdd\u7559\u5230\u6b21\u65e5\u3002",style:"left",onlyClose:!0})},startAward:function(){this.awardState=1,this.currSpeed=0,this.currTime=0,this.awardAngle=0,this.currChoujiangIndex=0;for(var e=0;e<this.goodsBoxNodes.length;e++){this.goodsBoxNodes[e].getChildByName("goodsItemBg").active=!1}},onCloseClick:function(){this.awardState||app.closeDialog(this)},displayChoujiangEffect:function(e){this.goodsBoxNodes[this.currChoujiangIndex].getChildByName("goodsItemBg").active=!1;var t=parseInt(e%360/45),i=t>=8?7:t;this.goodsBoxNodes[i].getChildByName("goodsItemBg").active=!0,this.currChoujiangIndex=i},displayAward:function(){app.openDialog("GoodsResultDialog",{goodsitems:this.currRecordInfo.goodsitems}),this.updateUserInfo&&this.updateUserInfo(),this.updateRedPoint&&this.updateRedPoint()},update:function(e){if(0!==this.awardState)if(1===this.awardState)if(this.currTime+=e,this.awardAngle+=this.currSpeed*e*60,this.displayChoujiangEffect(this.awardAngle),this.currSpeed<this.MAXSPEED)this.currSpeed+=this.ACC*e*60;else{if(this.currTime<this.DURATIAME)return;(this.awardAngle-this.finaAngle)%360<=20&&(this.awardAngle=this.finaAngle,this.displayChoujiangEffect(this.awardAngle),this.awardState=2)}else if(2===this.awardState){var t=this.awardAngle-this.finaAngle;this.currSpeed=this.MAXSPEED*((this.ENDANGLE-t)/this.ENDANGLE)+.8,this.awardAngle+=this.currSpeed*e*60,this.displayChoujiangEffect(this.awardAngle),this.ENDANGLE-t<=0&&(this.awardState=0,this.awardAngle=this.finaAngle,this.displayChoujiangEffect(this.awardAngle),this.displayAward(),this.awardCJBtn.interactable=!0)}}}),cc._RF.pop()},{}],WarehouseDialog:[function(e,t,i){"use strict";cc._RF.push(t,"8876bgoDFlPY7y4AMy1LSml","WarehouseDialog"),cc.Class({extends:cc.Component,properties:{contentNode:cc.Node,detailIconSprite:cc.Sprite,detailNameLabel:cc.Label,detailNumLabel:cc.Label,detailLabel:cc.Label,giveBtn:cc.Node,give1Node:cc.Node,give1CountLabel:cc.Label,give1idEditBox:cc.EditBox,give1CountEditBox:cc.EditBox,give2Node:cc.Node,give2UserIconSprite:cc.Sprite,give2UserNameLabel:cc.Label,give2UseridLabel:cc.Label,give2PropNameLabel:cc.Label,give2PropCountLabel:cc.Label},onLoad:function(){},initWithData:function(e){var t=e.myAccount,i=t.givablepropids||"";this.givablepropids=i.split(";")||[];for(var o=app.currUser(),n=t.currRockets,a=t.currMissiles,s=t.currNuclears,c=t.currRadars,r=t.currWings,l=t.currFrenzys,d=t.currTracks,p=t.currTransmits,h=[{goodstype:ls.GOODS_TYPE_ITEM_PROP,goodsobjid:ls.PROPID_ROCKET,goodscount:n},{goodstype:ls.GOODS_TYPE_ITEM_PROP,goodsobjid:ls.PROPID_MISSILE,goodscount:a},{goodstype:ls.GOODS_TYPE_ITEM_PROP,goodsobjid:ls.PROPID_NUCLEAR,goodscount:s},{goodstype:ls.GOODS_TYPE_DIAMOND,goodscount:o.diamonds||0},{goodstype:ls.GOODS_TYPE_ITEM_PROP,goodsobjid:ls.PROPID_RADAR,goodscount:c||0},{goodstype:ls.GOODS_TYPE_ITEM_PROP,goodsobjid:ls.PROPID_WING,goodscount:r||0},{goodstype:ls.GOODS_TYPE_ITEM_PROP,goodsobjid:ls.PROPID_FRENZY,goodscount:l||0},{goodstype:ls.GOODS_TYPE_ITEM_PROP,goodsobjid:ls.PROPID_TRACK,goodscount:d||0},{goodstype:ls.GOODS_TYPE_ITEM_PROP,goodsobjid:ls.PROPID_TRANSMIT,goodscount:p||0}],u=this.contentNode.children,g=4,f=[],m=0;m<9;m++){var v=u[m];m<4?(this.initWarehouseItemNode(h[m],v),f.push(h[m])):h[m].goodscount&&(this.initWarehouseItemNode(h[m],u[g]),f.push(h[m]),g++)}this.itemArray=f,this.onSelectClick(null,1)},initWarehouseItemNode:function(e,t){var i=cc.find("Background/title",t).getComponent(cc.Label),o=(cc.find("Background/di",t),cc.find("checkmark/title",t).getComponent(cc.Label)),n=cc.find("icon",t).getComponent(cc.Sprite),a=cc.find("title",t).getComponent(cc.Label),s=ls.loadGoodsIntro(e.goodstype,e.goodsobjid);s&&(i.string=s.goodsname,o.string=s.goodsname,n.spriteFrame=s.spriteFrame),a.string=e.goodscount,i.node.active=!0,o.node.active=!0,n.node.active=!0,a.node.active=!0,t.getComponent(cc.Button).interactable=!0},onSelectClick:function(e,t){var i=this.itemArray[parseInt(t)-1];if(i){var o=ls.loadGoodsIntro(i.goodstype,i.goodsobjid);o&&(this.detailNameLabel.string=o.goodsname,this.detailIconSprite.spriteFrame=o.spriteFrame,this.detailLabel.string=o.goodsdesc||""),this.detailNumLabel.string=i.goodscount,this.giveBtn.active=!1;for(var n=0;n<this.givablepropids.length;n++)parseInt(this.givablepropids[n]),i.goodsobjid;this.currItem=i,this.currGoodsintro=o,this.currNode=e?e.target:this.contentNode.children[0],this.currIndex=t}},onGiveBtnClick:function(){var e=this;if(this.currItem){var t=app.currUser();if(t.viplevel<2){app.openDialog("ConfirmDialog",{title:"\u89c4\u5219\u8bf4\u660e",confirmTxt:"\u4f60\u7684VIP\u7b49\u7ea7\u5c0f\u4e8e2\u7ea7\uff0c\u65e0\u6cd5\u4f7f\u7528\u6b64\u529f\u80fd\uff0c\u662f\u5426\u524d\u5f80\u5145\u503c\uff1f",style:"left",sureFunc:function(){app.closeDialog(e),e.gameScript.onOrderGoodsClick()}})}else if(t.shenfenno2)this.give1CountLabel.string=this.currItem.goodscount,this.give1idEditBox.string="",this.giveUserid=0,this.giveCount=1,this.give1CountEditBox.string=1,this.give1Node.active=!0;else{app.openDialog("ConfirmDialog",{title:"\u89c4\u5219\u8bf4\u660e",confirmTxt:"\u4f60\u7684\u8d26\u53f7\u8fd8\u6ca1\u7ed1\u5b9a\u624b\u673a\uff0c\u65e0\u6cd5\u4f7f\u7528\u6b64\u529f\u80fd\uff0c\u662f\u5426\u524d\u5f80\u624b\u673a\u7ed1\u5b9a\uff1f",style:"left",sureFunc:function(){app.closeDialog(e),e.gameScript.onUserInfoClick()}})}}},onGive2BtnClick:function(){var e=this;this.currGiveObj&&(cc.log(this.currGiveObj),app.requestJson({url:"/pipes/skywar/giveProp",data:{bean:e.currGiveObj}},function(t,i){t&&i&&(0!=i.retcode&&i.retinfo?app.showHintMessage(i.retinfo):(e.give2Node.active=!1,app.showHintMessage("\u8d60\u9001\u6210\u529f~"),e.currItem.goodscount-=e.currGiveObj.propcount,e.initWarehouseItemNode(e.currItem,e.currNode),e.onSelectClick({target:e.currNode},e.currIndex)))}))},onGive1BtnClick:function(){var e=this,t={propid:e.currItem.goodsobjid,touserid:e.giveUserid,propcount:e.giveCount};this.currGiveObj=t,t.touserid?t.propcount?t.propcount>this.currItem.goodscount?app.showHintMessage("\u8d60\u9001\u6570\u91cf\u5927\u4e8e\u6301\u6709\u6570\u91cf"):t.propid&&t.touserid&&t.propcount&&app.requestJson({url:"/pipes/user/player",data:{bean:{userid:t.touserid}}},function(i,o){if(i&&o)if(0!=o.retcode&&o.retinfo)app.showHintMessage(o.retinfo);else{var n=o.result;cc.log(n),e.give1Node.active=!1,app.loadUserFace(e.give2UserIconSprite,n),e.give2UserNameLabel.string=n.username,e.give2UseridLabel.string="ID\uff1a"+n.userid,e.give2PropCountLabel.string=t.propcount,e.give2PropNameLabel.string=e.currGoodsintro.goodsname,e.give2Node.active=!0}}):app.showHintMessage("\u8bf7\u9009\u62e9\u8d60\u9001\u6570\u91cf"):app.showHintMessage("\u8bf7\u8f93\u5165\u53d7\u8d60\u4ebaID~")},onCloseGive1NodeClick:function(){this.give1Node.active=!1},onCloseGive2NodeClick:function(){this.give2Node.active=!1},onGive1idEditBoxEnded:function(){this.giveUserid=parseInt(this.give1idEditBox.string)||0},onGive1CountEditBoxEnded:function(){this.giveCount=parseInt(this.give1CountEditBox.string)||0},onGive1MaxBtnClick:function(){this.giveCount=this.currItem.goodscount,this.give1CountEditBox.string=this.giveCount},onCloseClick:function(){app.closeDialog(this)}}),cc._RF.pop()},{}],ZhuanFanLeDialog:[function(e,t,i){"use strict";cc._RF.push(t,"e0c7aD6aaJBnaFSrEELp82c","ZhuanFanLeDialog"),cc.Class({extends:cc.Component,properties:{yellowBoom:cc.Animation,numLabel:cc.Label},onLoad:function(){var e=this,t=this;app.currParamData();this.numLabel.node.active=!1,this.scheduleOnce(function(){e.yellowBoom.play()},.2),this.scheduleOnce(function(){e.numLabel.node.active=!0},.5),this.scheduleOnce(function(){app.closeDialog(t)},3)}}),cc._RF.pop()},{}],i18n_zh:[function(e,t,i){"use strict";cc._RF.push(t,"0cac4qyStVA04JDo6GKtZmd","i18n_zh");t.exports={skywarRule:"\u3010\u73a9\u6cd5\u8bf4\u660e\u3011\n\n1.\u623f\u95f4\u652f\u63011-3\u4eba\u6e38\u620f\uff0c\u73a9\u5bb6\u53ef\u901a\u8fc7\u5347\u7ea7\u673a\u8f7d\u6b66\u5668\u63d0\u793a\u653b\u51fb\u500d\u6570\uff0c\u4f7f\u7528\u7684\u6b66\u5668\u500d\u6570\u8d8a\u9ad8\uff0c\u83b7\u5f97\u5956\u52b1\u8d8a\u591a    \n\n2.\u79fb\u52a8\u98de\u673a\u65f6\uff0c\u53ef\u5411\u524d\u65b9\u53d1\u5c04\u5b50\u5f39\uff0c\u6b66\u5668\u500d\u6570\u53ef\u901a\u8fc7\u52a0\u51cf\u6309\u94ae\u8c03\u6574\uff0c\u6bcf\u6b21\u53d1\u5c04\u6d88\u8017\u7684\u5b50\u5f39\u6570\u91cf=\u5f53\u524d\u6b66\u5668\u500d\u6570    \n\n3.\u654c\u673a\u7684\u7b49\u7ea7\u8d8a\u9ad8\uff0c\u53ef\u83b7\u5f97\u7684\u5956\u52b1\u8d8a\u591a\uff0c\u51fb\u843d\u7684\u96be\u5ea6\u8d8a\u5927  \u51fb\u843d\u654c\u673a\u83b7\u5f97\u5b50\u5f39=\u654c\u673a\u7b49\u7ea7*\u6b66\u5668\u500d\u6570(\u5982\uff1aLv5*100\u500d\u70ae\uff0c\u53ef\u5f97500\u5b50\u5f39)    \n\n4.\u51fb\u843d\u7279\u6b8a\u654c\u673a\u53ef\u89e6\u53d1\u5c0f\u6e38\u620f\u65f6\u95f4\uff0c\u901a\u8fc7\u4e0d\u540c\u7c7b\u578b\u7684\u5c0f\u6e38\u620f\u83b7\u5f97\u5b50\u5f39\u5956\u52b1    \n\n5.\u51fb\u843d\u5956\u5238x1\u3001\u5956\u5238x2\u8fd0\u8f93\u673a\u53ef\u83b7\u5f97\u5956\u5238\u5956\u52b1\uff0c\u5956\u5238\u53ef\u7528\u4e8e\u5151\u6362\u5404\u7c7b\u793c\u54c1\n  \u83b7\u5f97\u5956\u5238\u6570\u91cf=\u5956\u5238\u8fd0\u8f93\u673a\u500d\u6570*\u70ae\u5f39\u500d\u6570(\u5982\uff1a\u5956\u5238X1*1000\u500d\u7684\u70ae\uff0c\u53ef\u5f971000\u5956\u5238)    \n\n\u3010\u5956\u7f5a\u673a\u5236\u3011    \n\n1.\u4fdd\u6301\u98de\u673a\u8840\u91cf\u5927\u4e8e0\uff0c\u8fbe\u5230\u4e00\u5b9a\u65f6\u95f4\u5373\u53ef\u9886\u53d6\u201c\u98de\u884c\u5458\u5609\u5956\u201d\u4e00\u4efd\uff1b    \n\n2.\u9886\u53d6\u5956\u52b1\u540e\uff0c\u5f53\u524d\u8840\u91cf\u5c06\u6062\u590d\u81f3100\uff0c\u5e76\u5237\u65b0\u4e0b\u4e00\u8f6e\u7684\u5956\u52b1\uff0c\u7d2f\u8ba1\u9886\u5956\u6b21\u6570\u8d8a\u591a\uff0c\u8017\u65f6\u8d8a\u957f\uff0c\u5956\u52b1\u8d8a\u4e30\u5bcc\uff1b    \n\n3.\u7d2f\u8ba1\u9886\u5956\u6b21\u6570\u6bcf\u65e50\u70b9\u5237\u65b0\u3002\u8d85\u8fc70\u70b9\u672a\u9886\u53d6\u7684\u5956\u52b1\u5c06\u5728\u9886\u53d6\u540e\u5237\u65b0\u3002    \n\n4.\u98de\u673a\u8840\u91cf\u4e3a0\u65f6\u5760\u6bc1\uff0c\u6bcf\u6b21\u5760\u6bc1\u4f1a\u4f7f\u80fd\u6e90\u7ed3\u6676\u51cf\u5c11(\u521d\u7ea7\u573a-1\uff0c\u8fdb\u9636\u573a-2\uff0c\u9ad8\u7ea7\u573a-3\uff0c\u5f39\u5934\u573a-3)\u3002"},cc._RF.pop()},{}],i18n:[function(e,t,i){"use strict";cc._RF.push(t,"8a00fY2Y0VPMJyr/ivbXrRq","i18n"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}]},{},["Application","UpgradeScene","SkywarHandler","SkywarTableScene","LobbyScene","LoginScene","Utils","BossComingDialog","BtnSelectNode","EnemyBulletNode","GameAwardDialog","RaderNode","RuleEmptyItemNode","SkywarBulletNode","SkywarGoodsItemNode","SkywarLoadDialog","SkywarRuleDialog","Special801Node","Special804Node","Special805Node","Special806Node","Special807Node","Special809Node","Special810Node","CollFireEffect","DanTouNode","KilledRewardCoin","KilledSpecialRewardCoin","PlaneBoomEffect","SpecialAward","TransmitNode","ZhuanFanLeDialog","Enemy","SkywarPlane","ActivityDialog","ConfirmDialog","DcScrollView","DiamondsBuySkinDialog","DotCardDialog","DutyAwardDialog","DutyDialog","GoodsItemNode","GoodsResultDialog","GuideNode","InfiniteBg2","LetterDetailNode","LetterDialog","LetterItemNode","LobbyBulletNode","MarqueeNode","MissionDialog","MissionItemNode","OnceGoodsDialog","OrderGoodsDialog","PayDialog","PlaneSkinDialog","PlaneSkinItem","RankingDialog","RankingItemNode","RomeSelectDialog","SettingDialog","ShopPayRecordDialog","ShoppingDialog","ShoppingItemDetailNode","ShoppingItemNode","SportHeDanJiFFenDialog","SportNomalDialog","SportSelectDialog","UserFaceDialog","UserInfoDialog","UserLoginDialog","UserPhoneDialog","UserShenfenDialog","VipInfoDialog","WarehouseDialog","Boot","MD5","Socket","i18n","i18n_zh"]);